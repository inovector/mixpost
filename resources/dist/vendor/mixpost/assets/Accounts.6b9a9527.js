import{o,m as b,w as t,b as e,a as s,u as w,L as $,_ as T,c as l,r as k,h as g,n as L,f as i,d as C,j as S,F as A,e as B,H as N,P,p as F,t as I}from"./app.b3b20422.js";import{u as V}from"./useNotifications.6c8b84e4.js";import{_ as z}from"./PageHeader.c500c2c0.js";import{a as j,_ as E}from"./PrimaryButton.98cb8c43.js";import{_ as R,a as G,b as O,T as U,c as Y}from"./Alert.32b38758.js";import{_ as q}from"./Account.09365c17.js";import{T as J,F as D}from"./Facebook.b8b3d986.js";import{_ as K}from"./Input.6c383a39.js";import{H as Q}from"./HorizontalGroup.5b2c74f3.js";import{M as W}from"./ProviderIcon.68f496f0.js";import{_ as M,a as X}from"./DropdownItem.de0883b0.js";import{E as Z}from"./EllipsisVertical.b8891109.js";import"./ExclamationCircle.0b7d05f0.js";const ee={class:"flex mr-4"},se=e("span",{class:"flex flex-col items-start"},[e("span",{class:"font-semibold"},"Twitter"),e("span",null,"Connect a new Twitter profile")],-1),te={__name:"AddTwitterAccount",setup(m){return(a,n)=>(o(),b(w($),{href:a.route("mixpost.accounts.add",{provider:"twitter"}),method:"post",as:"button",type:"button",class:"w-full flex items-center px-lg py-4 hover:bg-twitter hover:bg-opacity-20 ease-in-out duration-200"},{default:t(()=>[e("span",ee,[s(J,{class:"text-twitter"})]),se]),_:1},8,["href"]))}},oe={class:"flex mr-4"},ae=e("span",{class:"flex flex-col items-start"},[e("span",{class:"font-semibold"},"Facebook Page"),e("span",null,"Connect a new Facebook page")],-1),ne={__name:"AddFacebookPage",setup(m){return(a,n)=>(o(),b(w($),{href:a.route("mixpost.accounts.add",{provider:"facebook_page"}),method:"post",as:"button",type:"button",class:"w-full flex items-center px-lg py-4 hover:bg-facebook hover:bg-opacity-20 ease-in-out duration-200"},{default:t(()=>[e("span",oe,[s(D,{class:"text-facebook"})]),ae]),_:1},8,["href"]))}},re={class:"flex mr-4"},ce=e("span",{class:"flex flex-col items-start"},[e("span",{class:"font-semibold"},"Facebook Group"),e("span",null,"Connect a new Facebook group")],-1),le={__name:"AddFacebookGroup",setup(m){return(a,n)=>(o(),b(w($),{href:a.route("mixpost.accounts.add",{provider:"facebook_group"}),method:"post",as:"button",type:"button",class:"w-full flex items-center px-lg py-4 hover:bg-facebook hover:bg-opacity-20 ease-in-out duration-200"},{default:t(()=>[e("span",re,[s(D,{class:"text-facebook"})]),ce]),_:1},8,["href"]))}},ie={},de={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},ue=e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3"},null,-1),_e=[ue];function pe(m,a){return o(),l("svg",de,_e)}const fe=T(ie,[["render",pe]]),me={class:"flex mr-md"},he=e("span",{class:"flex flex-col items-start"},[e("span",{class:"font-semibold"},"Mastodon"),e("span",null,"Connect a new Mastodon profile")],-1),ve={key:0,class:"px-lg py-md"},ge=i("Enter your Mastodon server"),be=e("span",{class:"mr-xs"},"Next",-1),xe={__name:"AddMastodonAccount",setup(m){const{notify:a}=V(),n=k(!1),d=k(""),u=k(!1),h=()=>new Promise((p,f)=>{axios.post(route("mixpost.services.createMastodonApp"),{server:d.value}).then(()=>{p()}).catch(function(v){f(v)})}),_=()=>{n.value=!0,C.Inertia.post(route("mixpost.accounts.add",{provider:"mastodon"}),{server:d.value},{onSuccess(){n.value=!1}})},y=async()=>{n.value=!0,await h().then(()=>{_()}).catch(p=>{if(p.response.status!==422){a("error",p.response.data.message);return}a("error",p.response.data.errors)}).finally(()=>{n.value=!1})};return(p,f)=>(o(),l("div",{class:L({"bg-mastodon bg-opacity-20":u.value})},[e("div",{role:"button",onClick:f[0]||(f[0]=v=>u.value=!u.value),type:"button",class:"w-full flex items-center px-lg py-md hover:bg-mastodon hover:bg-opacity-20 ease-in-out duration-200"},[e("span",me,[s(W,{class:"text-mastodon"})]),he]),u.value?(o(),l("div",ve,[s(Q,null,{title:t(()=>[ge]),default:t(()=>[s(K,{type:"text",modelValue:d.value,"onUpdate:modelValue":f[1]||(f[1]=v=>d.value=v),placeholder:"example.server"},null,8,["modelValue"])]),_:1}),s(j,{onClick:y,disabled:!d.value||n.value,isLoading:n.value,class:"mt-xs md:mt-0"},{default:t(()=>[be,e("span",null,[s(fe,{class:"!w-5 !h-5"})])]),_:1},8,["disabled","isLoading"])])):g("",!0)],2))}},we={},ke={xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},$e=e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1),ye=[$e];function Ce(m,a){return o(),l("svg",ke,ye)}const Ae=T(we,[["render",Ce]]),Fe={class:"w-full max-w-5xl mx-auto row-py"},Ie=i(" Connect a social account you'd like to manage. "),Me={class:"mt-lg row-px w-full"},Te={key:0,class:"mb-md"},Ve={key:0},je={key:1},De=e("p",{class:"mt-xs italic"},"Click on the button below to configure the third-party services.",-1),He=i("Configure services"),Le={class:"w-full grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-6"},Se={class:"block p-lg"},Be={class:"flex flex-col justify-center items-center"},Ne=e("span",{class:"mt-xs text-lg"},"Add account",-1),Pe={class:"absolute top-0 right-0 mt-sm mr-sm"},ze=i(" Refresh "),Ee=i(" Delete "),Re={class:"flex flex-col justify-center"},Ge={class:"mt-sm font-semibold text-center"},Oe={class:"mt-1 text-center text-stone-800"},Ue=i(" Delete account "),Ye=i(" Are you sure you would like to delete this account? "),qe=i("Cancel "),Je=i("Delete "),Ke={class:"flex flex-col"},is={__name:"Accounts",props:{has_service:{required:!0,type:Object}},setup(m){const a=m,n="Social Accounts",{notify:d}=V(),u=k(!1),h=k(null),_=k(!1),y=S(()=>Object.keys(a.has_service).some(r=>a.has_service[r]!==!0)),p=r=>{C.Inertia.put(route("mixpost.accounts.update",{account:r}),{},{onSuccess(x){x.props.flash.error||d("success","The account has been refreshed")}})},f=()=>{C.Inertia.delete(route("mixpost.accounts.delete",{account:h.value}),{onStart(){_.value=!0},onSuccess(){h.value=null,d("success","Account deleted")},onFinish(){_.value=!1}})},v=()=>{_.value||(h.value=null)};return(r,x)=>(o(),l(A,null,[s(w(N),{title:n}),e("div",Fe,[s(z,{title:n},{description:t(()=>[Ie]),_:1}),e("div",Me,[w(y)?(o(),l("div",Te,[s(R,{variant:"warning",closeable:!1,class:"mb-md"},{default:t(()=>[r.$page.props.has_service.twitter?g("",!0):(o(),l("p",Ve,"You have not configured Twitter service.")),r.$page.props.has_service.facebook?g("",!0):(o(),l("p",je,"You have not configured Facebook service.")),De]),_:1}),s(w($),{href:r.route("mixpost.services.index"),class:"inline-block"},{default:t(()=>[s(j,null,{default:t(()=>[He]),_:1})]),_:1},8,["href"])])):g("",!0),e("div",Le,[e("button",{onClick:x[0]||(x[0]=c=>u.value=!0),class:"border border-indigo-800 rounded-lg hover:border-indigo-500 hover:text-indigo-500 transition-colors ease-in-out duration-200"},[e("span",Se,[e("span",Be,[s(P,{class:"w-7 h-7"}),Ne])])]),(o(!0),l(A,null,B(r.$page.props.accounts,c=>(o(),b(E,{key:c.id,class:"relative"},{default:t(()=>[e("div",Pe,[s(X,{"width-classes":"w-32"},{trigger:t(()=>[s(F,{size:"xs"},{default:t(()=>[s(Z)]),_:1})]),content:t(()=>[s(M,{onClick:H=>p(c.id),as:"button"},{default:t(()=>[s(Ae,{class:"!w-5 !h-5 mr-1"}),ze]),_:2},1032,["onClick"]),s(M,{onClick:H=>h.value=c.id,as:"button"},{default:t(()=>[s(U,{class:"!w-5 !h-5 mr-1 text-red-500"}),Ee]),_:2},1032,["onClick"])]),_:2},1024)]),e("div",Re,[s(q,{size:"lg","img-url":c.image,provider:c.provider,active:!0},null,8,["img-url","provider"]),e("div",Ge,I(c.name),1),e("div",Oe,"Added: "+I(c.created_at),1)])]),_:2},1024))),128))])])]),s(G,{show:h.value!==null,onClose:v,variant:"danger"},{header:t(()=>[Ue]),body:t(()=>[Ye]),footer:t(()=>[s(F,{onClick:v,disabled:_.value,class:"mr-xs"},{default:t(()=>[qe]),_:1},8,["disabled"]),s(Y,{onClick:f,"is-loading":_.value,disabled:_.value},{default:t(()=>[Je]),_:1},8,["is-loading","disabled"])]),_:1},8,["show"]),s(O,{show:u.value,closeable:!0,onClose:x[1]||(x[1]=c=>u.value=!1)},{default:t(()=>[e("div",Ke,[r.$page.props.has_service.twitter?(o(),b(te,{key:0})):g("",!0),r.$page.props.has_service.facebook?(o(),b(ne,{key:1})):g("",!0),r.$page.props.has_service.facebook?(o(),b(le,{key:2})):g("",!0),s(xe)])]),_:1},8,["show"])],64))}};export{is as default};
