import{W as eo,h as bp,a3 as Fo,r as ct,l as No,a4 as Dl,a5 as xi,a6 as LC,O as rf,u as Ne,s as zC,a7 as $C,B as HC,a8 as VC,a9 as WC,aa as UC,_ as ks,o as V,d as Z,i as Ur,n as Dt,p as bn,a as M,b as ue,j as Oe,t as vn,m as qC,F as dt,e as Xn,I as Zt,c as Je,Q as eg,w as xe,X as tg,q as KC,K as jC,M as JC,f as en,g as Yu,E as Xu,x as ng,k as GC,$ as YC}from"./app.e6e16084.js";import{E as XC,c as Zu,d as ZC,e as QC,b as Dp,i as eE,g as tE,a as nE,h as rg}from"./Trash.24f27aae.js";import{u as rE}from"./PageHeader.c62e2306.js";import{_ as iE}from"./PrimaryButton.7bb9c0ab.js";import{_ as sf}from"./CircleLoading.61952dd7.js";var kc={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(n,e){(function(){var t,r="4.17.21",i=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",a="Expected a function",u="Invalid `variable` option passed into `_.template`",c="__lodash_hash_undefined__",h=500,d="__lodash_placeholder__",m=1,g=2,y=4,x=1,w=2,_=1,O=2,P=4,z=8,E=16,q=32,$=64,K=128,H=256,fe=512,Ee=30,$e="...",Pe=800,we=16,Ze=1,Ke=2,Le=3,Re=1/0,Me=9007199254740991,Se=17976931348623157e292,Ce=0/0,Ve=4294967295,nn=Ve-1,ir=Ve>>>1,wn=[["ary",K],["bind",_],["bindKey",O],["curry",z],["curryRight",E],["flip",fe],["partial",q],["partialRight",$],["rearg",H]],tt="[object Arguments]",Tt="[object Array]",wr="[object AsyncFunction]",xt="[object Boolean]",rn="[object Date]",Ln="[object DOMException]",Cn="[object Error]",sr="[object Function]",Cr="[object GeneratorFunction]",ht="[object Map]",zn="[object Number]",Zr="[object Null]",wt="[object Object]",Qr="[object Promise]",Fi="[object Proxy]",Ct="[object RegExp]",Xe="[object Set]",En="[object String]",sn="[object Symbol]",ei="[object Undefined]",$n="[object WeakMap]",Ni="[object WeakSet]",Hn="[object ArrayBuffer]",An="[object DataView]",Ms="[object Float32Array]",Fs="[object Float64Array]",Ns="[object Int8Array]",Rs="[object Int16Array]",Bs="[object Int32Array]",F="[object Uint8Array]",J="[object Uint8ClampedArray]",te="[object Uint16Array]",De="[object Uint32Array]",ge=/\b__p \+= '';/g,ot=/\b(__p \+=) '' \+/g,Mt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,or=/&(?:amp|lt|gt|quot|#39);/g,Is=/[&<>"']/g,ar=RegExp(or.source),Ps=RegExp(Is.source),Ri=/<%-([\s\S]+?)%>/g,Er=/<%([\s\S]+?)%>/g,Po=/<%=([\s\S]+?)%>/g,Ls=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Bi=/^\w*$/,pv=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ll=/[\\^$.*+?()[\]{}|]/g,mv=RegExp(Ll.source),zl=/^\s+/,gv=/\s/,vv=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,yv=/\{\n\/\* \[wrapped with (.+)\] \*/,bv=/,? & /,Dv=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,xv=/[()=,{}\[\]\/\s]/,wv=/\\(\\)?/g,Cv=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,jf=/\w*$/,Ev=/^[-+]0x[0-9a-f]+$/i,Av=/^0b[01]+$/i,_v=/^\[object .+?Constructor\]$/,Sv=/^0o[0-7]+$/i,kv=/^(?:0|[1-9]\d*)$/,Ov=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Lo=/($^)/,Tv=/['\n\r\u2028\u2029\\]/g,zo="\\ud800-\\udfff",Mv="\\u0300-\\u036f",Fv="\\ufe20-\\ufe2f",Nv="\\u20d0-\\u20ff",Jf=Mv+Fv+Nv,Gf="\\u2700-\\u27bf",Yf="a-z\\xdf-\\xf6\\xf8-\\xff",Rv="\\xac\\xb1\\xd7\\xf7",Bv="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Iv="\\u2000-\\u206f",Pv=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Xf="A-Z\\xc0-\\xd6\\xd8-\\xde",Zf="\\ufe0e\\ufe0f",Qf=Rv+Bv+Iv+Pv,$l="['\u2019]",Lv="["+zo+"]",ed="["+Qf+"]",$o="["+Jf+"]",td="\\d+",zv="["+Gf+"]",nd="["+Yf+"]",rd="[^"+zo+Qf+td+Gf+Yf+Xf+"]",Hl="\\ud83c[\\udffb-\\udfff]",$v="(?:"+$o+"|"+Hl+")",id="[^"+zo+"]",Vl="(?:\\ud83c[\\udde6-\\uddff]){2}",Wl="[\\ud800-\\udbff][\\udc00-\\udfff]",Ii="["+Xf+"]",sd="\\u200d",od="(?:"+nd+"|"+rd+")",Hv="(?:"+Ii+"|"+rd+")",ad="(?:"+$l+"(?:d|ll|m|re|s|t|ve))?",ld="(?:"+$l+"(?:D|LL|M|RE|S|T|VE))?",ud=$v+"?",cd="["+Zf+"]?",Vv="(?:"+sd+"(?:"+[id,Vl,Wl].join("|")+")"+cd+ud+")*",Wv="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Uv="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",fd=cd+ud+Vv,qv="(?:"+[zv,Vl,Wl].join("|")+")"+fd,Kv="(?:"+[id+$o+"?",$o,Vl,Wl,Lv].join("|")+")",jv=RegExp($l,"g"),Jv=RegExp($o,"g"),Ul=RegExp(Hl+"(?="+Hl+")|"+Kv+fd,"g"),Gv=RegExp([Ii+"?"+nd+"+"+ad+"(?="+[ed,Ii,"$"].join("|")+")",Hv+"+"+ld+"(?="+[ed,Ii+od,"$"].join("|")+")",Ii+"?"+od+"+"+ad,Ii+"+"+ld,Uv,Wv,td,qv].join("|"),"g"),Yv=RegExp("["+sd+zo+Jf+Zf+"]"),Xv=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Zv=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Qv=-1,He={};He[Ms]=He[Fs]=He[Ns]=He[Rs]=He[Bs]=He[F]=He[J]=He[te]=He[De]=!0,He[tt]=He[Tt]=He[Hn]=He[xt]=He[An]=He[rn]=He[Cn]=He[sr]=He[ht]=He[zn]=He[wt]=He[Ct]=He[Xe]=He[En]=He[$n]=!1;var ze={};ze[tt]=ze[Tt]=ze[Hn]=ze[An]=ze[xt]=ze[rn]=ze[Ms]=ze[Fs]=ze[Ns]=ze[Rs]=ze[Bs]=ze[ht]=ze[zn]=ze[wt]=ze[Ct]=ze[Xe]=ze[En]=ze[sn]=ze[F]=ze[J]=ze[te]=ze[De]=!0,ze[Cn]=ze[sr]=ze[$n]=!1;var e1={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},t1={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},n1={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},r1={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},i1=parseFloat,s1=parseInt,dd=typeof eo=="object"&&eo&&eo.Object===Object&&eo,o1=typeof self=="object"&&self&&self.Object===Object&&self,at=dd||o1||Function("return this")(),ql=e&&!e.nodeType&&e,ti=ql&&!0&&n&&!n.nodeType&&n,hd=ti&&ti.exports===ql,Kl=hd&&dd.process,on=function(){try{var S=ti&&ti.require&&ti.require("util").types;return S||Kl&&Kl.binding&&Kl.binding("util")}catch{}}(),pd=on&&on.isArrayBuffer,md=on&&on.isDate,gd=on&&on.isMap,vd=on&&on.isRegExp,yd=on&&on.isSet,bd=on&&on.isTypedArray;function Wt(S,N,T){switch(T.length){case 0:return S.call(N);case 1:return S.call(N,T[0]);case 2:return S.call(N,T[0],T[1]);case 3:return S.call(N,T[0],T[1],T[2])}return S.apply(N,T)}function a1(S,N,T,j){for(var se=-1,Ae=S==null?0:S.length;++se<Ae;){var Qe=S[se];N(j,Qe,T(Qe),S)}return j}function an(S,N){for(var T=-1,j=S==null?0:S.length;++T<j&&N(S[T],T,S)!==!1;);return S}function l1(S,N){for(var T=S==null?0:S.length;T--&&N(S[T],T,S)!==!1;);return S}function Dd(S,N){for(var T=-1,j=S==null?0:S.length;++T<j;)if(!N(S[T],T,S))return!1;return!0}function Ar(S,N){for(var T=-1,j=S==null?0:S.length,se=0,Ae=[];++T<j;){var Qe=S[T];N(Qe,T,S)&&(Ae[se++]=Qe)}return Ae}function Ho(S,N){var T=S==null?0:S.length;return!!T&&Pi(S,N,0)>-1}function jl(S,N,T){for(var j=-1,se=S==null?0:S.length;++j<se;)if(T(N,S[j]))return!0;return!1}function We(S,N){for(var T=-1,j=S==null?0:S.length,se=Array(j);++T<j;)se[T]=N(S[T],T,S);return se}function _r(S,N){for(var T=-1,j=N.length,se=S.length;++T<j;)S[se+T]=N[T];return S}function Jl(S,N,T,j){var se=-1,Ae=S==null?0:S.length;for(j&&Ae&&(T=S[++se]);++se<Ae;)T=N(T,S[se],se,S);return T}function u1(S,N,T,j){var se=S==null?0:S.length;for(j&&se&&(T=S[--se]);se--;)T=N(T,S[se],se,S);return T}function Gl(S,N){for(var T=-1,j=S==null?0:S.length;++T<j;)if(N(S[T],T,S))return!0;return!1}var c1=Yl("length");function f1(S){return S.split("")}function d1(S){return S.match(Dv)||[]}function xd(S,N,T){var j;return T(S,function(se,Ae,Qe){if(N(se,Ae,Qe))return j=Ae,!1}),j}function Vo(S,N,T,j){for(var se=S.length,Ae=T+(j?1:-1);j?Ae--:++Ae<se;)if(N(S[Ae],Ae,S))return Ae;return-1}function Pi(S,N,T){return N===N?E1(S,N,T):Vo(S,wd,T)}function h1(S,N,T,j){for(var se=T-1,Ae=S.length;++se<Ae;)if(j(S[se],N))return se;return-1}function wd(S){return S!==S}function Cd(S,N){var T=S==null?0:S.length;return T?Zl(S,N)/T:Ce}function Yl(S){return function(N){return N==null?t:N[S]}}function Xl(S){return function(N){return S==null?t:S[N]}}function Ed(S,N,T,j,se){return se(S,function(Ae,Qe,Be){T=j?(j=!1,Ae):N(T,Ae,Qe,Be)}),T}function p1(S,N){var T=S.length;for(S.sort(N);T--;)S[T]=S[T].value;return S}function Zl(S,N){for(var T,j=-1,se=S.length;++j<se;){var Ae=N(S[j]);Ae!==t&&(T=T===t?Ae:T+Ae)}return T}function Ql(S,N){for(var T=-1,j=Array(S);++T<S;)j[T]=N(T);return j}function m1(S,N){return We(N,function(T){return[T,S[T]]})}function Ad(S){return S&&S.slice(0,Od(S)+1).replace(zl,"")}function Ut(S){return function(N){return S(N)}}function eu(S,N){return We(N,function(T){return S[T]})}function zs(S,N){return S.has(N)}function _d(S,N){for(var T=-1,j=S.length;++T<j&&Pi(N,S[T],0)>-1;);return T}function Sd(S,N){for(var T=S.length;T--&&Pi(N,S[T],0)>-1;);return T}function g1(S,N){for(var T=S.length,j=0;T--;)S[T]===N&&++j;return j}var v1=Xl(e1),y1=Xl(t1);function b1(S){return"\\"+r1[S]}function D1(S,N){return S==null?t:S[N]}function Li(S){return Yv.test(S)}function x1(S){return Xv.test(S)}function w1(S){for(var N,T=[];!(N=S.next()).done;)T.push(N.value);return T}function tu(S){var N=-1,T=Array(S.size);return S.forEach(function(j,se){T[++N]=[se,j]}),T}function kd(S,N){return function(T){return S(N(T))}}function Sr(S,N){for(var T=-1,j=S.length,se=0,Ae=[];++T<j;){var Qe=S[T];(Qe===N||Qe===d)&&(S[T]=d,Ae[se++]=T)}return Ae}function Wo(S){var N=-1,T=Array(S.size);return S.forEach(function(j){T[++N]=j}),T}function C1(S){var N=-1,T=Array(S.size);return S.forEach(function(j){T[++N]=[j,j]}),T}function E1(S,N,T){for(var j=T-1,se=S.length;++j<se;)if(S[j]===N)return j;return-1}function A1(S,N,T){for(var j=T+1;j--;)if(S[j]===N)return j;return j}function zi(S){return Li(S)?S1(S):c1(S)}function _n(S){return Li(S)?k1(S):f1(S)}function Od(S){for(var N=S.length;N--&&gv.test(S.charAt(N)););return N}var _1=Xl(n1);function S1(S){for(var N=Ul.lastIndex=0;Ul.test(S);)++N;return N}function k1(S){return S.match(Ul)||[]}function O1(S){return S.match(Gv)||[]}var T1=function S(N){N=N==null?at:$i.defaults(at.Object(),N,$i.pick(at,Zv));var T=N.Array,j=N.Date,se=N.Error,Ae=N.Function,Qe=N.Math,Be=N.Object,nu=N.RegExp,M1=N.String,ln=N.TypeError,Uo=T.prototype,F1=Ae.prototype,Hi=Be.prototype,qo=N["__core-js_shared__"],Ko=F1.toString,ke=Hi.hasOwnProperty,N1=0,Td=function(){var s=/[^.]+$/.exec(qo&&qo.keys&&qo.keys.IE_PROTO||"");return s?"Symbol(src)_1."+s:""}(),jo=Hi.toString,R1=Ko.call(Be),B1=at._,I1=nu("^"+Ko.call(ke).replace(Ll,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Jo=hd?N.Buffer:t,kr=N.Symbol,Go=N.Uint8Array,Md=Jo?Jo.allocUnsafe:t,Yo=kd(Be.getPrototypeOf,Be),Fd=Be.create,Nd=Hi.propertyIsEnumerable,Xo=Uo.splice,Rd=kr?kr.isConcatSpreadable:t,$s=kr?kr.iterator:t,ni=kr?kr.toStringTag:t,Zo=function(){try{var s=ai(Be,"defineProperty");return s({},"",{}),s}catch{}}(),P1=N.clearTimeout!==at.clearTimeout&&N.clearTimeout,L1=j&&j.now!==at.Date.now&&j.now,z1=N.setTimeout!==at.setTimeout&&N.setTimeout,Qo=Qe.ceil,ea=Qe.floor,ru=Be.getOwnPropertySymbols,$1=Jo?Jo.isBuffer:t,Bd=N.isFinite,H1=Uo.join,V1=kd(Be.keys,Be),et=Qe.max,pt=Qe.min,W1=j.now,U1=N.parseInt,Id=Qe.random,q1=Uo.reverse,iu=ai(N,"DataView"),Hs=ai(N,"Map"),su=ai(N,"Promise"),Vi=ai(N,"Set"),Vs=ai(N,"WeakMap"),Ws=ai(Be,"create"),ta=Vs&&new Vs,Wi={},K1=li(iu),j1=li(Hs),J1=li(su),G1=li(Vi),Y1=li(Vs),na=kr?kr.prototype:t,Us=na?na.valueOf:t,Pd=na?na.toString:t;function b(s){if(je(s)&&!oe(s)&&!(s instanceof me)){if(s instanceof un)return s;if(ke.call(s,"__wrapped__"))return Lh(s)}return new un(s)}var Ui=function(){function s(){}return function(l){if(!Ue(l))return{};if(Fd)return Fd(l);s.prototype=l;var f=new s;return s.prototype=t,f}}();function ra(){}function un(s,l){this.__wrapped__=s,this.__actions__=[],this.__chain__=!!l,this.__index__=0,this.__values__=t}b.templateSettings={escape:Ri,evaluate:Er,interpolate:Po,variable:"",imports:{_:b}},b.prototype=ra.prototype,b.prototype.constructor=b,un.prototype=Ui(ra.prototype),un.prototype.constructor=un;function me(s){this.__wrapped__=s,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ve,this.__views__=[]}function X1(){var s=new me(this.__wrapped__);return s.__actions__=Ft(this.__actions__),s.__dir__=this.__dir__,s.__filtered__=this.__filtered__,s.__iteratees__=Ft(this.__iteratees__),s.__takeCount__=this.__takeCount__,s.__views__=Ft(this.__views__),s}function Z1(){if(this.__filtered__){var s=new me(this);s.__dir__=-1,s.__filtered__=!0}else s=this.clone(),s.__dir__*=-1;return s}function Q1(){var s=this.__wrapped__.value(),l=this.__dir__,f=oe(s),p=l<0,v=f?s.length:0,D=fb(0,v,this.__views__),C=D.start,A=D.end,k=A-C,R=p?A:C-1,B=this.__iteratees__,I=B.length,U=0,X=pt(k,this.__takeCount__);if(!f||!p&&v==k&&X==k)return ah(s,this.__actions__);var ne=[];e:for(;k--&&U<X;){R+=l;for(var le=-1,re=s[R];++le<I;){var de=B[le],ve=de.iteratee,jt=de.type,_t=ve(re);if(jt==Ke)re=_t;else if(!_t){if(jt==Ze)continue e;break e}}ne[U++]=re}return ne}me.prototype=Ui(ra.prototype),me.prototype.constructor=me;function ri(s){var l=-1,f=s==null?0:s.length;for(this.clear();++l<f;){var p=s[l];this.set(p[0],p[1])}}function ey(){this.__data__=Ws?Ws(null):{},this.size=0}function ty(s){var l=this.has(s)&&delete this.__data__[s];return this.size-=l?1:0,l}function ny(s){var l=this.__data__;if(Ws){var f=l[s];return f===c?t:f}return ke.call(l,s)?l[s]:t}function ry(s){var l=this.__data__;return Ws?l[s]!==t:ke.call(l,s)}function iy(s,l){var f=this.__data__;return this.size+=this.has(s)?0:1,f[s]=Ws&&l===t?c:l,this}ri.prototype.clear=ey,ri.prototype.delete=ty,ri.prototype.get=ny,ri.prototype.has=ry,ri.prototype.set=iy;function lr(s){var l=-1,f=s==null?0:s.length;for(this.clear();++l<f;){var p=s[l];this.set(p[0],p[1])}}function sy(){this.__data__=[],this.size=0}function oy(s){var l=this.__data__,f=ia(l,s);if(f<0)return!1;var p=l.length-1;return f==p?l.pop():Xo.call(l,f,1),--this.size,!0}function ay(s){var l=this.__data__,f=ia(l,s);return f<0?t:l[f][1]}function ly(s){return ia(this.__data__,s)>-1}function uy(s,l){var f=this.__data__,p=ia(f,s);return p<0?(++this.size,f.push([s,l])):f[p][1]=l,this}lr.prototype.clear=sy,lr.prototype.delete=oy,lr.prototype.get=ay,lr.prototype.has=ly,lr.prototype.set=uy;function ur(s){var l=-1,f=s==null?0:s.length;for(this.clear();++l<f;){var p=s[l];this.set(p[0],p[1])}}function cy(){this.size=0,this.__data__={hash:new ri,map:new(Hs||lr),string:new ri}}function fy(s){var l=ga(this,s).delete(s);return this.size-=l?1:0,l}function dy(s){return ga(this,s).get(s)}function hy(s){return ga(this,s).has(s)}function py(s,l){var f=ga(this,s),p=f.size;return f.set(s,l),this.size+=f.size==p?0:1,this}ur.prototype.clear=cy,ur.prototype.delete=fy,ur.prototype.get=dy,ur.prototype.has=hy,ur.prototype.set=py;function ii(s){var l=-1,f=s==null?0:s.length;for(this.__data__=new ur;++l<f;)this.add(s[l])}function my(s){return this.__data__.set(s,c),this}function gy(s){return this.__data__.has(s)}ii.prototype.add=ii.prototype.push=my,ii.prototype.has=gy;function Sn(s){var l=this.__data__=new lr(s);this.size=l.size}function vy(){this.__data__=new lr,this.size=0}function yy(s){var l=this.__data__,f=l.delete(s);return this.size=l.size,f}function by(s){return this.__data__.get(s)}function Dy(s){return this.__data__.has(s)}function xy(s,l){var f=this.__data__;if(f instanceof lr){var p=f.__data__;if(!Hs||p.length<i-1)return p.push([s,l]),this.size=++f.size,this;f=this.__data__=new ur(p)}return f.set(s,l),this.size=f.size,this}Sn.prototype.clear=vy,Sn.prototype.delete=yy,Sn.prototype.get=by,Sn.prototype.has=Dy,Sn.prototype.set=xy;function Ld(s,l){var f=oe(s),p=!f&&ui(s),v=!f&&!p&&Nr(s),D=!f&&!p&&!v&&Ji(s),C=f||p||v||D,A=C?Ql(s.length,M1):[],k=A.length;for(var R in s)(l||ke.call(s,R))&&!(C&&(R=="length"||v&&(R=="offset"||R=="parent")||D&&(R=="buffer"||R=="byteLength"||R=="byteOffset")||hr(R,k)))&&A.push(R);return A}function zd(s){var l=s.length;return l?s[gu(0,l-1)]:t}function wy(s,l){return va(Ft(s),si(l,0,s.length))}function Cy(s){return va(Ft(s))}function ou(s,l,f){(f!==t&&!kn(s[l],f)||f===t&&!(l in s))&&cr(s,l,f)}function qs(s,l,f){var p=s[l];(!(ke.call(s,l)&&kn(p,f))||f===t&&!(l in s))&&cr(s,l,f)}function ia(s,l){for(var f=s.length;f--;)if(kn(s[f][0],l))return f;return-1}function Ey(s,l,f,p){return Or(s,function(v,D,C){l(p,v,f(v),C)}),p}function $d(s,l){return s&&Wn(l,nt(l),s)}function Ay(s,l){return s&&Wn(l,Rt(l),s)}function cr(s,l,f){l=="__proto__"&&Zo?Zo(s,l,{configurable:!0,enumerable:!0,value:f,writable:!0}):s[l]=f}function au(s,l){for(var f=-1,p=l.length,v=T(p),D=s==null;++f<p;)v[f]=D?t:Hu(s,l[f]);return v}function si(s,l,f){return s===s&&(f!==t&&(s=s<=f?s:f),l!==t&&(s=s>=l?s:l)),s}function cn(s,l,f,p,v,D){var C,A=l&m,k=l&g,R=l&y;if(f&&(C=v?f(s,p,v,D):f(s)),C!==t)return C;if(!Ue(s))return s;var B=oe(s);if(B){if(C=hb(s),!A)return Ft(s,C)}else{var I=mt(s),U=I==sr||I==Cr;if(Nr(s))return ch(s,A);if(I==wt||I==tt||U&&!v){if(C=k||U?{}:Oh(s),!A)return k?nb(s,Ay(C,s)):tb(s,$d(C,s))}else{if(!ze[I])return v?s:{};C=pb(s,I,A)}}D||(D=new Sn);var X=D.get(s);if(X)return X;D.set(s,C),ip(s)?s.forEach(function(re){C.add(cn(re,l,f,re,s,D))}):np(s)&&s.forEach(function(re,de){C.set(de,cn(re,l,f,de,s,D))});var ne=R?k?Su:_u:k?Rt:nt,le=B?t:ne(s);return an(le||s,function(re,de){le&&(de=re,re=s[de]),qs(C,de,cn(re,l,f,de,s,D))}),C}function _y(s){var l=nt(s);return function(f){return Hd(f,s,l)}}function Hd(s,l,f){var p=f.length;if(s==null)return!p;for(s=Be(s);p--;){var v=f[p],D=l[v],C=s[v];if(C===t&&!(v in s)||!D(C))return!1}return!0}function Vd(s,l,f){if(typeof s!="function")throw new ln(a);return Zs(function(){s.apply(t,f)},l)}function Ks(s,l,f,p){var v=-1,D=Ho,C=!0,A=s.length,k=[],R=l.length;if(!A)return k;f&&(l=We(l,Ut(f))),p?(D=jl,C=!1):l.length>=i&&(D=zs,C=!1,l=new ii(l));e:for(;++v<A;){var B=s[v],I=f==null?B:f(B);if(B=p||B!==0?B:0,C&&I===I){for(var U=R;U--;)if(l[U]===I)continue e;k.push(B)}else D(l,I,p)||k.push(B)}return k}var Or=mh(Vn),Wd=mh(uu,!0);function Sy(s,l){var f=!0;return Or(s,function(p,v,D){return f=!!l(p,v,D),f}),f}function sa(s,l,f){for(var p=-1,v=s.length;++p<v;){var D=s[p],C=l(D);if(C!=null&&(A===t?C===C&&!Kt(C):f(C,A)))var A=C,k=D}return k}function ky(s,l,f,p){var v=s.length;for(f=ae(f),f<0&&(f=-f>v?0:v+f),p=p===t||p>v?v:ae(p),p<0&&(p+=v),p=f>p?0:op(p);f<p;)s[f++]=l;return s}function Ud(s,l){var f=[];return Or(s,function(p,v,D){l(p,v,D)&&f.push(p)}),f}function lt(s,l,f,p,v){var D=-1,C=s.length;for(f||(f=gb),v||(v=[]);++D<C;){var A=s[D];l>0&&f(A)?l>1?lt(A,l-1,f,p,v):_r(v,A):p||(v[v.length]=A)}return v}var lu=gh(),qd=gh(!0);function Vn(s,l){return s&&lu(s,l,nt)}function uu(s,l){return s&&qd(s,l,nt)}function oa(s,l){return Ar(l,function(f){return pr(s[f])})}function oi(s,l){l=Mr(l,s);for(var f=0,p=l.length;s!=null&&f<p;)s=s[Un(l[f++])];return f&&f==p?s:t}function Kd(s,l,f){var p=l(s);return oe(s)?p:_r(p,f(s))}function Et(s){return s==null?s===t?ei:Zr:ni&&ni in Be(s)?cb(s):Cb(s)}function cu(s,l){return s>l}function Oy(s,l){return s!=null&&ke.call(s,l)}function Ty(s,l){return s!=null&&l in Be(s)}function My(s,l,f){return s>=pt(l,f)&&s<et(l,f)}function fu(s,l,f){for(var p=f?jl:Ho,v=s[0].length,D=s.length,C=D,A=T(D),k=1/0,R=[];C--;){var B=s[C];C&&l&&(B=We(B,Ut(l))),k=pt(B.length,k),A[C]=!f&&(l||v>=120&&B.length>=120)?new ii(C&&B):t}B=s[0];var I=-1,U=A[0];e:for(;++I<v&&R.length<k;){var X=B[I],ne=l?l(X):X;if(X=f||X!==0?X:0,!(U?zs(U,ne):p(R,ne,f))){for(C=D;--C;){var le=A[C];if(!(le?zs(le,ne):p(s[C],ne,f)))continue e}U&&U.push(ne),R.push(X)}}return R}function Fy(s,l,f,p){return Vn(s,function(v,D,C){l(p,f(v),D,C)}),p}function js(s,l,f){l=Mr(l,s),s=Nh(s,l);var p=s==null?s:s[Un(dn(l))];return p==null?t:Wt(p,s,f)}function jd(s){return je(s)&&Et(s)==tt}function Ny(s){return je(s)&&Et(s)==Hn}function Ry(s){return je(s)&&Et(s)==rn}function Js(s,l,f,p,v){return s===l?!0:s==null||l==null||!je(s)&&!je(l)?s!==s&&l!==l:By(s,l,f,p,Js,v)}function By(s,l,f,p,v,D){var C=oe(s),A=oe(l),k=C?Tt:mt(s),R=A?Tt:mt(l);k=k==tt?wt:k,R=R==tt?wt:R;var B=k==wt,I=R==wt,U=k==R;if(U&&Nr(s)){if(!Nr(l))return!1;C=!0,B=!1}if(U&&!B)return D||(D=new Sn),C||Ji(s)?_h(s,l,f,p,v,D):lb(s,l,k,f,p,v,D);if(!(f&x)){var X=B&&ke.call(s,"__wrapped__"),ne=I&&ke.call(l,"__wrapped__");if(X||ne){var le=X?s.value():s,re=ne?l.value():l;return D||(D=new Sn),v(le,re,f,p,D)}}return U?(D||(D=new Sn),ub(s,l,f,p,v,D)):!1}function Iy(s){return je(s)&&mt(s)==ht}function du(s,l,f,p){var v=f.length,D=v,C=!p;if(s==null)return!D;for(s=Be(s);v--;){var A=f[v];if(C&&A[2]?A[1]!==s[A[0]]:!(A[0]in s))return!1}for(;++v<D;){A=f[v];var k=A[0],R=s[k],B=A[1];if(C&&A[2]){if(R===t&&!(k in s))return!1}else{var I=new Sn;if(p)var U=p(R,B,k,s,l,I);if(!(U===t?Js(B,R,x|w,p,I):U))return!1}}return!0}function Jd(s){if(!Ue(s)||yb(s))return!1;var l=pr(s)?I1:_v;return l.test(li(s))}function Py(s){return je(s)&&Et(s)==Ct}function Ly(s){return je(s)&&mt(s)==Xe}function zy(s){return je(s)&&Ca(s.length)&&!!He[Et(s)]}function Gd(s){return typeof s=="function"?s:s==null?Bt:typeof s=="object"?oe(s)?Zd(s[0],s[1]):Xd(s):vp(s)}function hu(s){if(!Xs(s))return V1(s);var l=[];for(var f in Be(s))ke.call(s,f)&&f!="constructor"&&l.push(f);return l}function $y(s){if(!Ue(s))return wb(s);var l=Xs(s),f=[];for(var p in s)p=="constructor"&&(l||!ke.call(s,p))||f.push(p);return f}function pu(s,l){return s<l}function Yd(s,l){var f=-1,p=Nt(s)?T(s.length):[];return Or(s,function(v,D,C){p[++f]=l(v,D,C)}),p}function Xd(s){var l=Ou(s);return l.length==1&&l[0][2]?Mh(l[0][0],l[0][1]):function(f){return f===s||du(f,s,l)}}function Zd(s,l){return Mu(s)&&Th(l)?Mh(Un(s),l):function(f){var p=Hu(f,s);return p===t&&p===l?Vu(f,s):Js(l,p,x|w)}}function aa(s,l,f,p,v){s!==l&&lu(l,function(D,C){if(v||(v=new Sn),Ue(D))Hy(s,l,C,f,aa,p,v);else{var A=p?p(Nu(s,C),D,C+"",s,l,v):t;A===t&&(A=D),ou(s,C,A)}},Rt)}function Hy(s,l,f,p,v,D,C){var A=Nu(s,f),k=Nu(l,f),R=C.get(k);if(R){ou(s,f,R);return}var B=D?D(A,k,f+"",s,l,C):t,I=B===t;if(I){var U=oe(k),X=!U&&Nr(k),ne=!U&&!X&&Ji(k);B=k,U||X||ne?oe(A)?B=A:Ge(A)?B=Ft(A):X?(I=!1,B=ch(k,!0)):ne?(I=!1,B=fh(k,!0)):B=[]:Qs(k)||ui(k)?(B=A,ui(A)?B=ap(A):(!Ue(A)||pr(A))&&(B=Oh(k))):I=!1}I&&(C.set(k,B),v(B,k,p,D,C),C.delete(k)),ou(s,f,B)}function Qd(s,l){var f=s.length;if(!!f)return l+=l<0?f:0,hr(l,f)?s[l]:t}function eh(s,l,f){l.length?l=We(l,function(D){return oe(D)?function(C){return oi(C,D.length===1?D[0]:D)}:D}):l=[Bt];var p=-1;l=We(l,Ut(Q()));var v=Yd(s,function(D,C,A){var k=We(l,function(R){return R(D)});return{criteria:k,index:++p,value:D}});return p1(v,function(D,C){return eb(D,C,f)})}function Vy(s,l){return th(s,l,function(f,p){return Vu(s,p)})}function th(s,l,f){for(var p=-1,v=l.length,D={};++p<v;){var C=l[p],A=oi(s,C);f(A,C)&&Gs(D,Mr(C,s),A)}return D}function Wy(s){return function(l){return oi(l,s)}}function mu(s,l,f,p){var v=p?h1:Pi,D=-1,C=l.length,A=s;for(s===l&&(l=Ft(l)),f&&(A=We(s,Ut(f)));++D<C;)for(var k=0,R=l[D],B=f?f(R):R;(k=v(A,B,k,p))>-1;)A!==s&&Xo.call(A,k,1),Xo.call(s,k,1);return s}function nh(s,l){for(var f=s?l.length:0,p=f-1;f--;){var v=l[f];if(f==p||v!==D){var D=v;hr(v)?Xo.call(s,v,1):bu(s,v)}}return s}function gu(s,l){return s+ea(Id()*(l-s+1))}function Uy(s,l,f,p){for(var v=-1,D=et(Qo((l-s)/(f||1)),0),C=T(D);D--;)C[p?D:++v]=s,s+=f;return C}function vu(s,l){var f="";if(!s||l<1||l>Me)return f;do l%2&&(f+=s),l=ea(l/2),l&&(s+=s);while(l);return f}function ce(s,l){return Ru(Fh(s,l,Bt),s+"")}function qy(s){return zd(Gi(s))}function Ky(s,l){var f=Gi(s);return va(f,si(l,0,f.length))}function Gs(s,l,f,p){if(!Ue(s))return s;l=Mr(l,s);for(var v=-1,D=l.length,C=D-1,A=s;A!=null&&++v<D;){var k=Un(l[v]),R=f;if(k==="__proto__"||k==="constructor"||k==="prototype")return s;if(v!=C){var B=A[k];R=p?p(B,k,A):t,R===t&&(R=Ue(B)?B:hr(l[v+1])?[]:{})}qs(A,k,R),A=A[k]}return s}var rh=ta?function(s,l){return ta.set(s,l),s}:Bt,jy=Zo?function(s,l){return Zo(s,"toString",{configurable:!0,enumerable:!1,value:Uu(l),writable:!0})}:Bt;function Jy(s){return va(Gi(s))}function fn(s,l,f){var p=-1,v=s.length;l<0&&(l=-l>v?0:v+l),f=f>v?v:f,f<0&&(f+=v),v=l>f?0:f-l>>>0,l>>>=0;for(var D=T(v);++p<v;)D[p]=s[p+l];return D}function Gy(s,l){var f;return Or(s,function(p,v,D){return f=l(p,v,D),!f}),!!f}function la(s,l,f){var p=0,v=s==null?p:s.length;if(typeof l=="number"&&l===l&&v<=ir){for(;p<v;){var D=p+v>>>1,C=s[D];C!==null&&!Kt(C)&&(f?C<=l:C<l)?p=D+1:v=D}return v}return yu(s,l,Bt,f)}function yu(s,l,f,p){var v=0,D=s==null?0:s.length;if(D===0)return 0;l=f(l);for(var C=l!==l,A=l===null,k=Kt(l),R=l===t;v<D;){var B=ea((v+D)/2),I=f(s[B]),U=I!==t,X=I===null,ne=I===I,le=Kt(I);if(C)var re=p||ne;else R?re=ne&&(p||U):A?re=ne&&U&&(p||!X):k?re=ne&&U&&!X&&(p||!le):X||le?re=!1:re=p?I<=l:I<l;re?v=B+1:D=B}return pt(D,nn)}function ih(s,l){for(var f=-1,p=s.length,v=0,D=[];++f<p;){var C=s[f],A=l?l(C):C;if(!f||!kn(A,k)){var k=A;D[v++]=C===0?0:C}}return D}function sh(s){return typeof s=="number"?s:Kt(s)?Ce:+s}function qt(s){if(typeof s=="string")return s;if(oe(s))return We(s,qt)+"";if(Kt(s))return Pd?Pd.call(s):"";var l=s+"";return l=="0"&&1/s==-Re?"-0":l}function Tr(s,l,f){var p=-1,v=Ho,D=s.length,C=!0,A=[],k=A;if(f)C=!1,v=jl;else if(D>=i){var R=l?null:ob(s);if(R)return Wo(R);C=!1,v=zs,k=new ii}else k=l?[]:A;e:for(;++p<D;){var B=s[p],I=l?l(B):B;if(B=f||B!==0?B:0,C&&I===I){for(var U=k.length;U--;)if(k[U]===I)continue e;l&&k.push(I),A.push(B)}else v(k,I,f)||(k!==A&&k.push(I),A.push(B))}return A}function bu(s,l){return l=Mr(l,s),s=Nh(s,l),s==null||delete s[Un(dn(l))]}function oh(s,l,f,p){return Gs(s,l,f(oi(s,l)),p)}function ua(s,l,f,p){for(var v=s.length,D=p?v:-1;(p?D--:++D<v)&&l(s[D],D,s););return f?fn(s,p?0:D,p?D+1:v):fn(s,p?D+1:0,p?v:D)}function ah(s,l){var f=s;return f instanceof me&&(f=f.value()),Jl(l,function(p,v){return v.func.apply(v.thisArg,_r([p],v.args))},f)}function Du(s,l,f){var p=s.length;if(p<2)return p?Tr(s[0]):[];for(var v=-1,D=T(p);++v<p;)for(var C=s[v],A=-1;++A<p;)A!=v&&(D[v]=Ks(D[v]||C,s[A],l,f));return Tr(lt(D,1),l,f)}function lh(s,l,f){for(var p=-1,v=s.length,D=l.length,C={};++p<v;){var A=p<D?l[p]:t;f(C,s[p],A)}return C}function xu(s){return Ge(s)?s:[]}function wu(s){return typeof s=="function"?s:Bt}function Mr(s,l){return oe(s)?s:Mu(s,l)?[s]:Ph(_e(s))}var Yy=ce;function Fr(s,l,f){var p=s.length;return f=f===t?p:f,!l&&f>=p?s:fn(s,l,f)}var uh=P1||function(s){return at.clearTimeout(s)};function ch(s,l){if(l)return s.slice();var f=s.length,p=Md?Md(f):new s.constructor(f);return s.copy(p),p}function Cu(s){var l=new s.constructor(s.byteLength);return new Go(l).set(new Go(s)),l}function Xy(s,l){var f=l?Cu(s.buffer):s.buffer;return new s.constructor(f,s.byteOffset,s.byteLength)}function Zy(s){var l=new s.constructor(s.source,jf.exec(s));return l.lastIndex=s.lastIndex,l}function Qy(s){return Us?Be(Us.call(s)):{}}function fh(s,l){var f=l?Cu(s.buffer):s.buffer;return new s.constructor(f,s.byteOffset,s.length)}function dh(s,l){if(s!==l){var f=s!==t,p=s===null,v=s===s,D=Kt(s),C=l!==t,A=l===null,k=l===l,R=Kt(l);if(!A&&!R&&!D&&s>l||D&&C&&k&&!A&&!R||p&&C&&k||!f&&k||!v)return 1;if(!p&&!D&&!R&&s<l||R&&f&&v&&!p&&!D||A&&f&&v||!C&&v||!k)return-1}return 0}function eb(s,l,f){for(var p=-1,v=s.criteria,D=l.criteria,C=v.length,A=f.length;++p<C;){var k=dh(v[p],D[p]);if(k){if(p>=A)return k;var R=f[p];return k*(R=="desc"?-1:1)}}return s.index-l.index}function hh(s,l,f,p){for(var v=-1,D=s.length,C=f.length,A=-1,k=l.length,R=et(D-C,0),B=T(k+R),I=!p;++A<k;)B[A]=l[A];for(;++v<C;)(I||v<D)&&(B[f[v]]=s[v]);for(;R--;)B[A++]=s[v++];return B}function ph(s,l,f,p){for(var v=-1,D=s.length,C=-1,A=f.length,k=-1,R=l.length,B=et(D-A,0),I=T(B+R),U=!p;++v<B;)I[v]=s[v];for(var X=v;++k<R;)I[X+k]=l[k];for(;++C<A;)(U||v<D)&&(I[X+f[C]]=s[v++]);return I}function Ft(s,l){var f=-1,p=s.length;for(l||(l=T(p));++f<p;)l[f]=s[f];return l}function Wn(s,l,f,p){var v=!f;f||(f={});for(var D=-1,C=l.length;++D<C;){var A=l[D],k=p?p(f[A],s[A],A,f,s):t;k===t&&(k=s[A]),v?cr(f,A,k):qs(f,A,k)}return f}function tb(s,l){return Wn(s,Tu(s),l)}function nb(s,l){return Wn(s,Sh(s),l)}function ca(s,l){return function(f,p){var v=oe(f)?a1:Ey,D=l?l():{};return v(f,s,Q(p,2),D)}}function qi(s){return ce(function(l,f){var p=-1,v=f.length,D=v>1?f[v-1]:t,C=v>2?f[2]:t;for(D=s.length>3&&typeof D=="function"?(v--,D):t,C&&At(f[0],f[1],C)&&(D=v<3?t:D,v=1),l=Be(l);++p<v;){var A=f[p];A&&s(l,A,p,D)}return l})}function mh(s,l){return function(f,p){if(f==null)return f;if(!Nt(f))return s(f,p);for(var v=f.length,D=l?v:-1,C=Be(f);(l?D--:++D<v)&&p(C[D],D,C)!==!1;);return f}}function gh(s){return function(l,f,p){for(var v=-1,D=Be(l),C=p(l),A=C.length;A--;){var k=C[s?A:++v];if(f(D[k],k,D)===!1)break}return l}}function rb(s,l,f){var p=l&_,v=Ys(s);function D(){var C=this&&this!==at&&this instanceof D?v:s;return C.apply(p?f:this,arguments)}return D}function vh(s){return function(l){l=_e(l);var f=Li(l)?_n(l):t,p=f?f[0]:l.charAt(0),v=f?Fr(f,1).join(""):l.slice(1);return p[s]()+v}}function Ki(s){return function(l){return Jl(mp(pp(l).replace(jv,"")),s,"")}}function Ys(s){return function(){var l=arguments;switch(l.length){case 0:return new s;case 1:return new s(l[0]);case 2:return new s(l[0],l[1]);case 3:return new s(l[0],l[1],l[2]);case 4:return new s(l[0],l[1],l[2],l[3]);case 5:return new s(l[0],l[1],l[2],l[3],l[4]);case 6:return new s(l[0],l[1],l[2],l[3],l[4],l[5]);case 7:return new s(l[0],l[1],l[2],l[3],l[4],l[5],l[6])}var f=Ui(s.prototype),p=s.apply(f,l);return Ue(p)?p:f}}function ib(s,l,f){var p=Ys(s);function v(){for(var D=arguments.length,C=T(D),A=D,k=ji(v);A--;)C[A]=arguments[A];var R=D<3&&C[0]!==k&&C[D-1]!==k?[]:Sr(C,k);if(D-=R.length,D<f)return wh(s,l,fa,v.placeholder,t,C,R,t,t,f-D);var B=this&&this!==at&&this instanceof v?p:s;return Wt(B,this,C)}return v}function yh(s){return function(l,f,p){var v=Be(l);if(!Nt(l)){var D=Q(f,3);l=nt(l),f=function(A){return D(v[A],A,v)}}var C=s(l,f,p);return C>-1?v[D?l[C]:C]:t}}function bh(s){return dr(function(l){var f=l.length,p=f,v=un.prototype.thru;for(s&&l.reverse();p--;){var D=l[p];if(typeof D!="function")throw new ln(a);if(v&&!C&&ma(D)=="wrapper")var C=new un([],!0)}for(p=C?p:f;++p<f;){D=l[p];var A=ma(D),k=A=="wrapper"?ku(D):t;k&&Fu(k[0])&&k[1]==(K|z|q|H)&&!k[4].length&&k[9]==1?C=C[ma(k[0])].apply(C,k[3]):C=D.length==1&&Fu(D)?C[A]():C.thru(D)}return function(){var R=arguments,B=R[0];if(C&&R.length==1&&oe(B))return C.plant(B).value();for(var I=0,U=f?l[I].apply(this,R):B;++I<f;)U=l[I].call(this,U);return U}})}function fa(s,l,f,p,v,D,C,A,k,R){var B=l&K,I=l&_,U=l&O,X=l&(z|E),ne=l&fe,le=U?t:Ys(s);function re(){for(var de=arguments.length,ve=T(de),jt=de;jt--;)ve[jt]=arguments[jt];if(X)var _t=ji(re),Jt=g1(ve,_t);if(p&&(ve=hh(ve,p,v,X)),D&&(ve=ph(ve,D,C,X)),de-=Jt,X&&de<R){var Ye=Sr(ve,_t);return wh(s,l,fa,re.placeholder,f,ve,Ye,A,k,R-de)}var On=I?f:this,gr=U?On[s]:s;return de=ve.length,A?ve=Eb(ve,A):ne&&de>1&&ve.reverse(),B&&k<de&&(ve.length=k),this&&this!==at&&this instanceof re&&(gr=le||Ys(gr)),gr.apply(On,ve)}return re}function Dh(s,l){return function(f,p){return Fy(f,s,l(p),{})}}function da(s,l){return function(f,p){var v;if(f===t&&p===t)return l;if(f!==t&&(v=f),p!==t){if(v===t)return p;typeof f=="string"||typeof p=="string"?(f=qt(f),p=qt(p)):(f=sh(f),p=sh(p)),v=s(f,p)}return v}}function Eu(s){return dr(function(l){return l=We(l,Ut(Q())),ce(function(f){var p=this;return s(l,function(v){return Wt(v,p,f)})})})}function ha(s,l){l=l===t?" ":qt(l);var f=l.length;if(f<2)return f?vu(l,s):l;var p=vu(l,Qo(s/zi(l)));return Li(l)?Fr(_n(p),0,s).join(""):p.slice(0,s)}function sb(s,l,f,p){var v=l&_,D=Ys(s);function C(){for(var A=-1,k=arguments.length,R=-1,B=p.length,I=T(B+k),U=this&&this!==at&&this instanceof C?D:s;++R<B;)I[R]=p[R];for(;k--;)I[R++]=arguments[++A];return Wt(U,v?f:this,I)}return C}function xh(s){return function(l,f,p){return p&&typeof p!="number"&&At(l,f,p)&&(f=p=t),l=mr(l),f===t?(f=l,l=0):f=mr(f),p=p===t?l<f?1:-1:mr(p),Uy(l,f,p,s)}}function pa(s){return function(l,f){return typeof l=="string"&&typeof f=="string"||(l=hn(l),f=hn(f)),s(l,f)}}function wh(s,l,f,p,v,D,C,A,k,R){var B=l&z,I=B?C:t,U=B?t:C,X=B?D:t,ne=B?t:D;l|=B?q:$,l&=~(B?$:q),l&P||(l&=~(_|O));var le=[s,l,v,X,I,ne,U,A,k,R],re=f.apply(t,le);return Fu(s)&&Rh(re,le),re.placeholder=p,Bh(re,s,l)}function Au(s){var l=Qe[s];return function(f,p){if(f=hn(f),p=p==null?0:pt(ae(p),292),p&&Bd(f)){var v=(_e(f)+"e").split("e"),D=l(v[0]+"e"+(+v[1]+p));return v=(_e(D)+"e").split("e"),+(v[0]+"e"+(+v[1]-p))}return l(f)}}var ob=Vi&&1/Wo(new Vi([,-0]))[1]==Re?function(s){return new Vi(s)}:ju;function Ch(s){return function(l){var f=mt(l);return f==ht?tu(l):f==Xe?C1(l):m1(l,s(l))}}function fr(s,l,f,p,v,D,C,A){var k=l&O;if(!k&&typeof s!="function")throw new ln(a);var R=p?p.length:0;if(R||(l&=~(q|$),p=v=t),C=C===t?C:et(ae(C),0),A=A===t?A:ae(A),R-=v?v.length:0,l&$){var B=p,I=v;p=v=t}var U=k?t:ku(s),X=[s,l,f,p,v,B,I,D,C,A];if(U&&xb(X,U),s=X[0],l=X[1],f=X[2],p=X[3],v=X[4],A=X[9]=X[9]===t?k?0:s.length:et(X[9]-R,0),!A&&l&(z|E)&&(l&=~(z|E)),!l||l==_)var ne=rb(s,l,f);else l==z||l==E?ne=ib(s,l,A):(l==q||l==(_|q))&&!v.length?ne=sb(s,l,f,p):ne=fa.apply(t,X);var le=U?rh:Rh;return Bh(le(ne,X),s,l)}function Eh(s,l,f,p){return s===t||kn(s,Hi[f])&&!ke.call(p,f)?l:s}function Ah(s,l,f,p,v,D){return Ue(s)&&Ue(l)&&(D.set(l,s),aa(s,l,t,Ah,D),D.delete(l)),s}function ab(s){return Qs(s)?t:s}function _h(s,l,f,p,v,D){var C=f&x,A=s.length,k=l.length;if(A!=k&&!(C&&k>A))return!1;var R=D.get(s),B=D.get(l);if(R&&B)return R==l&&B==s;var I=-1,U=!0,X=f&w?new ii:t;for(D.set(s,l),D.set(l,s);++I<A;){var ne=s[I],le=l[I];if(p)var re=C?p(le,ne,I,l,s,D):p(ne,le,I,s,l,D);if(re!==t){if(re)continue;U=!1;break}if(X){if(!Gl(l,function(de,ve){if(!zs(X,ve)&&(ne===de||v(ne,de,f,p,D)))return X.push(ve)})){U=!1;break}}else if(!(ne===le||v(ne,le,f,p,D))){U=!1;break}}return D.delete(s),D.delete(l),U}function lb(s,l,f,p,v,D,C){switch(f){case An:if(s.byteLength!=l.byteLength||s.byteOffset!=l.byteOffset)return!1;s=s.buffer,l=l.buffer;case Hn:return!(s.byteLength!=l.byteLength||!D(new Go(s),new Go(l)));case xt:case rn:case zn:return kn(+s,+l);case Cn:return s.name==l.name&&s.message==l.message;case Ct:case En:return s==l+"";case ht:var A=tu;case Xe:var k=p&x;if(A||(A=Wo),s.size!=l.size&&!k)return!1;var R=C.get(s);if(R)return R==l;p|=w,C.set(s,l);var B=_h(A(s),A(l),p,v,D,C);return C.delete(s),B;case sn:if(Us)return Us.call(s)==Us.call(l)}return!1}function ub(s,l,f,p,v,D){var C=f&x,A=_u(s),k=A.length,R=_u(l),B=R.length;if(k!=B&&!C)return!1;for(var I=k;I--;){var U=A[I];if(!(C?U in l:ke.call(l,U)))return!1}var X=D.get(s),ne=D.get(l);if(X&&ne)return X==l&&ne==s;var le=!0;D.set(s,l),D.set(l,s);for(var re=C;++I<k;){U=A[I];var de=s[U],ve=l[U];if(p)var jt=C?p(ve,de,U,l,s,D):p(de,ve,U,s,l,D);if(!(jt===t?de===ve||v(de,ve,f,p,D):jt)){le=!1;break}re||(re=U=="constructor")}if(le&&!re){var _t=s.constructor,Jt=l.constructor;_t!=Jt&&"constructor"in s&&"constructor"in l&&!(typeof _t=="function"&&_t instanceof _t&&typeof Jt=="function"&&Jt instanceof Jt)&&(le=!1)}return D.delete(s),D.delete(l),le}function dr(s){return Ru(Fh(s,t,Hh),s+"")}function _u(s){return Kd(s,nt,Tu)}function Su(s){return Kd(s,Rt,Sh)}var ku=ta?function(s){return ta.get(s)}:ju;function ma(s){for(var l=s.name+"",f=Wi[l],p=ke.call(Wi,l)?f.length:0;p--;){var v=f[p],D=v.func;if(D==null||D==s)return v.name}return l}function ji(s){var l=ke.call(b,"placeholder")?b:s;return l.placeholder}function Q(){var s=b.iteratee||qu;return s=s===qu?Gd:s,arguments.length?s(arguments[0],arguments[1]):s}function ga(s,l){var f=s.__data__;return vb(l)?f[typeof l=="string"?"string":"hash"]:f.map}function Ou(s){for(var l=nt(s),f=l.length;f--;){var p=l[f],v=s[p];l[f]=[p,v,Th(v)]}return l}function ai(s,l){var f=D1(s,l);return Jd(f)?f:t}function cb(s){var l=ke.call(s,ni),f=s[ni];try{s[ni]=t;var p=!0}catch{}var v=jo.call(s);return p&&(l?s[ni]=f:delete s[ni]),v}var Tu=ru?function(s){return s==null?[]:(s=Be(s),Ar(ru(s),function(l){return Nd.call(s,l)}))}:Ju,Sh=ru?function(s){for(var l=[];s;)_r(l,Tu(s)),s=Yo(s);return l}:Ju,mt=Et;(iu&&mt(new iu(new ArrayBuffer(1)))!=An||Hs&&mt(new Hs)!=ht||su&&mt(su.resolve())!=Qr||Vi&&mt(new Vi)!=Xe||Vs&&mt(new Vs)!=$n)&&(mt=function(s){var l=Et(s),f=l==wt?s.constructor:t,p=f?li(f):"";if(p)switch(p){case K1:return An;case j1:return ht;case J1:return Qr;case G1:return Xe;case Y1:return $n}return l});function fb(s,l,f){for(var p=-1,v=f.length;++p<v;){var D=f[p],C=D.size;switch(D.type){case"drop":s+=C;break;case"dropRight":l-=C;break;case"take":l=pt(l,s+C);break;case"takeRight":s=et(s,l-C);break}}return{start:s,end:l}}function db(s){var l=s.match(yv);return l?l[1].split(bv):[]}function kh(s,l,f){l=Mr(l,s);for(var p=-1,v=l.length,D=!1;++p<v;){var C=Un(l[p]);if(!(D=s!=null&&f(s,C)))break;s=s[C]}return D||++p!=v?D:(v=s==null?0:s.length,!!v&&Ca(v)&&hr(C,v)&&(oe(s)||ui(s)))}function hb(s){var l=s.length,f=new s.constructor(l);return l&&typeof s[0]=="string"&&ke.call(s,"index")&&(f.index=s.index,f.input=s.input),f}function Oh(s){return typeof s.constructor=="function"&&!Xs(s)?Ui(Yo(s)):{}}function pb(s,l,f){var p=s.constructor;switch(l){case Hn:return Cu(s);case xt:case rn:return new p(+s);case An:return Xy(s,f);case Ms:case Fs:case Ns:case Rs:case Bs:case F:case J:case te:case De:return fh(s,f);case ht:return new p;case zn:case En:return new p(s);case Ct:return Zy(s);case Xe:return new p;case sn:return Qy(s)}}function mb(s,l){var f=l.length;if(!f)return s;var p=f-1;return l[p]=(f>1?"& ":"")+l[p],l=l.join(f>2?", ":" "),s.replace(vv,`{
/* [wrapped with `+l+`] */
`)}function gb(s){return oe(s)||ui(s)||!!(Rd&&s&&s[Rd])}function hr(s,l){var f=typeof s;return l=l==null?Me:l,!!l&&(f=="number"||f!="symbol"&&kv.test(s))&&s>-1&&s%1==0&&s<l}function At(s,l,f){if(!Ue(f))return!1;var p=typeof l;return(p=="number"?Nt(f)&&hr(l,f.length):p=="string"&&l in f)?kn(f[l],s):!1}function Mu(s,l){if(oe(s))return!1;var f=typeof s;return f=="number"||f=="symbol"||f=="boolean"||s==null||Kt(s)?!0:Bi.test(s)||!Ls.test(s)||l!=null&&s in Be(l)}function vb(s){var l=typeof s;return l=="string"||l=="number"||l=="symbol"||l=="boolean"?s!=="__proto__":s===null}function Fu(s){var l=ma(s),f=b[l];if(typeof f!="function"||!(l in me.prototype))return!1;if(s===f)return!0;var p=ku(f);return!!p&&s===p[0]}function yb(s){return!!Td&&Td in s}var bb=qo?pr:Gu;function Xs(s){var l=s&&s.constructor,f=typeof l=="function"&&l.prototype||Hi;return s===f}function Th(s){return s===s&&!Ue(s)}function Mh(s,l){return function(f){return f==null?!1:f[s]===l&&(l!==t||s in Be(f))}}function Db(s){var l=xa(s,function(p){return f.size===h&&f.clear(),p}),f=l.cache;return l}function xb(s,l){var f=s[1],p=l[1],v=f|p,D=v<(_|O|K),C=p==K&&f==z||p==K&&f==H&&s[7].length<=l[8]||p==(K|H)&&l[7].length<=l[8]&&f==z;if(!(D||C))return s;p&_&&(s[2]=l[2],v|=f&_?0:P);var A=l[3];if(A){var k=s[3];s[3]=k?hh(k,A,l[4]):A,s[4]=k?Sr(s[3],d):l[4]}return A=l[5],A&&(k=s[5],s[5]=k?ph(k,A,l[6]):A,s[6]=k?Sr(s[5],d):l[6]),A=l[7],A&&(s[7]=A),p&K&&(s[8]=s[8]==null?l[8]:pt(s[8],l[8])),s[9]==null&&(s[9]=l[9]),s[0]=l[0],s[1]=v,s}function wb(s){var l=[];if(s!=null)for(var f in Be(s))l.push(f);return l}function Cb(s){return jo.call(s)}function Fh(s,l,f){return l=et(l===t?s.length-1:l,0),function(){for(var p=arguments,v=-1,D=et(p.length-l,0),C=T(D);++v<D;)C[v]=p[l+v];v=-1;for(var A=T(l+1);++v<l;)A[v]=p[v];return A[l]=f(C),Wt(s,this,A)}}function Nh(s,l){return l.length<2?s:oi(s,fn(l,0,-1))}function Eb(s,l){for(var f=s.length,p=pt(l.length,f),v=Ft(s);p--;){var D=l[p];s[p]=hr(D,f)?v[D]:t}return s}function Nu(s,l){if(!(l==="constructor"&&typeof s[l]=="function")&&l!="__proto__")return s[l]}var Rh=Ih(rh),Zs=z1||function(s,l){return at.setTimeout(s,l)},Ru=Ih(jy);function Bh(s,l,f){var p=l+"";return Ru(s,mb(p,Ab(db(p),f)))}function Ih(s){var l=0,f=0;return function(){var p=W1(),v=we-(p-f);if(f=p,v>0){if(++l>=Pe)return arguments[0]}else l=0;return s.apply(t,arguments)}}function va(s,l){var f=-1,p=s.length,v=p-1;for(l=l===t?p:l;++f<l;){var D=gu(f,v),C=s[D];s[D]=s[f],s[f]=C}return s.length=l,s}var Ph=Db(function(s){var l=[];return s.charCodeAt(0)===46&&l.push(""),s.replace(pv,function(f,p,v,D){l.push(v?D.replace(wv,"$1"):p||f)}),l});function Un(s){if(typeof s=="string"||Kt(s))return s;var l=s+"";return l=="0"&&1/s==-Re?"-0":l}function li(s){if(s!=null){try{return Ko.call(s)}catch{}try{return s+""}catch{}}return""}function Ab(s,l){return an(wn,function(f){var p="_."+f[0];l&f[1]&&!Ho(s,p)&&s.push(p)}),s.sort()}function Lh(s){if(s instanceof me)return s.clone();var l=new un(s.__wrapped__,s.__chain__);return l.__actions__=Ft(s.__actions__),l.__index__=s.__index__,l.__values__=s.__values__,l}function _b(s,l,f){(f?At(s,l,f):l===t)?l=1:l=et(ae(l),0);var p=s==null?0:s.length;if(!p||l<1)return[];for(var v=0,D=0,C=T(Qo(p/l));v<p;)C[D++]=fn(s,v,v+=l);return C}function Sb(s){for(var l=-1,f=s==null?0:s.length,p=0,v=[];++l<f;){var D=s[l];D&&(v[p++]=D)}return v}function kb(){var s=arguments.length;if(!s)return[];for(var l=T(s-1),f=arguments[0],p=s;p--;)l[p-1]=arguments[p];return _r(oe(f)?Ft(f):[f],lt(l,1))}var Ob=ce(function(s,l){return Ge(s)?Ks(s,lt(l,1,Ge,!0)):[]}),Tb=ce(function(s,l){var f=dn(l);return Ge(f)&&(f=t),Ge(s)?Ks(s,lt(l,1,Ge,!0),Q(f,2)):[]}),Mb=ce(function(s,l){var f=dn(l);return Ge(f)&&(f=t),Ge(s)?Ks(s,lt(l,1,Ge,!0),t,f):[]});function Fb(s,l,f){var p=s==null?0:s.length;return p?(l=f||l===t?1:ae(l),fn(s,l<0?0:l,p)):[]}function Nb(s,l,f){var p=s==null?0:s.length;return p?(l=f||l===t?1:ae(l),l=p-l,fn(s,0,l<0?0:l)):[]}function Rb(s,l){return s&&s.length?ua(s,Q(l,3),!0,!0):[]}function Bb(s,l){return s&&s.length?ua(s,Q(l,3),!0):[]}function Ib(s,l,f,p){var v=s==null?0:s.length;return v?(f&&typeof f!="number"&&At(s,l,f)&&(f=0,p=v),ky(s,l,f,p)):[]}function zh(s,l,f){var p=s==null?0:s.length;if(!p)return-1;var v=f==null?0:ae(f);return v<0&&(v=et(p+v,0)),Vo(s,Q(l,3),v)}function $h(s,l,f){var p=s==null?0:s.length;if(!p)return-1;var v=p-1;return f!==t&&(v=ae(f),v=f<0?et(p+v,0):pt(v,p-1)),Vo(s,Q(l,3),v,!0)}function Hh(s){var l=s==null?0:s.length;return l?lt(s,1):[]}function Pb(s){var l=s==null?0:s.length;return l?lt(s,Re):[]}function Lb(s,l){var f=s==null?0:s.length;return f?(l=l===t?1:ae(l),lt(s,l)):[]}function zb(s){for(var l=-1,f=s==null?0:s.length,p={};++l<f;){var v=s[l];p[v[0]]=v[1]}return p}function Vh(s){return s&&s.length?s[0]:t}function $b(s,l,f){var p=s==null?0:s.length;if(!p)return-1;var v=f==null?0:ae(f);return v<0&&(v=et(p+v,0)),Pi(s,l,v)}function Hb(s){var l=s==null?0:s.length;return l?fn(s,0,-1):[]}var Vb=ce(function(s){var l=We(s,xu);return l.length&&l[0]===s[0]?fu(l):[]}),Wb=ce(function(s){var l=dn(s),f=We(s,xu);return l===dn(f)?l=t:f.pop(),f.length&&f[0]===s[0]?fu(f,Q(l,2)):[]}),Ub=ce(function(s){var l=dn(s),f=We(s,xu);return l=typeof l=="function"?l:t,l&&f.pop(),f.length&&f[0]===s[0]?fu(f,t,l):[]});function qb(s,l){return s==null?"":H1.call(s,l)}function dn(s){var l=s==null?0:s.length;return l?s[l-1]:t}function Kb(s,l,f){var p=s==null?0:s.length;if(!p)return-1;var v=p;return f!==t&&(v=ae(f),v=v<0?et(p+v,0):pt(v,p-1)),l===l?A1(s,l,v):Vo(s,wd,v,!0)}function jb(s,l){return s&&s.length?Qd(s,ae(l)):t}var Jb=ce(Wh);function Wh(s,l){return s&&s.length&&l&&l.length?mu(s,l):s}function Gb(s,l,f){return s&&s.length&&l&&l.length?mu(s,l,Q(f,2)):s}function Yb(s,l,f){return s&&s.length&&l&&l.length?mu(s,l,t,f):s}var Xb=dr(function(s,l){var f=s==null?0:s.length,p=au(s,l);return nh(s,We(l,function(v){return hr(v,f)?+v:v}).sort(dh)),p});function Zb(s,l){var f=[];if(!(s&&s.length))return f;var p=-1,v=[],D=s.length;for(l=Q(l,3);++p<D;){var C=s[p];l(C,p,s)&&(f.push(C),v.push(p))}return nh(s,v),f}function Bu(s){return s==null?s:q1.call(s)}function Qb(s,l,f){var p=s==null?0:s.length;return p?(f&&typeof f!="number"&&At(s,l,f)?(l=0,f=p):(l=l==null?0:ae(l),f=f===t?p:ae(f)),fn(s,l,f)):[]}function eD(s,l){return la(s,l)}function tD(s,l,f){return yu(s,l,Q(f,2))}function nD(s,l){var f=s==null?0:s.length;if(f){var p=la(s,l);if(p<f&&kn(s[p],l))return p}return-1}function rD(s,l){return la(s,l,!0)}function iD(s,l,f){return yu(s,l,Q(f,2),!0)}function sD(s,l){var f=s==null?0:s.length;if(f){var p=la(s,l,!0)-1;if(kn(s[p],l))return p}return-1}function oD(s){return s&&s.length?ih(s):[]}function aD(s,l){return s&&s.length?ih(s,Q(l,2)):[]}function lD(s){var l=s==null?0:s.length;return l?fn(s,1,l):[]}function uD(s,l,f){return s&&s.length?(l=f||l===t?1:ae(l),fn(s,0,l<0?0:l)):[]}function cD(s,l,f){var p=s==null?0:s.length;return p?(l=f||l===t?1:ae(l),l=p-l,fn(s,l<0?0:l,p)):[]}function fD(s,l){return s&&s.length?ua(s,Q(l,3),!1,!0):[]}function dD(s,l){return s&&s.length?ua(s,Q(l,3)):[]}var hD=ce(function(s){return Tr(lt(s,1,Ge,!0))}),pD=ce(function(s){var l=dn(s);return Ge(l)&&(l=t),Tr(lt(s,1,Ge,!0),Q(l,2))}),mD=ce(function(s){var l=dn(s);return l=typeof l=="function"?l:t,Tr(lt(s,1,Ge,!0),t,l)});function gD(s){return s&&s.length?Tr(s):[]}function vD(s,l){return s&&s.length?Tr(s,Q(l,2)):[]}function yD(s,l){return l=typeof l=="function"?l:t,s&&s.length?Tr(s,t,l):[]}function Iu(s){if(!(s&&s.length))return[];var l=0;return s=Ar(s,function(f){if(Ge(f))return l=et(f.length,l),!0}),Ql(l,function(f){return We(s,Yl(f))})}function Uh(s,l){if(!(s&&s.length))return[];var f=Iu(s);return l==null?f:We(f,function(p){return Wt(l,t,p)})}var bD=ce(function(s,l){return Ge(s)?Ks(s,l):[]}),DD=ce(function(s){return Du(Ar(s,Ge))}),xD=ce(function(s){var l=dn(s);return Ge(l)&&(l=t),Du(Ar(s,Ge),Q(l,2))}),wD=ce(function(s){var l=dn(s);return l=typeof l=="function"?l:t,Du(Ar(s,Ge),t,l)}),CD=ce(Iu);function ED(s,l){return lh(s||[],l||[],qs)}function AD(s,l){return lh(s||[],l||[],Gs)}var _D=ce(function(s){var l=s.length,f=l>1?s[l-1]:t;return f=typeof f=="function"?(s.pop(),f):t,Uh(s,f)});function qh(s){var l=b(s);return l.__chain__=!0,l}function SD(s,l){return l(s),s}function ya(s,l){return l(s)}var kD=dr(function(s){var l=s.length,f=l?s[0]:0,p=this.__wrapped__,v=function(D){return au(D,s)};return l>1||this.__actions__.length||!(p instanceof me)||!hr(f)?this.thru(v):(p=p.slice(f,+f+(l?1:0)),p.__actions__.push({func:ya,args:[v],thisArg:t}),new un(p,this.__chain__).thru(function(D){return l&&!D.length&&D.push(t),D}))});function OD(){return qh(this)}function TD(){return new un(this.value(),this.__chain__)}function MD(){this.__values__===t&&(this.__values__=sp(this.value()));var s=this.__index__>=this.__values__.length,l=s?t:this.__values__[this.__index__++];return{done:s,value:l}}function FD(){return this}function ND(s){for(var l,f=this;f instanceof ra;){var p=Lh(f);p.__index__=0,p.__values__=t,l?v.__wrapped__=p:l=p;var v=p;f=f.__wrapped__}return v.__wrapped__=s,l}function RD(){var s=this.__wrapped__;if(s instanceof me){var l=s;return this.__actions__.length&&(l=new me(this)),l=l.reverse(),l.__actions__.push({func:ya,args:[Bu],thisArg:t}),new un(l,this.__chain__)}return this.thru(Bu)}function BD(){return ah(this.__wrapped__,this.__actions__)}var ID=ca(function(s,l,f){ke.call(s,f)?++s[f]:cr(s,f,1)});function PD(s,l,f){var p=oe(s)?Dd:Sy;return f&&At(s,l,f)&&(l=t),p(s,Q(l,3))}function LD(s,l){var f=oe(s)?Ar:Ud;return f(s,Q(l,3))}var zD=yh(zh),$D=yh($h);function HD(s,l){return lt(ba(s,l),1)}function VD(s,l){return lt(ba(s,l),Re)}function WD(s,l,f){return f=f===t?1:ae(f),lt(ba(s,l),f)}function Kh(s,l){var f=oe(s)?an:Or;return f(s,Q(l,3))}function jh(s,l){var f=oe(s)?l1:Wd;return f(s,Q(l,3))}var UD=ca(function(s,l,f){ke.call(s,f)?s[f].push(l):cr(s,f,[l])});function qD(s,l,f,p){s=Nt(s)?s:Gi(s),f=f&&!p?ae(f):0;var v=s.length;return f<0&&(f=et(v+f,0)),Ea(s)?f<=v&&s.indexOf(l,f)>-1:!!v&&Pi(s,l,f)>-1}var KD=ce(function(s,l,f){var p=-1,v=typeof l=="function",D=Nt(s)?T(s.length):[];return Or(s,function(C){D[++p]=v?Wt(l,C,f):js(C,l,f)}),D}),jD=ca(function(s,l,f){cr(s,f,l)});function ba(s,l){var f=oe(s)?We:Yd;return f(s,Q(l,3))}function JD(s,l,f,p){return s==null?[]:(oe(l)||(l=l==null?[]:[l]),f=p?t:f,oe(f)||(f=f==null?[]:[f]),eh(s,l,f))}var GD=ca(function(s,l,f){s[f?0:1].push(l)},function(){return[[],[]]});function YD(s,l,f){var p=oe(s)?Jl:Ed,v=arguments.length<3;return p(s,Q(l,4),f,v,Or)}function XD(s,l,f){var p=oe(s)?u1:Ed,v=arguments.length<3;return p(s,Q(l,4),f,v,Wd)}function ZD(s,l){var f=oe(s)?Ar:Ud;return f(s,wa(Q(l,3)))}function QD(s){var l=oe(s)?zd:qy;return l(s)}function ex(s,l,f){(f?At(s,l,f):l===t)?l=1:l=ae(l);var p=oe(s)?wy:Ky;return p(s,l)}function tx(s){var l=oe(s)?Cy:Jy;return l(s)}function nx(s){if(s==null)return 0;if(Nt(s))return Ea(s)?zi(s):s.length;var l=mt(s);return l==ht||l==Xe?s.size:hu(s).length}function rx(s,l,f){var p=oe(s)?Gl:Gy;return f&&At(s,l,f)&&(l=t),p(s,Q(l,3))}var ix=ce(function(s,l){if(s==null)return[];var f=l.length;return f>1&&At(s,l[0],l[1])?l=[]:f>2&&At(l[0],l[1],l[2])&&(l=[l[0]]),eh(s,lt(l,1),[])}),Da=L1||function(){return at.Date.now()};function sx(s,l){if(typeof l!="function")throw new ln(a);return s=ae(s),function(){if(--s<1)return l.apply(this,arguments)}}function Jh(s,l,f){return l=f?t:l,l=s&&l==null?s.length:l,fr(s,K,t,t,t,t,l)}function Gh(s,l){var f;if(typeof l!="function")throw new ln(a);return s=ae(s),function(){return--s>0&&(f=l.apply(this,arguments)),s<=1&&(l=t),f}}var Pu=ce(function(s,l,f){var p=_;if(f.length){var v=Sr(f,ji(Pu));p|=q}return fr(s,p,l,f,v)}),Yh=ce(function(s,l,f){var p=_|O;if(f.length){var v=Sr(f,ji(Yh));p|=q}return fr(l,p,s,f,v)});function Xh(s,l,f){l=f?t:l;var p=fr(s,z,t,t,t,t,t,l);return p.placeholder=Xh.placeholder,p}function Zh(s,l,f){l=f?t:l;var p=fr(s,E,t,t,t,t,t,l);return p.placeholder=Zh.placeholder,p}function Qh(s,l,f){var p,v,D,C,A,k,R=0,B=!1,I=!1,U=!0;if(typeof s!="function")throw new ln(a);l=hn(l)||0,Ue(f)&&(B=!!f.leading,I="maxWait"in f,D=I?et(hn(f.maxWait)||0,l):D,U="trailing"in f?!!f.trailing:U);function X(Ye){var On=p,gr=v;return p=v=t,R=Ye,C=s.apply(gr,On),C}function ne(Ye){return R=Ye,A=Zs(de,l),B?X(Ye):C}function le(Ye){var On=Ye-k,gr=Ye-R,yp=l-On;return I?pt(yp,D-gr):yp}function re(Ye){var On=Ye-k,gr=Ye-R;return k===t||On>=l||On<0||I&&gr>=D}function de(){var Ye=Da();if(re(Ye))return ve(Ye);A=Zs(de,le(Ye))}function ve(Ye){return A=t,U&&p?X(Ye):(p=v=t,C)}function jt(){A!==t&&uh(A),R=0,p=k=v=A=t}function _t(){return A===t?C:ve(Da())}function Jt(){var Ye=Da(),On=re(Ye);if(p=arguments,v=this,k=Ye,On){if(A===t)return ne(k);if(I)return uh(A),A=Zs(de,l),X(k)}return A===t&&(A=Zs(de,l)),C}return Jt.cancel=jt,Jt.flush=_t,Jt}var ox=ce(function(s,l){return Vd(s,1,l)}),ax=ce(function(s,l,f){return Vd(s,hn(l)||0,f)});function lx(s){return fr(s,fe)}function xa(s,l){if(typeof s!="function"||l!=null&&typeof l!="function")throw new ln(a);var f=function(){var p=arguments,v=l?l.apply(this,p):p[0],D=f.cache;if(D.has(v))return D.get(v);var C=s.apply(this,p);return f.cache=D.set(v,C)||D,C};return f.cache=new(xa.Cache||ur),f}xa.Cache=ur;function wa(s){if(typeof s!="function")throw new ln(a);return function(){var l=arguments;switch(l.length){case 0:return!s.call(this);case 1:return!s.call(this,l[0]);case 2:return!s.call(this,l[0],l[1]);case 3:return!s.call(this,l[0],l[1],l[2])}return!s.apply(this,l)}}function ux(s){return Gh(2,s)}var cx=Yy(function(s,l){l=l.length==1&&oe(l[0])?We(l[0],Ut(Q())):We(lt(l,1),Ut(Q()));var f=l.length;return ce(function(p){for(var v=-1,D=pt(p.length,f);++v<D;)p[v]=l[v].call(this,p[v]);return Wt(s,this,p)})}),Lu=ce(function(s,l){var f=Sr(l,ji(Lu));return fr(s,q,t,l,f)}),ep=ce(function(s,l){var f=Sr(l,ji(ep));return fr(s,$,t,l,f)}),fx=dr(function(s,l){return fr(s,H,t,t,t,l)});function dx(s,l){if(typeof s!="function")throw new ln(a);return l=l===t?l:ae(l),ce(s,l)}function hx(s,l){if(typeof s!="function")throw new ln(a);return l=l==null?0:et(ae(l),0),ce(function(f){var p=f[l],v=Fr(f,0,l);return p&&_r(v,p),Wt(s,this,v)})}function px(s,l,f){var p=!0,v=!0;if(typeof s!="function")throw new ln(a);return Ue(f)&&(p="leading"in f?!!f.leading:p,v="trailing"in f?!!f.trailing:v),Qh(s,l,{leading:p,maxWait:l,trailing:v})}function mx(s){return Jh(s,1)}function gx(s,l){return Lu(wu(l),s)}function vx(){if(!arguments.length)return[];var s=arguments[0];return oe(s)?s:[s]}function yx(s){return cn(s,y)}function bx(s,l){return l=typeof l=="function"?l:t,cn(s,y,l)}function Dx(s){return cn(s,m|y)}function xx(s,l){return l=typeof l=="function"?l:t,cn(s,m|y,l)}function wx(s,l){return l==null||Hd(s,l,nt(l))}function kn(s,l){return s===l||s!==s&&l!==l}var Cx=pa(cu),Ex=pa(function(s,l){return s>=l}),ui=jd(function(){return arguments}())?jd:function(s){return je(s)&&ke.call(s,"callee")&&!Nd.call(s,"callee")},oe=T.isArray,Ax=pd?Ut(pd):Ny;function Nt(s){return s!=null&&Ca(s.length)&&!pr(s)}function Ge(s){return je(s)&&Nt(s)}function _x(s){return s===!0||s===!1||je(s)&&Et(s)==xt}var Nr=$1||Gu,Sx=md?Ut(md):Ry;function kx(s){return je(s)&&s.nodeType===1&&!Qs(s)}function Ox(s){if(s==null)return!0;if(Nt(s)&&(oe(s)||typeof s=="string"||typeof s.splice=="function"||Nr(s)||Ji(s)||ui(s)))return!s.length;var l=mt(s);if(l==ht||l==Xe)return!s.size;if(Xs(s))return!hu(s).length;for(var f in s)if(ke.call(s,f))return!1;return!0}function Tx(s,l){return Js(s,l)}function Mx(s,l,f){f=typeof f=="function"?f:t;var p=f?f(s,l):t;return p===t?Js(s,l,t,f):!!p}function zu(s){if(!je(s))return!1;var l=Et(s);return l==Cn||l==Ln||typeof s.message=="string"&&typeof s.name=="string"&&!Qs(s)}function Fx(s){return typeof s=="number"&&Bd(s)}function pr(s){if(!Ue(s))return!1;var l=Et(s);return l==sr||l==Cr||l==wr||l==Fi}function tp(s){return typeof s=="number"&&s==ae(s)}function Ca(s){return typeof s=="number"&&s>-1&&s%1==0&&s<=Me}function Ue(s){var l=typeof s;return s!=null&&(l=="object"||l=="function")}function je(s){return s!=null&&typeof s=="object"}var np=gd?Ut(gd):Iy;function Nx(s,l){return s===l||du(s,l,Ou(l))}function Rx(s,l,f){return f=typeof f=="function"?f:t,du(s,l,Ou(l),f)}function Bx(s){return rp(s)&&s!=+s}function Ix(s){if(bb(s))throw new se(o);return Jd(s)}function Px(s){return s===null}function Lx(s){return s==null}function rp(s){return typeof s=="number"||je(s)&&Et(s)==zn}function Qs(s){if(!je(s)||Et(s)!=wt)return!1;var l=Yo(s);if(l===null)return!0;var f=ke.call(l,"constructor")&&l.constructor;return typeof f=="function"&&f instanceof f&&Ko.call(f)==R1}var $u=vd?Ut(vd):Py;function zx(s){return tp(s)&&s>=-Me&&s<=Me}var ip=yd?Ut(yd):Ly;function Ea(s){return typeof s=="string"||!oe(s)&&je(s)&&Et(s)==En}function Kt(s){return typeof s=="symbol"||je(s)&&Et(s)==sn}var Ji=bd?Ut(bd):zy;function $x(s){return s===t}function Hx(s){return je(s)&&mt(s)==$n}function Vx(s){return je(s)&&Et(s)==Ni}var Wx=pa(pu),Ux=pa(function(s,l){return s<=l});function sp(s){if(!s)return[];if(Nt(s))return Ea(s)?_n(s):Ft(s);if($s&&s[$s])return w1(s[$s]());var l=mt(s),f=l==ht?tu:l==Xe?Wo:Gi;return f(s)}function mr(s){if(!s)return s===0?s:0;if(s=hn(s),s===Re||s===-Re){var l=s<0?-1:1;return l*Se}return s===s?s:0}function ae(s){var l=mr(s),f=l%1;return l===l?f?l-f:l:0}function op(s){return s?si(ae(s),0,Ve):0}function hn(s){if(typeof s=="number")return s;if(Kt(s))return Ce;if(Ue(s)){var l=typeof s.valueOf=="function"?s.valueOf():s;s=Ue(l)?l+"":l}if(typeof s!="string")return s===0?s:+s;s=Ad(s);var f=Av.test(s);return f||Sv.test(s)?s1(s.slice(2),f?2:8):Ev.test(s)?Ce:+s}function ap(s){return Wn(s,Rt(s))}function qx(s){return s?si(ae(s),-Me,Me):s===0?s:0}function _e(s){return s==null?"":qt(s)}var Kx=qi(function(s,l){if(Xs(l)||Nt(l)){Wn(l,nt(l),s);return}for(var f in l)ke.call(l,f)&&qs(s,f,l[f])}),lp=qi(function(s,l){Wn(l,Rt(l),s)}),Aa=qi(function(s,l,f,p){Wn(l,Rt(l),s,p)}),jx=qi(function(s,l,f,p){Wn(l,nt(l),s,p)}),Jx=dr(au);function Gx(s,l){var f=Ui(s);return l==null?f:$d(f,l)}var Yx=ce(function(s,l){s=Be(s);var f=-1,p=l.length,v=p>2?l[2]:t;for(v&&At(l[0],l[1],v)&&(p=1);++f<p;)for(var D=l[f],C=Rt(D),A=-1,k=C.length;++A<k;){var R=C[A],B=s[R];(B===t||kn(B,Hi[R])&&!ke.call(s,R))&&(s[R]=D[R])}return s}),Xx=ce(function(s){return s.push(t,Ah),Wt(up,t,s)});function Zx(s,l){return xd(s,Q(l,3),Vn)}function Qx(s,l){return xd(s,Q(l,3),uu)}function ew(s,l){return s==null?s:lu(s,Q(l,3),Rt)}function tw(s,l){return s==null?s:qd(s,Q(l,3),Rt)}function nw(s,l){return s&&Vn(s,Q(l,3))}function rw(s,l){return s&&uu(s,Q(l,3))}function iw(s){return s==null?[]:oa(s,nt(s))}function sw(s){return s==null?[]:oa(s,Rt(s))}function Hu(s,l,f){var p=s==null?t:oi(s,l);return p===t?f:p}function ow(s,l){return s!=null&&kh(s,l,Oy)}function Vu(s,l){return s!=null&&kh(s,l,Ty)}var aw=Dh(function(s,l,f){l!=null&&typeof l.toString!="function"&&(l=jo.call(l)),s[l]=f},Uu(Bt)),lw=Dh(function(s,l,f){l!=null&&typeof l.toString!="function"&&(l=jo.call(l)),ke.call(s,l)?s[l].push(f):s[l]=[f]},Q),uw=ce(js);function nt(s){return Nt(s)?Ld(s):hu(s)}function Rt(s){return Nt(s)?Ld(s,!0):$y(s)}function cw(s,l){var f={};return l=Q(l,3),Vn(s,function(p,v,D){cr(f,l(p,v,D),p)}),f}function fw(s,l){var f={};return l=Q(l,3),Vn(s,function(p,v,D){cr(f,v,l(p,v,D))}),f}var dw=qi(function(s,l,f){aa(s,l,f)}),up=qi(function(s,l,f,p){aa(s,l,f,p)}),hw=dr(function(s,l){var f={};if(s==null)return f;var p=!1;l=We(l,function(D){return D=Mr(D,s),p||(p=D.length>1),D}),Wn(s,Su(s),f),p&&(f=cn(f,m|g|y,ab));for(var v=l.length;v--;)bu(f,l[v]);return f});function pw(s,l){return cp(s,wa(Q(l)))}var mw=dr(function(s,l){return s==null?{}:Vy(s,l)});function cp(s,l){if(s==null)return{};var f=We(Su(s),function(p){return[p]});return l=Q(l),th(s,f,function(p,v){return l(p,v[0])})}function gw(s,l,f){l=Mr(l,s);var p=-1,v=l.length;for(v||(v=1,s=t);++p<v;){var D=s==null?t:s[Un(l[p])];D===t&&(p=v,D=f),s=pr(D)?D.call(s):D}return s}function vw(s,l,f){return s==null?s:Gs(s,l,f)}function yw(s,l,f,p){return p=typeof p=="function"?p:t,s==null?s:Gs(s,l,f,p)}var fp=Ch(nt),dp=Ch(Rt);function bw(s,l,f){var p=oe(s),v=p||Nr(s)||Ji(s);if(l=Q(l,4),f==null){var D=s&&s.constructor;v?f=p?new D:[]:Ue(s)?f=pr(D)?Ui(Yo(s)):{}:f={}}return(v?an:Vn)(s,function(C,A,k){return l(f,C,A,k)}),f}function Dw(s,l){return s==null?!0:bu(s,l)}function xw(s,l,f){return s==null?s:oh(s,l,wu(f))}function ww(s,l,f,p){return p=typeof p=="function"?p:t,s==null?s:oh(s,l,wu(f),p)}function Gi(s){return s==null?[]:eu(s,nt(s))}function Cw(s){return s==null?[]:eu(s,Rt(s))}function Ew(s,l,f){return f===t&&(f=l,l=t),f!==t&&(f=hn(f),f=f===f?f:0),l!==t&&(l=hn(l),l=l===l?l:0),si(hn(s),l,f)}function Aw(s,l,f){return l=mr(l),f===t?(f=l,l=0):f=mr(f),s=hn(s),My(s,l,f)}function _w(s,l,f){if(f&&typeof f!="boolean"&&At(s,l,f)&&(l=f=t),f===t&&(typeof l=="boolean"?(f=l,l=t):typeof s=="boolean"&&(f=s,s=t)),s===t&&l===t?(s=0,l=1):(s=mr(s),l===t?(l=s,s=0):l=mr(l)),s>l){var p=s;s=l,l=p}if(f||s%1||l%1){var v=Id();return pt(s+v*(l-s+i1("1e-"+((v+"").length-1))),l)}return gu(s,l)}var Sw=Ki(function(s,l,f){return l=l.toLowerCase(),s+(f?hp(l):l)});function hp(s){return Wu(_e(s).toLowerCase())}function pp(s){return s=_e(s),s&&s.replace(Ov,v1).replace(Jv,"")}function kw(s,l,f){s=_e(s),l=qt(l);var p=s.length;f=f===t?p:si(ae(f),0,p);var v=f;return f-=l.length,f>=0&&s.slice(f,v)==l}function Ow(s){return s=_e(s),s&&Ps.test(s)?s.replace(Is,y1):s}function Tw(s){return s=_e(s),s&&mv.test(s)?s.replace(Ll,"\\$&"):s}var Mw=Ki(function(s,l,f){return s+(f?"-":"")+l.toLowerCase()}),Fw=Ki(function(s,l,f){return s+(f?" ":"")+l.toLowerCase()}),Nw=vh("toLowerCase");function Rw(s,l,f){s=_e(s),l=ae(l);var p=l?zi(s):0;if(!l||p>=l)return s;var v=(l-p)/2;return ha(ea(v),f)+s+ha(Qo(v),f)}function Bw(s,l,f){s=_e(s),l=ae(l);var p=l?zi(s):0;return l&&p<l?s+ha(l-p,f):s}function Iw(s,l,f){s=_e(s),l=ae(l);var p=l?zi(s):0;return l&&p<l?ha(l-p,f)+s:s}function Pw(s,l,f){return f||l==null?l=0:l&&(l=+l),U1(_e(s).replace(zl,""),l||0)}function Lw(s,l,f){return(f?At(s,l,f):l===t)?l=1:l=ae(l),vu(_e(s),l)}function zw(){var s=arguments,l=_e(s[0]);return s.length<3?l:l.replace(s[1],s[2])}var $w=Ki(function(s,l,f){return s+(f?"_":"")+l.toLowerCase()});function Hw(s,l,f){return f&&typeof f!="number"&&At(s,l,f)&&(l=f=t),f=f===t?Ve:f>>>0,f?(s=_e(s),s&&(typeof l=="string"||l!=null&&!$u(l))&&(l=qt(l),!l&&Li(s))?Fr(_n(s),0,f):s.split(l,f)):[]}var Vw=Ki(function(s,l,f){return s+(f?" ":"")+Wu(l)});function Ww(s,l,f){return s=_e(s),f=f==null?0:si(ae(f),0,s.length),l=qt(l),s.slice(f,f+l.length)==l}function Uw(s,l,f){var p=b.templateSettings;f&&At(s,l,f)&&(l=t),s=_e(s),l=Aa({},l,p,Eh);var v=Aa({},l.imports,p.imports,Eh),D=nt(v),C=eu(v,D),A,k,R=0,B=l.interpolate||Lo,I="__p += '",U=nu((l.escape||Lo).source+"|"+B.source+"|"+(B===Po?Cv:Lo).source+"|"+(l.evaluate||Lo).source+"|$","g"),X="//# sourceURL="+(ke.call(l,"sourceURL")?(l.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Qv+"]")+`
`;s.replace(U,function(re,de,ve,jt,_t,Jt){return ve||(ve=jt),I+=s.slice(R,Jt).replace(Tv,b1),de&&(A=!0,I+=`' +
__e(`+de+`) +
'`),_t&&(k=!0,I+=`';
`+_t+`;
__p += '`),ve&&(I+=`' +
((__t = (`+ve+`)) == null ? '' : __t) +
'`),R=Jt+re.length,re}),I+=`';
`;var ne=ke.call(l,"variable")&&l.variable;if(!ne)I=`with (obj) {
`+I+`
}
`;else if(xv.test(ne))throw new se(u);I=(k?I.replace(ge,""):I).replace(ot,"$1").replace(Mt,"$1;"),I="function("+(ne||"obj")+`) {
`+(ne?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(A?", __e = _.escape":"")+(k?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+I+`return __p
}`;var le=gp(function(){return Ae(D,X+"return "+I).apply(t,C)});if(le.source=I,zu(le))throw le;return le}function qw(s){return _e(s).toLowerCase()}function Kw(s){return _e(s).toUpperCase()}function jw(s,l,f){if(s=_e(s),s&&(f||l===t))return Ad(s);if(!s||!(l=qt(l)))return s;var p=_n(s),v=_n(l),D=_d(p,v),C=Sd(p,v)+1;return Fr(p,D,C).join("")}function Jw(s,l,f){if(s=_e(s),s&&(f||l===t))return s.slice(0,Od(s)+1);if(!s||!(l=qt(l)))return s;var p=_n(s),v=Sd(p,_n(l))+1;return Fr(p,0,v).join("")}function Gw(s,l,f){if(s=_e(s),s&&(f||l===t))return s.replace(zl,"");if(!s||!(l=qt(l)))return s;var p=_n(s),v=_d(p,_n(l));return Fr(p,v).join("")}function Yw(s,l){var f=Ee,p=$e;if(Ue(l)){var v="separator"in l?l.separator:v;f="length"in l?ae(l.length):f,p="omission"in l?qt(l.omission):p}s=_e(s);var D=s.length;if(Li(s)){var C=_n(s);D=C.length}if(f>=D)return s;var A=f-zi(p);if(A<1)return p;var k=C?Fr(C,0,A).join(""):s.slice(0,A);if(v===t)return k+p;if(C&&(A+=k.length-A),$u(v)){if(s.slice(A).search(v)){var R,B=k;for(v.global||(v=nu(v.source,_e(jf.exec(v))+"g")),v.lastIndex=0;R=v.exec(B);)var I=R.index;k=k.slice(0,I===t?A:I)}}else if(s.indexOf(qt(v),A)!=A){var U=k.lastIndexOf(v);U>-1&&(k=k.slice(0,U))}return k+p}function Xw(s){return s=_e(s),s&&ar.test(s)?s.replace(or,_1):s}var Zw=Ki(function(s,l,f){return s+(f?" ":"")+l.toUpperCase()}),Wu=vh("toUpperCase");function mp(s,l,f){return s=_e(s),l=f?t:l,l===t?x1(s)?O1(s):d1(s):s.match(l)||[]}var gp=ce(function(s,l){try{return Wt(s,t,l)}catch(f){return zu(f)?f:new se(f)}}),Qw=dr(function(s,l){return an(l,function(f){f=Un(f),cr(s,f,Pu(s[f],s))}),s});function eC(s){var l=s==null?0:s.length,f=Q();return s=l?We(s,function(p){if(typeof p[1]!="function")throw new ln(a);return[f(p[0]),p[1]]}):[],ce(function(p){for(var v=-1;++v<l;){var D=s[v];if(Wt(D[0],this,p))return Wt(D[1],this,p)}})}function tC(s){return _y(cn(s,m))}function Uu(s){return function(){return s}}function nC(s,l){return s==null||s!==s?l:s}var rC=bh(),iC=bh(!0);function Bt(s){return s}function qu(s){return Gd(typeof s=="function"?s:cn(s,m))}function sC(s){return Xd(cn(s,m))}function oC(s,l){return Zd(s,cn(l,m))}var aC=ce(function(s,l){return function(f){return js(f,s,l)}}),lC=ce(function(s,l){return function(f){return js(s,f,l)}});function Ku(s,l,f){var p=nt(l),v=oa(l,p);f==null&&!(Ue(l)&&(v.length||!p.length))&&(f=l,l=s,s=this,v=oa(l,nt(l)));var D=!(Ue(f)&&"chain"in f)||!!f.chain,C=pr(s);return an(v,function(A){var k=l[A];s[A]=k,C&&(s.prototype[A]=function(){var R=this.__chain__;if(D||R){var B=s(this.__wrapped__),I=B.__actions__=Ft(this.__actions__);return I.push({func:k,args:arguments,thisArg:s}),B.__chain__=R,B}return k.apply(s,_r([this.value()],arguments))})}),s}function uC(){return at._===this&&(at._=B1),this}function ju(){}function cC(s){return s=ae(s),ce(function(l){return Qd(l,s)})}var fC=Eu(We),dC=Eu(Dd),hC=Eu(Gl);function vp(s){return Mu(s)?Yl(Un(s)):Wy(s)}function pC(s){return function(l){return s==null?t:oi(s,l)}}var mC=xh(),gC=xh(!0);function Ju(){return[]}function Gu(){return!1}function vC(){return{}}function yC(){return""}function bC(){return!0}function DC(s,l){if(s=ae(s),s<1||s>Me)return[];var f=Ve,p=pt(s,Ve);l=Q(l),s-=Ve;for(var v=Ql(p,l);++f<s;)l(f);return v}function xC(s){return oe(s)?We(s,Un):Kt(s)?[s]:Ft(Ph(_e(s)))}function wC(s){var l=++N1;return _e(s)+l}var CC=da(function(s,l){return s+l},0),EC=Au("ceil"),AC=da(function(s,l){return s/l},1),_C=Au("floor");function SC(s){return s&&s.length?sa(s,Bt,cu):t}function kC(s,l){return s&&s.length?sa(s,Q(l,2),cu):t}function OC(s){return Cd(s,Bt)}function TC(s,l){return Cd(s,Q(l,2))}function MC(s){return s&&s.length?sa(s,Bt,pu):t}function FC(s,l){return s&&s.length?sa(s,Q(l,2),pu):t}var NC=da(function(s,l){return s*l},1),RC=Au("round"),BC=da(function(s,l){return s-l},0);function IC(s){return s&&s.length?Zl(s,Bt):0}function PC(s,l){return s&&s.length?Zl(s,Q(l,2)):0}return b.after=sx,b.ary=Jh,b.assign=Kx,b.assignIn=lp,b.assignInWith=Aa,b.assignWith=jx,b.at=Jx,b.before=Gh,b.bind=Pu,b.bindAll=Qw,b.bindKey=Yh,b.castArray=vx,b.chain=qh,b.chunk=_b,b.compact=Sb,b.concat=kb,b.cond=eC,b.conforms=tC,b.constant=Uu,b.countBy=ID,b.create=Gx,b.curry=Xh,b.curryRight=Zh,b.debounce=Qh,b.defaults=Yx,b.defaultsDeep=Xx,b.defer=ox,b.delay=ax,b.difference=Ob,b.differenceBy=Tb,b.differenceWith=Mb,b.drop=Fb,b.dropRight=Nb,b.dropRightWhile=Rb,b.dropWhile=Bb,b.fill=Ib,b.filter=LD,b.flatMap=HD,b.flatMapDeep=VD,b.flatMapDepth=WD,b.flatten=Hh,b.flattenDeep=Pb,b.flattenDepth=Lb,b.flip=lx,b.flow=rC,b.flowRight=iC,b.fromPairs=zb,b.functions=iw,b.functionsIn=sw,b.groupBy=UD,b.initial=Hb,b.intersection=Vb,b.intersectionBy=Wb,b.intersectionWith=Ub,b.invert=aw,b.invertBy=lw,b.invokeMap=KD,b.iteratee=qu,b.keyBy=jD,b.keys=nt,b.keysIn=Rt,b.map=ba,b.mapKeys=cw,b.mapValues=fw,b.matches=sC,b.matchesProperty=oC,b.memoize=xa,b.merge=dw,b.mergeWith=up,b.method=aC,b.methodOf=lC,b.mixin=Ku,b.negate=wa,b.nthArg=cC,b.omit=hw,b.omitBy=pw,b.once=ux,b.orderBy=JD,b.over=fC,b.overArgs=cx,b.overEvery=dC,b.overSome=hC,b.partial=Lu,b.partialRight=ep,b.partition=GD,b.pick=mw,b.pickBy=cp,b.property=vp,b.propertyOf=pC,b.pull=Jb,b.pullAll=Wh,b.pullAllBy=Gb,b.pullAllWith=Yb,b.pullAt=Xb,b.range=mC,b.rangeRight=gC,b.rearg=fx,b.reject=ZD,b.remove=Zb,b.rest=dx,b.reverse=Bu,b.sampleSize=ex,b.set=vw,b.setWith=yw,b.shuffle=tx,b.slice=Qb,b.sortBy=ix,b.sortedUniq=oD,b.sortedUniqBy=aD,b.split=Hw,b.spread=hx,b.tail=lD,b.take=uD,b.takeRight=cD,b.takeRightWhile=fD,b.takeWhile=dD,b.tap=SD,b.throttle=px,b.thru=ya,b.toArray=sp,b.toPairs=fp,b.toPairsIn=dp,b.toPath=xC,b.toPlainObject=ap,b.transform=bw,b.unary=mx,b.union=hD,b.unionBy=pD,b.unionWith=mD,b.uniq=gD,b.uniqBy=vD,b.uniqWith=yD,b.unset=Dw,b.unzip=Iu,b.unzipWith=Uh,b.update=xw,b.updateWith=ww,b.values=Gi,b.valuesIn=Cw,b.without=bD,b.words=mp,b.wrap=gx,b.xor=DD,b.xorBy=xD,b.xorWith=wD,b.zip=CD,b.zipObject=ED,b.zipObjectDeep=AD,b.zipWith=_D,b.entries=fp,b.entriesIn=dp,b.extend=lp,b.extendWith=Aa,Ku(b,b),b.add=CC,b.attempt=gp,b.camelCase=Sw,b.capitalize=hp,b.ceil=EC,b.clamp=Ew,b.clone=yx,b.cloneDeep=Dx,b.cloneDeepWith=xx,b.cloneWith=bx,b.conformsTo=wx,b.deburr=pp,b.defaultTo=nC,b.divide=AC,b.endsWith=kw,b.eq=kn,b.escape=Ow,b.escapeRegExp=Tw,b.every=PD,b.find=zD,b.findIndex=zh,b.findKey=Zx,b.findLast=$D,b.findLastIndex=$h,b.findLastKey=Qx,b.floor=_C,b.forEach=Kh,b.forEachRight=jh,b.forIn=ew,b.forInRight=tw,b.forOwn=nw,b.forOwnRight=rw,b.get=Hu,b.gt=Cx,b.gte=Ex,b.has=ow,b.hasIn=Vu,b.head=Vh,b.identity=Bt,b.includes=qD,b.indexOf=$b,b.inRange=Aw,b.invoke=uw,b.isArguments=ui,b.isArray=oe,b.isArrayBuffer=Ax,b.isArrayLike=Nt,b.isArrayLikeObject=Ge,b.isBoolean=_x,b.isBuffer=Nr,b.isDate=Sx,b.isElement=kx,b.isEmpty=Ox,b.isEqual=Tx,b.isEqualWith=Mx,b.isError=zu,b.isFinite=Fx,b.isFunction=pr,b.isInteger=tp,b.isLength=Ca,b.isMap=np,b.isMatch=Nx,b.isMatchWith=Rx,b.isNaN=Bx,b.isNative=Ix,b.isNil=Lx,b.isNull=Px,b.isNumber=rp,b.isObject=Ue,b.isObjectLike=je,b.isPlainObject=Qs,b.isRegExp=$u,b.isSafeInteger=zx,b.isSet=ip,b.isString=Ea,b.isSymbol=Kt,b.isTypedArray=Ji,b.isUndefined=$x,b.isWeakMap=Hx,b.isWeakSet=Vx,b.join=qb,b.kebabCase=Mw,b.last=dn,b.lastIndexOf=Kb,b.lowerCase=Fw,b.lowerFirst=Nw,b.lt=Wx,b.lte=Ux,b.max=SC,b.maxBy=kC,b.mean=OC,b.meanBy=TC,b.min=MC,b.minBy=FC,b.stubArray=Ju,b.stubFalse=Gu,b.stubObject=vC,b.stubString=yC,b.stubTrue=bC,b.multiply=NC,b.nth=jb,b.noConflict=uC,b.noop=ju,b.now=Da,b.pad=Rw,b.padEnd=Bw,b.padStart=Iw,b.parseInt=Pw,b.random=_w,b.reduce=YD,b.reduceRight=XD,b.repeat=Lw,b.replace=zw,b.result=gw,b.round=RC,b.runInContext=S,b.sample=QD,b.size=nx,b.snakeCase=$w,b.some=rx,b.sortedIndex=eD,b.sortedIndexBy=tD,b.sortedIndexOf=nD,b.sortedLastIndex=rD,b.sortedLastIndexBy=iD,b.sortedLastIndexOf=sD,b.startCase=Vw,b.startsWith=Ww,b.subtract=BC,b.sum=IC,b.sumBy=PC,b.template=Uw,b.times=DC,b.toFinite=mr,b.toInteger=ae,b.toLength=op,b.toLower=qw,b.toNumber=hn,b.toSafeInteger=qx,b.toString=_e,b.toUpper=Kw,b.trim=jw,b.trimEnd=Jw,b.trimStart=Gw,b.truncate=Yw,b.unescape=Xw,b.uniqueId=wC,b.upperCase=Zw,b.upperFirst=Wu,b.each=Kh,b.eachRight=jh,b.first=Vh,Ku(b,function(){var s={};return Vn(b,function(l,f){ke.call(b.prototype,f)||(s[f]=l)}),s}(),{chain:!1}),b.VERSION=r,an(["bind","bindKey","curry","curryRight","partial","partialRight"],function(s){b[s].placeholder=b}),an(["drop","take"],function(s,l){me.prototype[s]=function(f){f=f===t?1:et(ae(f),0);var p=this.__filtered__&&!l?new me(this):this.clone();return p.__filtered__?p.__takeCount__=pt(f,p.__takeCount__):p.__views__.push({size:pt(f,Ve),type:s+(p.__dir__<0?"Right":"")}),p},me.prototype[s+"Right"]=function(f){return this.reverse()[s](f).reverse()}}),an(["filter","map","takeWhile"],function(s,l){var f=l+1,p=f==Ze||f==Le;me.prototype[s]=function(v){var D=this.clone();return D.__iteratees__.push({iteratee:Q(v,3),type:f}),D.__filtered__=D.__filtered__||p,D}}),an(["head","last"],function(s,l){var f="take"+(l?"Right":"");me.prototype[s]=function(){return this[f](1).value()[0]}}),an(["initial","tail"],function(s,l){var f="drop"+(l?"":"Right");me.prototype[s]=function(){return this.__filtered__?new me(this):this[f](1)}}),me.prototype.compact=function(){return this.filter(Bt)},me.prototype.find=function(s){return this.filter(s).head()},me.prototype.findLast=function(s){return this.reverse().find(s)},me.prototype.invokeMap=ce(function(s,l){return typeof s=="function"?new me(this):this.map(function(f){return js(f,s,l)})}),me.prototype.reject=function(s){return this.filter(wa(Q(s)))},me.prototype.slice=function(s,l){s=ae(s);var f=this;return f.__filtered__&&(s>0||l<0)?new me(f):(s<0?f=f.takeRight(-s):s&&(f=f.drop(s)),l!==t&&(l=ae(l),f=l<0?f.dropRight(-l):f.take(l-s)),f)},me.prototype.takeRightWhile=function(s){return this.reverse().takeWhile(s).reverse()},me.prototype.toArray=function(){return this.take(Ve)},Vn(me.prototype,function(s,l){var f=/^(?:filter|find|map|reject)|While$/.test(l),p=/^(?:head|last)$/.test(l),v=b[p?"take"+(l=="last"?"Right":""):l],D=p||/^find/.test(l);!v||(b.prototype[l]=function(){var C=this.__wrapped__,A=p?[1]:arguments,k=C instanceof me,R=A[0],B=k||oe(C),I=function(de){var ve=v.apply(b,_r([de],A));return p&&U?ve[0]:ve};B&&f&&typeof R=="function"&&R.length!=1&&(k=B=!1);var U=this.__chain__,X=!!this.__actions__.length,ne=D&&!U,le=k&&!X;if(!D&&B){C=le?C:new me(this);var re=s.apply(C,A);return re.__actions__.push({func:ya,args:[I],thisArg:t}),new un(re,U)}return ne&&le?s.apply(this,A):(re=this.thru(I),ne?p?re.value()[0]:re.value():re)})}),an(["pop","push","shift","sort","splice","unshift"],function(s){var l=Uo[s],f=/^(?:push|sort|unshift)$/.test(s)?"tap":"thru",p=/^(?:pop|shift)$/.test(s);b.prototype[s]=function(){var v=arguments;if(p&&!this.__chain__){var D=this.value();return l.apply(oe(D)?D:[],v)}return this[f](function(C){return l.apply(oe(C)?C:[],v)})}}),Vn(me.prototype,function(s,l){var f=b[l];if(f){var p=f.name+"";ke.call(Wi,p)||(Wi[p]=[]),Wi[p].push({name:l,func:f})}}),Wi[fa(t,O).name]=[{name:"wrapper",func:t}],me.prototype.clone=X1,me.prototype.reverse=Z1,me.prototype.value=Q1,b.prototype.at=kD,b.prototype.chain=OD,b.prototype.commit=TD,b.prototype.next=MD,b.prototype.plant=ND,b.prototype.reverse=RD,b.prototype.toJSON=b.prototype.valueOf=b.prototype.value=BD,b.prototype.first=b.prototype.head,$s&&(b.prototype[$s]=FD),b},$i=T1();ti?((ti.exports=$i)._=$i,ql._=$i):at._=$i}).call(eo)})(kc,kc.exports);const sE=()=>{const n=(o="",a=[])=>({body:o,media:a});return{versionContentObject:n,versionObject:(o=0,a=!1)=>({account_id:o,is_original:a,content:[n()]}),getOriginalVersion:o=>{const a=o.find(u=>u.is_original&&u.account_id===0);return a||null},getAccountVersion:(o,a)=>{const u=o.find(c=>c.account_id===a);return u||null},getIndexAccountVersion:(o,a)=>o.findIndex(u=>u.account_id===a)}};function ut(n){this.content=n}ut.prototype={constructor:ut,find:function(n){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===n)return e;return-1},get:function(n){var e=this.find(n);return e==-1?void 0:this.content[e+1]},update:function(n,e,t){var r=t&&t!=n?this.remove(t):this,i=r.find(n),o=r.content.slice();return i==-1?o.push(t||n,e):(o[i+1]=e,t&&(o[i]=t)),new ut(o)},remove:function(n){var e=this.find(n);if(e==-1)return this;var t=this.content.slice();return t.splice(e,2),new ut(t)},addToStart:function(n,e){return new ut([n,e].concat(this.remove(n).content))},addToEnd:function(n,e){var t=this.remove(n).content.slice();return t.push(n,e),new ut(t)},addBefore:function(n,e,t){var r=this.remove(e),i=r.content.slice(),o=r.find(n);return i.splice(o==-1?i.length:o,0,e,t),new ut(i)},forEach:function(n){for(var e=0;e<this.content.length;e+=2)n(this.content[e],this.content[e+1])},prepend:function(n){return n=ut.from(n),n.size?new ut(n.content.concat(this.subtract(n).content)):this},append:function(n){return n=ut.from(n),n.size?new ut(this.subtract(n).content.concat(n.content)):this},subtract:function(n){var e=this;n=ut.from(n);for(var t=0;t<n.content.length;t+=2)e=e.remove(n.content[t]);return e},get size(){return this.content.length>>1}};ut.from=function(n){if(n instanceof ut)return n;var e=[];if(n)for(var t in n)e.push(t,n[t]);return new ut(e)};function ig(n,e,t){for(let r=0;;r++){if(r==n.childCount||r==e.childCount)return n.childCount==e.childCount?null:t;let i=n.child(r),o=e.child(r);if(i==o){t+=i.nodeSize;continue}if(!i.sameMarkup(o))return t;if(i.isText&&i.text!=o.text){for(let a=0;i.text[a]==o.text[a];a++)t++;return t}if(i.content.size||o.content.size){let a=ig(i.content,o.content,t+1);if(a!=null)return a}t+=i.nodeSize}}function sg(n,e,t,r){for(let i=n.childCount,o=e.childCount;;){if(i==0||o==0)return i==o?null:{a:t,b:r};let a=n.child(--i),u=e.child(--o),c=a.nodeSize;if(a==u){t-=c,r-=c;continue}if(!a.sameMarkup(u))return{a:t,b:r};if(a.isText&&a.text!=u.text){let h=0,d=Math.min(a.text.length,u.text.length);for(;h<d&&a.text[a.text.length-h-1]==u.text[u.text.length-h-1];)h++,t--,r--;return{a:t,b:r}}if(a.content.size||u.content.size){let h=sg(a.content,u.content,t-1,r-1);if(h)return h}t-=c,r-=c}}class L{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,t,r,i=0,o){for(let a=0,u=0;u<t;a++){let c=this.content[a],h=u+c.nodeSize;if(h>e&&r(c,i+u,o||null,a)!==!1&&c.content.size){let d=u+1;c.nodesBetween(Math.max(0,e-d),Math.min(c.content.size,t-d),r,i+d)}u=h}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,r,i){let o="",a=!0;return this.nodesBetween(e,t,(u,c)=>{u.isText?(o+=u.text.slice(Math.max(e,c)-c,t-c),a=!r):u.isLeaf?(i?o+=typeof i=="function"?i(u):i:u.type.spec.leafText&&(o+=u.type.spec.leafText(u)),a=!r):!a&&u.isBlock&&(o+=r,a=!0)},0),o}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,r=e.firstChild,i=this.content.slice(),o=0;for(t.isText&&t.sameMarkup(r)&&(i[i.length-1]=t.withText(t.text+r.text),o=1);o<e.content.length;o++)i.push(e.content[o]);return new L(i,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let r=[],i=0;if(t>e)for(let o=0,a=0;a<t;o++){let u=this.content[o],c=a+u.nodeSize;c>e&&((a<e||c>t)&&(u.isText?u=u.cut(Math.max(0,e-a),Math.min(u.text.length,t-a)):u=u.cut(Math.max(0,e-a-1),Math.min(u.content.size,t-a-1))),r.push(u),i+=u.nodeSize),a=c}return new L(r,i)}cutByIndex(e,t){return e==t?L.empty:e==0&&t==this.content.length?this:new L(this.content.slice(e,t))}replaceChild(e,t){let r=this.content[e];if(r==t)return this;let i=this.content.slice(),o=this.size+t.nodeSize-r.nodeSize;return i[e]=t,new L(i,o)}addToStart(e){return new L([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new L(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,r=0;t<this.content.length;t++){let i=this.content[t];e(i,r,t),r+=i.nodeSize}}findDiffStart(e,t=0){return ig(this,e,t)}findDiffEnd(e,t=this.size,r=e.size){return sg(this,e,t,r)}findIndex(e,t=-1){if(e==0)return _a(0,e);if(e==this.size)return _a(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let o=this.child(r),a=i+o.nodeSize;if(a>=e)return a==e||t>0?_a(r+1,a):_a(r,i);i=a}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return L.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new L(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return L.empty;let t,r=0;for(let i=0;i<e.length;i++){let o=e[i];r+=o.nodeSize,i&&o.isText&&e[i-1].sameMarkup(o)?(t||(t=e.slice(0,i)),t[t.length-1]=o.withText(t[t.length-1].text+o.text)):t&&t.push(o)}return new L(t||e,r)}static from(e){if(!e)return L.empty;if(e instanceof L)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new L([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}L.empty=new L([],0);const Qu={index:0,offset:0};function _a(n,e){return Qu.index=n,Qu.offset=e,Qu}function Ia(n,e){if(n===e)return!0;if(!(n&&typeof n=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(n);if(Array.isArray(e)!=t)return!1;if(t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!Ia(n[r],e[r]))return!1}else{for(let r in n)if(!(r in e)||!Ia(n[r],e[r]))return!1;for(let r in e)if(!(r in n))return!1}return!0}class Te{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,r=!1;for(let i=0;i<e.length;i++){let o=e[i];if(this.eq(o))return e;if(this.type.excludes(o.type))t||(t=e.slice(0,i));else{if(o.type.excludes(this.type))return e;!r&&o.type.rank>this.type.rank&&(t||(t=e.slice(0,i)),t.push(this),r=!0),t&&t.push(o)}}return t||(t=e.slice()),r||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Ia(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[t.type];if(!r)throw new RangeError(`There is no mark type ${t.type} in this schema`);return r.create(t.attrs)}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(t[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return Te.none;if(e instanceof Te)return[e];let t=e.slice();return t.sort((r,i)=>r.type.rank-i.type.rank),t}}Te.none=[];class Ao extends Error{}class G{constructor(e,t,r){this.content=e,this.openStart=t,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let r=ag(this.content,e+this.openStart,t);return r&&new G(r,this.openStart,this.openEnd)}removeBetween(e,t){return new G(og(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return G.empty;let r=t.openStart||0,i=t.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new G(L.fromJSON(e,t.content),r,i)}static maxOpen(e,t=!0){let r=0,i=0;for(let o=e.firstChild;o&&!o.isLeaf&&(t||!o.type.spec.isolating);o=o.firstChild)r++;for(let o=e.lastChild;o&&!o.isLeaf&&(t||!o.type.spec.isolating);o=o.lastChild)i++;return new G(e,r,i)}}G.empty=new G(L.empty,0,0);function og(n,e,t){let{index:r,offset:i}=n.findIndex(e),o=n.maybeChild(r),{index:a,offset:u}=n.findIndex(t);if(i==e||o.isText){if(u!=t&&!n.child(a).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(r!=a)throw new RangeError("Removing non-flat range");return n.replaceChild(r,o.copy(og(o.content,e-i-1,t-i-1)))}function ag(n,e,t,r){let{index:i,offset:o}=n.findIndex(e),a=n.maybeChild(i);if(o==e||a.isText)return r&&!r.canReplace(i,i,t)?null:n.cut(0,e).append(t).append(n.cut(e));let u=ag(a.content,e-o-1,t);return u&&n.replaceChild(i,a.copy(u))}function oE(n,e,t){if(t.openStart>n.depth)throw new Ao("Inserted content deeper than insertion position");if(n.depth-t.openStart!=e.depth-t.openEnd)throw new Ao("Inconsistent open depths");return lg(n,e,t,0)}function lg(n,e,t,r){let i=n.index(r),o=n.node(r);if(i==e.index(r)&&r<n.depth-t.openStart){let a=lg(n,e,t,r+1);return o.copy(o.content.replaceChild(i,a))}else if(t.content.size)if(!t.openStart&&!t.openEnd&&n.depth==r&&e.depth==r){let a=n.parent,u=a.content;return Ci(a,u.cut(0,n.parentOffset).append(t.content).append(u.cut(e.parentOffset)))}else{let{start:a,end:u}=aE(t,n);return Ci(o,cg(n,a,u,e,r))}else return Ci(o,Pa(n,e,r))}function ug(n,e){if(!e.type.compatibleContent(n.type))throw new Ao("Cannot join "+e.type.name+" onto "+n.type.name)}function Oc(n,e,t){let r=n.node(t);return ug(r,e.node(t)),r}function wi(n,e){let t=e.length-1;t>=0&&n.isText&&n.sameMarkup(e[t])?e[t]=n.withText(e[t].text+n.text):e.push(n)}function ho(n,e,t,r){let i=(e||n).node(t),o=0,a=e?e.index(t):i.childCount;n&&(o=n.index(t),n.depth>t?o++:n.textOffset&&(wi(n.nodeAfter,r),o++));for(let u=o;u<a;u++)wi(i.child(u),r);e&&e.depth==t&&e.textOffset&&wi(e.nodeBefore,r)}function Ci(n,e){if(!n.type.validContent(e))throw new Ao("Invalid content for node "+n.type.name);return n.copy(e)}function cg(n,e,t,r,i){let o=n.depth>i&&Oc(n,e,i+1),a=r.depth>i&&Oc(t,r,i+1),u=[];return ho(null,n,i,u),o&&a&&e.index(i)==t.index(i)?(ug(o,a),wi(Ci(o,cg(n,e,t,r,i+1)),u)):(o&&wi(Ci(o,Pa(n,e,i+1)),u),ho(e,t,i,u),a&&wi(Ci(a,Pa(t,r,i+1)),u)),ho(r,null,i,u),new L(u)}function Pa(n,e,t){let r=[];if(ho(null,n,t,r),n.depth>t){let i=Oc(n,e,t+1);wi(Ci(i,Pa(n,e,t+1)),r)}return ho(e,null,t,r),new L(r)}function aE(n,e){let t=e.depth-n.openStart,i=e.node(t).copy(n.content);for(let o=t-1;o>=0;o--)i=e.node(o).copy(L.from(i));return{start:i.resolveNoCache(n.openStart+t),end:i.resolveNoCache(i.content.size-n.openEnd-t)}}class _o{constructor(e,t,r){this.pos=e,this.path=t,this.parentOffset=r,this.depth=t.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(t);return r?e.child(t).cut(r):i}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):e==0?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let r=this.path[t*3],i=t==0?0:this.path[t*3-1]+1;for(let o=0;o<e;o++)i+=r.child(o).nodeSize;return i}marks(){let e=this.parent,t=this.index();if(e.content.size==0)return Te.none;if(this.textOffset)return e.child(t).marks;let r=e.maybeChild(t-1),i=e.maybeChild(t);if(!r){let u=r;r=i,i=u}let o=r.marks;for(var a=0;a<o.length;a++)o[a].type.spec.inclusive===!1&&(!i||!o[a].isInSet(i.marks))&&(o=o[a--].removeFromSet(o));return o}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let r=t.marks,i=e.parent.maybeChild(e.index());for(var o=0;o<r.length;o++)r[o].type.spec.inclusive===!1&&(!i||!r[o].isInSet(i.marks))&&(r=r[o--].removeFromSet(r));return r}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!t||t(this.node(r))))return new La(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let r=[],i=0,o=t;for(let a=e;;){let{index:u,offset:c}=a.content.findIndex(o),h=o-c;if(r.push(a,u,i+c),!h||(a=a.child(u),a.isText))break;o=h-1,i+=c+1}return new _o(t,r,o)}static resolveCached(e,t){for(let i=0;i<ec.length;i++){let o=ec[i];if(o.pos==t&&o.doc==e)return o}let r=ec[tc]=_o.resolve(e,t);return tc=(tc+1)%lE,r}}let ec=[],tc=0,lE=12;class La{constructor(e,t,r){this.$from=e,this.$to=t,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const uE=Object.create(null);class Zn{constructor(e,t,r,i=Te.none){this.type=e,this.attrs=t,this.marks=i,this.content=r||L.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,r,i=0){this.content.nodesBetween(e,t,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,r,i){return this.content.textBetween(e,t,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,r){return this.type==e&&Ia(this.attrs,t||e.defaultAttrs||uE)&&Te.sameSet(this.marks,r||Te.none)}copy(e=null){return e==this.content?this:new Zn(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new Zn(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return e==0&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,r=!1){if(e==t)return G.empty;let i=this.resolve(e),o=this.resolve(t),a=r?0:i.sharedDepth(t),u=i.start(a),h=i.node(a).content.cut(i.pos-u,o.pos-u);return new G(h,i.depth-a,o.depth-a)}replace(e,t,r){return oE(this.resolve(e),this.resolve(t),r)}nodeAt(e){for(let t=this;;){let{index:r,offset:i}=t.content.findIndex(e);if(t=t.maybeChild(r),!t)return null;if(i==e||t.isText)return t;e-=i+1}}childAfter(e){let{index:t,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:t,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(t),index:t,offset:r};let i=this.content.child(t-1);return{node:i,index:t-1,offset:r-i.nodeSize}}resolve(e){return _o.resolveCached(this,e)}resolveNoCache(e){return _o.resolve(this,e)}rangeHasMark(e,t,r){let i=!1;return t>e&&this.nodesBetween(e,t,o=>(r.isInSet(o.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),fg(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,r=L.empty,i=0,o=r.childCount){let a=this.contentMatchAt(e).matchFragment(r,i,o),u=a&&a.matchFragment(this.content,t);if(!u||!u.validEnd)return!1;for(let c=i;c<o;c++)if(!this.type.allowsMarks(r.child(c).marks))return!1;return!0}canReplaceWith(e,t,r,i){if(i&&!this.type.allowsMarks(i))return!1;let o=this.contentMatchAt(e).matchType(r),a=o&&o.matchFragment(this.content,t);return a?a.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){if(!this.type.validContent(this.content))throw new RangeError(`Invalid content for node ${this.type.name}: ${this.content.toString().slice(0,50)}`);let e=Te.none;for(let t=0;t<this.marks.length;t++)e=this.marks[t].addToSet(e);if(!Te.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(t=>t.type.name)}`);this.content.forEach(t=>t.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(t=>t.toJSON())),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let r=null;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=t.marks.map(e.markFromJSON)}if(t.type=="text"){if(typeof t.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(t.text,r)}let i=L.fromJSON(e,t.content);return e.nodeType(t.type).create(t.attrs,i,r)}}Zn.prototype.text=void 0;class za extends Zn{constructor(e,t,r,i){if(super(e,t,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):fg(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new za(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new za(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return e==0&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function fg(n,e){for(let t=n.length-1;t>=0;t--)e=n[t].type.name+"("+e+")";return e}class Si{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let r=new cE(e,t);if(r.next==null)return Si.empty;let i=dg(r);r.next&&r.err("Unexpected trailing text");let o=vE(gE(i));return yE(o,r),o}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,r=e.childCount){let i=this;for(let o=t;i&&o<r;o++)i=i.matchType(e.child(o).type);return i}get inlineContent(){return this.next.length&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let r=0;r<e.next.length;r++)if(this.next[t].type==e.next[r].type)return!0;return!1}fillBefore(e,t=!1,r=0){let i=[this];function o(a,u){let c=a.matchFragment(e,r);if(c&&(!t||c.validEnd))return L.from(u.map(h=>h.createAndFill()));for(let h=0;h<a.next.length;h++){let{type:d,next:m}=a.next[h];if(!(d.isText||d.hasRequiredAttrs())&&i.indexOf(m)==-1){i.push(m);let g=o(m,u.concat(d));if(g)return g}}return null}return o(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),o=i.match;if(o.matchType(e)){let a=[];for(let u=i;u.type;u=u.via)a.push(u.type);return a.reverse()}for(let a=0;a<o.next.length;a++){let{type:u,next:c}=o.next[a];!u.isLeaf&&!u.hasRequiredAttrs()&&!(u.name in t)&&(!i.type||c.validEnd)&&(r.push({match:u.contentMatch,type:u,via:i}),t[u.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function t(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&t(r.next[i].next)}return t(this),e.map((r,i)=>{let o=i+(r.validEnd?"*":" ")+" ";for(let a=0;a<r.next.length;a++)o+=(a?", ":"")+r.next[a].type.name+"->"+e.indexOf(r.next[a].next);return o}).join(`
`)}}Si.empty=new Si(!0);class cE{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function dg(n){let e=[];do e.push(fE(n));while(n.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function fE(n){let e=[];do e.push(dE(n));while(n.next&&n.next!=")"&&n.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function dE(n){let e=mE(n);for(;;)if(n.eat("+"))e={type:"plus",expr:e};else if(n.eat("*"))e={type:"star",expr:e};else if(n.eat("?"))e={type:"opt",expr:e};else if(n.eat("{"))e=hE(n,e);else break;return e}function xp(n){/\D/.test(n.next)&&n.err("Expected number, got '"+n.next+"'");let e=Number(n.next);return n.pos++,e}function hE(n,e){let t=xp(n),r=t;return n.eat(",")&&(n.next!="}"?r=xp(n):r=-1),n.eat("}")||n.err("Unclosed braced range"),{type:"range",min:t,max:r,expr:e}}function pE(n,e){let t=n.nodeTypes,r=t[e];if(r)return[r];let i=[];for(let o in t){let a=t[o];a.groups.indexOf(e)>-1&&i.push(a)}return i.length==0&&n.err("No node type or group '"+e+"' found"),i}function mE(n){if(n.eat("(")){let e=dg(n);return n.eat(")")||n.err("Missing closing paren"),e}else if(/\W/.test(n.next))n.err("Unexpected token '"+n.next+"'");else{let e=pE(n,n.next).map(t=>(n.inline==null?n.inline=t.isInline:n.inline!=t.isInline&&n.err("Mixing inline and block content"),{type:"name",value:t}));return n.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function gE(n){let e=[[]];return i(o(n,0),t()),e;function t(){return e.push([])-1}function r(a,u,c){let h={term:c,to:u};return e[a].push(h),h}function i(a,u){a.forEach(c=>c.to=u)}function o(a,u){if(a.type=="choice")return a.exprs.reduce((c,h)=>c.concat(o(h,u)),[]);if(a.type=="seq")for(let c=0;;c++){let h=o(a.exprs[c],u);if(c==a.exprs.length-1)return h;i(h,u=t())}else if(a.type=="star"){let c=t();return r(u,c),i(o(a.expr,c),c),[r(c)]}else if(a.type=="plus"){let c=t();return i(o(a.expr,u),c),i(o(a.expr,c),c),[r(c)]}else{if(a.type=="opt")return[r(u)].concat(o(a.expr,u));if(a.type=="range"){let c=u;for(let h=0;h<a.min;h++){let d=t();i(o(a.expr,c),d),c=d}if(a.max==-1)i(o(a.expr,c),c);else for(let h=a.min;h<a.max;h++){let d=t();r(c,d),i(o(a.expr,c),d),c=d}return[r(c)]}else{if(a.type=="name")return[r(u,void 0,a.value)];throw new Error("Unknown expr type")}}}}function hg(n,e){return e-n}function wp(n,e){let t=[];return r(e),t.sort(hg);function r(i){let o=n[i];if(o.length==1&&!o[0].term)return r(o[0].to);t.push(i);for(let a=0;a<o.length;a++){let{term:u,to:c}=o[a];!u&&t.indexOf(c)==-1&&r(c)}}}function vE(n){let e=Object.create(null);return t(wp(n,0));function t(r){let i=[];r.forEach(a=>{n[a].forEach(({term:u,to:c})=>{if(!u)return;let h;for(let d=0;d<i.length;d++)i[d][0]==u&&(h=i[d][1]);wp(n,c).forEach(d=>{h||i.push([u,h=[]]),h.indexOf(d)==-1&&h.push(d)})})});let o=e[r.join(",")]=new Si(r.indexOf(n.length-1)>-1);for(let a=0;a<i.length;a++){let u=i[a][1].sort(hg);o.next.push({type:i[a][0],next:e[u.join(",")]||t(u)})}return o}}function yE(n,e){for(let t=0,r=[n];t<r.length;t++){let i=r[t],o=!i.validEnd,a=[];for(let u=0;u<i.next.length;u++){let{type:c,next:h}=i.next[u];a.push(c.name),o&&!(c.isText||c.hasRequiredAttrs())&&(o=!1),r.indexOf(h)==-1&&r.push(h)}o&&e.err("Only non-generatable nodes ("+a.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function pg(n){let e=Object.create(null);for(let t in n){let r=n[t];if(!r.hasDefault)return null;e[t]=r.default}return e}function mg(n,e){let t=Object.create(null);for(let r in n){let i=e&&e[r];if(i===void 0){let o=n[r];if(o.hasDefault)i=o.default;else throw new RangeError("No value supplied for attribute "+r)}t[r]=i}return t}function gg(n){let e=Object.create(null);if(n)for(let t in n)e[t]=new bE(n[t]);return e}class $a{constructor(e,t,r){this.name=e,this.schema=t,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=gg(r.attrs),this.defaultAttrs=pg(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Si.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:mg(this.attrs,e)}create(e=null,t,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Zn(this,this.computeAttrs(e),L.from(t),Te.setFrom(r))}createChecked(e=null,t,r){if(t=L.from(t),!this.validContent(t))throw new RangeError("Invalid content for node "+this.name);return new Zn(this,this.computeAttrs(e),t,Te.setFrom(r))}createAndFill(e=null,t,r){if(e=this.computeAttrs(e),t=L.from(t),t.size){let a=this.contentMatch.fillBefore(t);if(!a)return null;t=a.append(t)}let i=this.contentMatch.matchFragment(t),o=i&&i.fillBefore(L.empty,!0);return o?new Zn(this,e,t.append(o),Te.setFrom(r)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let t;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?t&&t.push(e[r]):t||(t=e.slice(0,r));return t?t.length?t:Te.none:e}static compile(e,t){let r=Object.create(null);e.forEach((o,a)=>r[o]=new $a(o,t,a));let i=t.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let o in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}}class bE{constructor(e){this.hasDefault=Object.prototype.hasOwnProperty.call(e,"default"),this.default=e.default}get isRequired(){return!this.hasDefault}}class xl{constructor(e,t,r,i){this.name=e,this.rank=t,this.schema=r,this.spec=i,this.attrs=gg(i.attrs),this.excluded=null;let o=pg(this.attrs);this.instance=o?new Te(this,o):null}create(e=null){return!e&&this.instance?this.instance:new Te(this,mg(this.attrs,e))}static compile(e,t){let r=Object.create(null),i=0;return e.forEach((o,a)=>r[o]=new xl(o,i++,t,a)),r}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}excludes(e){return this.excluded.indexOf(e)>-1}}class DE{constructor(e){this.cached=Object.create(null),this.spec={nodes:ut.from(e.nodes),marks:ut.from(e.marks||{}),topNode:e.topNode},this.nodes=$a.compile(this.spec.nodes,this),this.marks=xl.compile(this.spec.marks,this);let t=Object.create(null);for(let r in this.nodes){if(r in this.marks)throw new RangeError(r+" can not be both a node and a mark");let i=this.nodes[r],o=i.spec.content||"",a=i.spec.marks;i.contentMatch=t[o]||(t[o]=Si.parse(o,this.nodes)),i.inlineContent=i.contentMatch.inlineContent,i.markSet=a=="_"?null:a?Cp(this,a.split(" ")):a==""||!i.inlineContent?[]:null}for(let r in this.marks){let i=this.marks[r],o=i.spec.excludes;i.excluded=o==null?[i]:o==""?[]:Cp(this,o.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof $a){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(t,r,i)}text(e,t){let r=this.nodes.text;return new za(r,r.defaultAttrs,e,Te.setFrom(t))}mark(e,t){return typeof e=="string"&&(e=this.marks[e]),e.create(t)}nodeFromJSON(e){return Zn.fromJSON(this,e)}markFromJSON(e){return Te.fromJSON(this,e)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}function Cp(n,e){let t=[];for(let r=0;r<e.length;r++){let i=e[r],o=n.marks[i],a=o;if(o)t.push(o);else for(let u in n.marks){let c=n.marks[u];(i=="_"||c.spec.group&&c.spec.group.split(" ").indexOf(i)>-1)&&t.push(a=c)}if(!a)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return t}class gs{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[],t.forEach(r=>{r.tag?this.tags.push(r):r.style&&this.styles.push(r)}),this.normalizeLists=!this.tags.some(r=>{if(!/^(ul|ol)\b/.test(r.tag)||!r.node)return!1;let i=e.nodes[r.node];return i.contentMatch.matchType(i)})}parse(e,t={}){let r=new Ap(this,t,!1);return r.addAll(e,t.from,t.to),r.finish()}parseSlice(e,t={}){let r=new Ap(this,t,!0);return r.addAll(e,t.from,t.to),G.maxOpen(r.finish())}matchTag(e,t,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let o=this.tags[i];if(CE(e,o.tag)&&(o.namespace===void 0||e.namespaceURI==o.namespace)&&(!o.context||t.matchesContext(o.context))){if(o.getAttrs){let a=o.getAttrs(e);if(a===!1)continue;o.attrs=a||void 0}return o}}}matchStyle(e,t,r,i){for(let o=i?this.styles.indexOf(i)+1:0;o<this.styles.length;o++){let a=this.styles[o],u=a.style;if(!(u.indexOf(e)!=0||a.context&&!r.matchesContext(a.context)||u.length>e.length&&(u.charCodeAt(e.length)!=61||u.slice(e.length+1)!=t))){if(a.getAttrs){let c=a.getAttrs(t);if(c===!1)continue;a.attrs=c||void 0}return a}}}static schemaRules(e){let t=[];function r(i){let o=i.priority==null?50:i.priority,a=0;for(;a<t.length;a++){let u=t[a];if((u.priority==null?50:u.priority)<o)break}t.splice(a,0,i)}for(let i in e.marks){let o=e.marks[i].spec.parseDOM;o&&o.forEach(a=>{r(a=_p(a)),a.mark=i})}for(let i in e.nodes){let o=e.nodes[i].spec.parseDOM;o&&o.forEach(a=>{r(a=_p(a)),a.node=i})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new gs(e,gs.schemaRules(e)))}}const vg={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},xE={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},yg={ol:!0,ul:!0},Ha=1,Va=2,po=4;function Ep(n,e,t){return e!=null?(e?Ha:0)|(e==="full"?Va:0):n&&n.whitespace=="pre"?Ha|Va:t&~po}class Sa{constructor(e,t,r,i,o,a,u){this.type=e,this.attrs=t,this.marks=r,this.pendingMarks=i,this.solid=o,this.options=u,this.content=[],this.activeMarks=Te.none,this.stashMarks=[],this.match=a||(u&po?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(L.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&Ha)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let o=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=o.withText(o.text.slice(0,o.text.length-i[0].length))}}let t=L.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(L.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}popFromStashMark(e){for(let t=this.stashMarks.length-1;t>=0;t--)if(e.eq(this.stashMarks[t]))return this.stashMarks.splice(t,1)[0]}applyPending(e){for(let t=0,r=this.pendingMarks;t<r.length;t++){let i=r[t];(this.type?this.type.allowsMarkType(i.type):AE(i.type,e))&&!i.isInSet(this.activeMarks)&&(this.activeMarks=i.addToSet(this.activeMarks),this.pendingMarks=i.removeFromSet(this.pendingMarks))}}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!vg.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class Ap{constructor(e,t,r){this.parser=e,this.options=t,this.isOpen=r,this.open=0;let i=t.topNode,o,a=Ep(null,t.preserveWhitespace,0)|(r?po:0);i?o=new Sa(i.type,i.attrs,Te.none,Te.none,!0,t.topMatch||i.type.contentMatch,a):r?o=new Sa(null,null,Te.none,Te.none,!0,null,a):o=new Sa(e.schema.topNodeType,null,Te.none,Te.none,!0,null,a),this.nodes=[o],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e){if(e.nodeType==3)this.addTextNode(e);else if(e.nodeType==1){let t=e.getAttribute("style"),r=t?this.readStyles(EE(t)):null,i=this.top;if(r!=null)for(let o=0;o<r.length;o++)this.addPendingMark(r[o]);if(this.addElement(e),r!=null)for(let o=0;o<r.length;o++)this.removePendingMark(r[o],i)}}addTextNode(e){let t=e.nodeValue,r=this.top;if(r.options&Va||r.inlineContext(e)||/[^ \t\r\n\u000c]/.test(t)){if(r.options&Ha)r.options&Va?t=t.replace(/\r\n?/g,`
`):t=t.replace(/\r?\n|\r/g," ");else if(t=t.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(t)&&this.open==this.nodes.length-1){let i=r.content[r.content.length-1],o=e.previousSibling;(!i||o&&o.nodeName=="BR"||i.isText&&/[ \t\r\n\u000c]$/.test(i.text))&&(t=t.slice(1))}t&&this.insertNode(this.parser.schema.text(t)),this.findInText(e)}else this.findInside(e)}addElement(e,t){let r=e.nodeName.toLowerCase(),i;yg.hasOwnProperty(r)&&this.parser.normalizeLists&&wE(e);let o=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(i=this.parser.matchTag(e,this,t));if(o?o.ignore:xE.hasOwnProperty(r))this.findInside(e),this.ignoreFallback(e);else if(!o||o.skip||o.closeParent){o&&o.closeParent?this.open=Math.max(0,this.open-1):o&&o.skip.nodeType&&(e=o.skip);let a,u=this.top,c=this.needsBlock;if(vg.hasOwnProperty(r))a=!0,u.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e);return}this.addAll(e),a&&this.sync(u),this.needsBlock=c}else this.addElementByRule(e,o,o.consuming===!1?i:void 0)}leafFallback(e){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`))}ignoreFallback(e){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))}readStyles(e){let t=Te.none;e:for(let r=0;r<e.length;r+=2)for(let i=void 0;;){let o=this.parser.matchStyle(e[r],e[r+1],this,i);if(!o)continue e;if(o.ignore)return null;if(t=this.parser.schema.marks[o.mark].create(o.attrs).addToSet(t),o.consuming===!1)i=o;else break}return t}addElementByRule(e,t,r){let i,o,a;t.node?(o=this.parser.schema.nodes[t.node],o.isLeaf?this.insertNode(o.create(t.attrs))||this.leafFallback(e):i=this.enter(o,t.attrs||null,t.preserveWhitespace)):(a=this.parser.schema.marks[t.mark].create(t.attrs),this.addPendingMark(a));let u=this.top;if(o&&o.isLeaf)this.findInside(e);else if(r)this.addElement(e,r);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(c=>this.insertNode(c));else{let c=e;typeof t.contentElement=="string"?c=e.querySelector(t.contentElement):typeof t.contentElement=="function"?c=t.contentElement(e):t.contentElement&&(c=t.contentElement),this.findAround(e,c,!0),this.addAll(c)}i&&this.sync(u)&&this.open--,a&&this.removePendingMark(a,u)}addAll(e,t,r){let i=t||0;for(let o=t?e.childNodes[t]:e.firstChild,a=r==null?null:e.childNodes[r];o!=a;o=o.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(o);this.findAtPoint(e,i)}findPlace(e){let t,r;for(let i=this.open;i>=0;i--){let o=this.nodes[i],a=o.findWrapping(e);if(a&&(!t||t.length>a.length)&&(t=a,r=o,!a.length)||o.solid)break}if(!t)return!1;this.sync(r);for(let i=0;i<t.length;i++)this.enterInner(t[i],null,!1);return!0}insertNode(e){if(e.isInline&&this.needsBlock&&!this.top.type){let t=this.textblockFromContext();t&&this.enterInner(t)}if(this.findPlace(e)){this.closeExtra();let t=this.top;t.applyPending(e.type),t.match&&(t.match=t.match.matchType(e.type));let r=t.activeMarks;for(let i=0;i<e.marks.length;i++)(!t.type||t.type.allowsMarkType(e.marks[i].type))&&(r=e.marks[i].addToSet(r));return t.content.push(e.mark(r)),!0}return!1}enter(e,t,r){let i=this.findPlace(e.create(t));return i&&this.enterInner(e,t,!0,r),i}enterInner(e,t=null,r=!1,i){this.closeExtra();let o=this.top;o.applyPending(e),o.match=o.match&&o.match.matchType(e);let a=Ep(e,i,o.options);o.options&po&&o.content.length==0&&(a|=po),this.nodes.push(new Sa(e,t,o.activeMarks,o.pendingMarks,r,null,a)),this.open++}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let t=this.open;t>=0;t--)if(this.nodes[t]==e)return this.open=t,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let r=this.nodes[t].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==t&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,r){if(e!=t&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&t.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),o=-(r?r.depth+1:0)+(i?0:1),a=(u,c)=>{for(;u>=0;u--){let h=t[u];if(h==""){if(u==t.length-1||u==0)continue;for(;c>=o;c--)if(a(u-1,c))return!0;return!1}else{let d=c>0||c==0&&i?this.nodes[c].type:r&&c>=o?r.node(c-o).type:null;if(!d||d.name!=h&&d.groups.indexOf(h)==-1)return!1;c--}}return!0};return a(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let r=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let t in this.parser.schema.nodes){let r=this.parser.schema.nodes[t];if(r.isTextblock&&r.defaultAttrs)return r}}addPendingMark(e){let t=_E(e,this.top.pendingMarks);t&&this.top.stashMarks.push(t),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)}removePendingMark(e,t){for(let r=this.open;r>=0;r--){let i=this.nodes[r];if(i.pendingMarks.lastIndexOf(e)>-1)i.pendingMarks=e.removeFromSet(i.pendingMarks);else{i.activeMarks=e.removeFromSet(i.activeMarks);let a=i.popFromStashMark(e);a&&i.type&&i.type.allowsMarkType(a.type)&&(i.activeMarks=a.addToSet(i.activeMarks))}if(i==t)break}}}function wE(n){for(let e=n.firstChild,t=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&yg.hasOwnProperty(r)&&t?(t.appendChild(e),e=t):r=="li"?t=e:r&&(t=null)}}function CE(n,e){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,e)}function EE(n){let e=/\s*([\w-]+)\s*:\s*([^;]+)/g,t,r=[];for(;t=e.exec(n);)r.push(t[1],t[2].trim());return r}function _p(n){let e={};for(let t in n)e[t]=n[t];return e}function AE(n,e){let t=e.schema.nodes;for(let r in t){let i=t[r];if(!i.allowsMarkType(n))continue;let o=[],a=u=>{o.push(u);for(let c=0;c<u.edgeCount;c++){let{type:h,next:d}=u.edge(c);if(h==e||o.indexOf(d)<0&&a(d))return!0}};if(a(i.contentMatch))return!0}}function _E(n,e){for(let t=0;t<e.length;t++)if(n.eq(e[t]))return e[t]}class Gn{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},r){r||(r=nc(t).createDocumentFragment());let i=r,o=[];return e.forEach(a=>{if(o.length||a.marks.length){let u=0,c=0;for(;u<o.length&&c<a.marks.length;){let h=a.marks[c];if(!this.marks[h.type.name]){c++;continue}if(!h.eq(o[u][0])||h.type.spec.spanning===!1)break;u++,c++}for(;u<o.length;)i=o.pop()[1];for(;c<a.marks.length;){let h=a.marks[c++],d=this.serializeMark(h,a.isInline,t);d&&(o.push([h,i]),i.appendChild(d.dom),i=d.contentDOM||d.dom)}}i.appendChild(this.serializeNodeInner(a,t))}),r}serializeNodeInner(e,t){let{dom:r,contentDOM:i}=Gn.renderSpec(nc(t),this.nodes[e.type.name](e));if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,i)}return r}serializeNode(e,t={}){let r=this.serializeNodeInner(e,t);for(let i=e.marks.length-1;i>=0;i--){let o=this.serializeMark(e.marks[i],e.isInline,t);o&&((o.contentDOM||o.dom).appendChild(r),r=o.dom)}return r}serializeMark(e,t,r={}){let i=this.marks[e.type.name];return i&&Gn.renderSpec(nc(r),i(e,t))}static renderSpec(e,t,r=null){if(typeof t=="string")return{dom:e.createTextNode(t)};if(t.nodeType!=null)return{dom:t};if(t.dom&&t.dom.nodeType!=null)return t;let i=t[0],o=i.indexOf(" ");o>0&&(r=i.slice(0,o),i=i.slice(o+1));let a,u=r?e.createElementNS(r,i):e.createElement(i),c=t[1],h=1;if(c&&typeof c=="object"&&c.nodeType==null&&!Array.isArray(c)){h=2;for(let d in c)if(c[d]!=null){let m=d.indexOf(" ");m>0?u.setAttributeNS(d.slice(0,m),d.slice(m+1),c[d]):u.setAttribute(d,c[d])}}for(let d=h;d<t.length;d++){let m=t[d];if(m===0){if(d<t.length-1||d>h)throw new RangeError("Content hole must be the only child of its parent node");return{dom:u,contentDOM:u}}else{let{dom:g,contentDOM:y}=Gn.renderSpec(e,m,r);if(u.appendChild(g),y){if(a)throw new RangeError("Multiple content holes");a=y}}}return{dom:u,contentDOM:a}}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Gn(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=Sp(e.nodes);return t.text||(t.text=r=>r.text),t}static marksFromSchema(e){return Sp(e.marks)}}function Sp(n){let e={};for(let t in n){let r=n[t].spec.toDOM;r&&(e[t]=r)}return e}function nc(n){return n.document||window.document}const bg=65535,Dg=Math.pow(2,16);function SE(n,e){return n+e*Dg}function kp(n){return n&bg}function kE(n){return(n-(n&bg))/Dg}const xg=1,wg=2,Fa=4,Cg=8;class Tc{constructor(e,t,r){this.pos=e,this.delInfo=t,this.recover=r}get deleted(){return(this.delInfo&Cg)>0}get deletedBefore(){return(this.delInfo&(xg|Fa))>0}get deletedAfter(){return(this.delInfo&(wg|Fa))>0}get deletedAcross(){return(this.delInfo&Fa)>0}}class Mn{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&Mn.empty)return Mn.empty}recover(e){let t=0,r=kp(e);if(!this.inverted)for(let i=0;i<r;i++)t+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+t+kE(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,r){let i=0,o=this.inverted?2:1,a=this.inverted?1:2;for(let u=0;u<this.ranges.length;u+=3){let c=this.ranges[u]-(this.inverted?i:0);if(c>e)break;let h=this.ranges[u+o],d=this.ranges[u+a],m=c+h;if(e<=m){let g=h?e==c?-1:e==m?1:t:t,y=c+i+(g<0?0:d);if(r)return y;let x=e==(t<0?c:m)?null:SE(u/3,e-c),w=e==c?wg:e==m?xg:Fa;return(t<0?e!=c:e!=m)&&(w|=Cg),new Tc(y,w,x)}i+=d-h}return r?e+i:new Tc(e+i,0,null)}touches(e,t){let r=0,i=kp(t),o=this.inverted?2:1,a=this.inverted?1:2;for(let u=0;u<this.ranges.length;u+=3){let c=this.ranges[u]-(this.inverted?r:0);if(c>e)break;let h=this.ranges[u+o],d=c+h;if(e<=d&&u==i*3)return!0;r+=this.ranges[u+a]-h}return!1}forEach(e){let t=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,o=0;i<this.ranges.length;i+=3){let a=this.ranges[i],u=a-(this.inverted?o:0),c=a+(this.inverted?0:o),h=this.ranges[i+t],d=this.ranges[i+r];e(u,u+h,c,c+d),o+=d-h}}invert(){return new Mn(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?Mn.empty:new Mn(e<0?[0,-e,0]:[0,0,e])}}Mn.empty=new Mn([]);class mo{constructor(e=[],t,r=0,i=e.length){this.maps=e,this.mirror=t,this.from=r,this.to=i}slice(e=0,t=this.maps.length){return new mo(this.maps,this.mirror,e,t)}copy(){return new mo(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,t){this.to=this.maps.push(e),t!=null&&this.setMirror(this.maps.length-1,t)}appendMapping(e){for(let t=0,r=this.maps.length;t<e.maps.length;t++){let i=e.getMirror(t);this.appendMap(e.maps[t],i!=null&&i<t?r+i:void 0)}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,r=this.maps.length+e.maps.length;t>=0;t--){let i=e.getMirror(t);this.appendMap(e.maps[t].invert(),i!=null&&i>t?r-i-1:void 0)}}invert(){let e=new mo;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let r=this.from;r<this.to;r++)e=this.maps[r].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,r){let i=0;for(let o=this.from;o<this.to;o++){let a=this.maps[o],u=a.mapResult(e,t);if(u.recover!=null){let c=this.getMirror(o);if(c!=null&&c>o&&c<this.to){o=c,e=this.maps[c].recover(u.recover);continue}}i|=u.delInfo,e=u.pos}return r?e:new Tc(e,i,null)}}const rc=Object.create(null);class Jr{getMap(){return Mn.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=rc[t.stepType];if(!r)throw new RangeError(`No step type ${t.stepType} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in rc)throw new RangeError("Duplicate use of step JSON ID "+e);return rc[e]=t,t.prototype.jsonID=e,t}}class Xt{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new Xt(e,null)}static fail(e){return new Xt(null,e)}static fromReplace(e,t,r,i){try{return Xt.ok(e.replace(t,r,i))}catch(o){if(o instanceof Ao)return Xt.fail(o.message);throw o}}}function of(n,e,t){let r=[];for(let i=0;i<n.childCount;i++){let o=n.child(i);o.content.size&&(o=o.copy(of(o.content,e,o))),o.isInline&&(o=e(o,t,i)),r.push(o)}return L.fromArray(r)}class zr extends Jr{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),o=new G(of(t.content,(a,u)=>!a.isAtom||!u.type.allowsMarkType(this.mark.type)?a:a.mark(this.mark.addToSet(a.marks)),i),t.openStart,t.openEnd);return Xt.fromReplace(e,this.from,this.to,o)}invert(){return new Yn(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new zr(t.pos,r.pos,this.mark)}merge(e){return e instanceof zr&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new zr(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new zr(t.from,t.to,e.markFromJSON(t.mark))}}Jr.jsonID("addMark",zr);class Yn extends Jr{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=new G(of(t.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),t.openStart,t.openEnd);return Xt.fromReplace(e,this.from,this.to,r)}invert(){return new zr(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new Yn(t.pos,r.pos,this.mark)}merge(e){return e instanceof Yn&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Yn(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Yn(t.from,t.to,e.markFromJSON(t.mark))}}Jr.jsonID("removeMark",Yn);class bt extends Jr{constructor(e,t,r,i=!1){super(),this.from=e,this.to=t,this.slice=r,this.structure=i}apply(e){return this.structure&&Mc(e,this.from,this.to)?Xt.fail("Structure replace would overwrite content"):Xt.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new Mn([this.from,this.to-this.from,this.slice.size])}invert(e){return new bt(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deletedAcross&&r.deletedAcross?null:new bt(t.pos,Math.max(t.pos,r.pos),this.slice)}merge(e){if(!(e instanceof bt)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let t=this.slice.size+e.slice.size==0?G.empty:new G(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new bt(this.from,this.to+(e.to-e.from),t,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let t=this.slice.size+e.slice.size==0?G.empty:new G(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new bt(e.from,this.to,t,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new bt(t.from,t.to,G.fromJSON(e,t.slice),!!t.structure)}}Jr.jsonID("replace",bt);class it extends Jr{constructor(e,t,r,i,o,a,u=!1){super(),this.from=e,this.to=t,this.gapFrom=r,this.gapTo=i,this.slice=o,this.insert=a,this.structure=u}apply(e){if(this.structure&&(Mc(e,this.from,this.gapFrom)||Mc(e,this.gapTo,this.to)))return Xt.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return Xt.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,t.content);return r?Xt.fromReplace(e,this.from,this.to,r):Xt.fail("Content does not fit in gap")}getMap(){return new Mn([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new it(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=e.map(this.gapFrom,-1),o=e.map(this.gapTo,1);return t.deletedAcross&&r.deletedAcross||i<t.pos||o>r.pos?null:new it(t.pos,r.pos,i,o,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number"||typeof t.gapFrom!="number"||typeof t.gapTo!="number"||typeof t.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new it(t.from,t.to,t.gapFrom,t.gapTo,G.fromJSON(e,t.slice),t.insert,!!t.structure)}}Jr.jsonID("replaceAround",it);function Mc(n,e,t){let r=n.resolve(e),i=t-e,o=r.depth;for(;i>0&&o>0&&r.indexAfter(o)==r.node(o).childCount;)o--,i--;if(i>0){let a=r.node(o).maybeChild(r.indexAfter(o));for(;i>0;){if(!a||a.isLeaf)return!0;a=a.firstChild,i--}}return!1}function OE(n,e,t,r){let i=[],o=[],a,u;n.doc.nodesBetween(e,t,(c,h,d)=>{if(!c.isInline)return;let m=c.marks;if(!r.isInSet(m)&&d.type.allowsMarkType(r.type)){let g=Math.max(h,e),y=Math.min(h+c.nodeSize,t),x=r.addToSet(m);for(let w=0;w<m.length;w++)m[w].isInSet(x)||(a&&a.to==g&&a.mark.eq(m[w])?a.to=y:i.push(a=new Yn(g,y,m[w])));u&&u.to==g?u.to=y:o.push(u=new zr(g,y,r))}}),i.forEach(c=>n.step(c)),o.forEach(c=>n.step(c))}function TE(n,e,t,r){let i=[],o=0;n.doc.nodesBetween(e,t,(a,u)=>{if(!a.isInline)return;o++;let c=null;if(r instanceof xl){let h=a.marks,d;for(;d=r.isInSet(h);)(c||(c=[])).push(d),h=d.removeFromSet(h)}else r?r.isInSet(a.marks)&&(c=[r]):c=a.marks;if(c&&c.length){let h=Math.min(u+a.nodeSize,t);for(let d=0;d<c.length;d++){let m=c[d],g;for(let y=0;y<i.length;y++){let x=i[y];x.step==o-1&&m.eq(i[y].style)&&(g=x)}g?(g.to=h,g.step=o):i.push({style:m,from:Math.max(u,e),to:h,step:o})}}}),i.forEach(a=>n.step(new Yn(a.from,a.to,a.style)))}function ME(n,e,t,r=t.contentMatch){let i=n.doc.nodeAt(e),o=[],a=e+1;for(let u=0;u<i.childCount;u++){let c=i.child(u),h=a+c.nodeSize,d=r.matchType(c.type);if(!d)o.push(new bt(a,h,G.empty));else{r=d;for(let m=0;m<c.marks.length;m++)t.allowsMarkType(c.marks[m].type)||n.step(new Yn(a,h,c.marks[m]))}a=h}if(!r.validEnd){let u=r.fillBefore(L.empty,!0);n.replace(a,a,new G(u,0,0))}for(let u=o.length-1;u>=0;u--)n.step(o[u])}function FE(n,e,t){return(e==0||n.canReplace(e,n.childCount))&&(t==n.childCount||n.canReplace(0,t))}function Os(n){let t=n.parent.content.cutByIndex(n.startIndex,n.endIndex);for(let r=n.depth;;--r){let i=n.$from.node(r),o=n.$from.index(r),a=n.$to.indexAfter(r);if(r<n.depth&&i.canReplace(o,a,t))return r;if(r==0||i.type.spec.isolating||!FE(i,o,a))break}return null}function NE(n,e,t){let{$from:r,$to:i,depth:o}=e,a=r.before(o+1),u=i.after(o+1),c=a,h=u,d=L.empty,m=0;for(let x=o,w=!1;x>t;x--)w||r.index(x)>0?(w=!0,d=L.from(r.node(x).copy(d)),m++):c--;let g=L.empty,y=0;for(let x=o,w=!1;x>t;x--)w||i.after(x+1)<i.end(x)?(w=!0,g=L.from(i.node(x).copy(g)),y++):h++;n.step(new it(c,h,a,u,new G(d.append(g),m,y),d.size-m,!0))}function Eg(n,e,t=null,r=n){let i=RE(n,e),o=i&&BE(r,e);return o?i.map(Op).concat({type:e,attrs:t}).concat(o.map(Op)):null}function Op(n){return{type:n,attrs:null}}function RE(n,e){let{parent:t,startIndex:r,endIndex:i}=n,o=t.contentMatchAt(r).findWrapping(e);if(!o)return null;let a=o.length?o[0]:e;return t.canReplaceWith(r,i,a)?o:null}function BE(n,e){let{parent:t,startIndex:r,endIndex:i}=n,o=t.child(r),a=e.contentMatch.findWrapping(o.type);if(!a)return null;let c=(a.length?a[a.length-1]:e).contentMatch;for(let h=r;c&&h<i;h++)c=c.matchType(t.child(h).type);return!c||!c.validEnd?null:a}function IE(n,e,t){let r=L.empty;for(let a=t.length-1;a>=0;a--){if(r.size){let u=t[a].type.contentMatch.matchFragment(r);if(!u||!u.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=L.from(t[a].type.create(t[a].attrs,r))}let i=e.start,o=e.end;n.step(new it(i,o,i,o,new G(r,0,0),t.length,!0))}function PE(n,e,t,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let o=n.steps.length;n.doc.nodesBetween(e,t,(a,u)=>{if(a.isTextblock&&!a.hasMarkup(r,i)&&LE(n.doc,n.mapping.slice(o).map(u),r)){n.clearIncompatible(n.mapping.slice(o).map(u,1),r);let c=n.mapping.slice(o),h=c.map(u,1),d=c.map(u+a.nodeSize,1);return n.step(new it(h,d,h+1,d-1,new G(L.from(r.create(i,null,a.marks)),0,0),1,!0)),!1}})}function LE(n,e,t){let r=n.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,t)}function zE(n,e,t,r,i){let o=n.doc.nodeAt(e);if(!o)throw new RangeError("No node at given position");t||(t=o.type);let a=t.create(r,null,i||o.marks);if(o.isLeaf)return n.replaceWith(e,e+o.nodeSize,a);if(!t.validContent(o.content))throw new RangeError("Invalid content for node type "+t.name);n.step(new it(e,e+o.nodeSize,e+1,e+o.nodeSize-1,new G(L.from(a),0,0),1,!0))}function hs(n,e,t=1,r){let i=n.resolve(e),o=i.depth-t,a=r&&r[r.length-1]||i.parent;if(o<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!a.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let h=i.depth-1,d=t-2;h>o;h--,d--){let m=i.node(h),g=i.index(h);if(m.type.spec.isolating)return!1;let y=m.content.cutByIndex(g,m.childCount),x=r&&r[d]||m;if(x!=m&&(y=y.replaceChild(0,x.type.create(x.attrs))),!m.canReplace(g+1,m.childCount)||!x.type.validContent(y))return!1}let u=i.indexAfter(o),c=r&&r[0];return i.node(o).canReplaceWith(u,u,c?c.type:i.node(o+1).type)}function $E(n,e,t=1,r){let i=n.doc.resolve(e),o=L.empty,a=L.empty;for(let u=i.depth,c=i.depth-t,h=t-1;u>c;u--,h--){o=L.from(i.node(u).copy(o));let d=r&&r[h];a=L.from(d?d.type.create(d.attrs,a):i.node(u).copy(a))}n.step(new bt(e,e,new G(o.append(a),t,t),!0))}function wl(n,e){let t=n.resolve(e),r=t.index();return HE(t.nodeBefore,t.nodeAfter)&&t.parent.canReplace(r,r+1)}function HE(n,e){return!!(n&&e&&!n.isLeaf&&n.canAppend(e))}function VE(n,e,t){let r=new bt(e-t,e+t,G.empty,!0);n.step(r)}function WE(n,e,t){let r=n.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),t))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let o=r.index(i);if(r.node(i).canReplaceWith(o,o,t))return r.before(i+1);if(o>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let o=r.indexAfter(i);if(r.node(i).canReplaceWith(o,o,t))return r.after(i+1);if(o<r.node(i).childCount)return null}return null}function UE(n,e,t){let r=n.resolve(e);if(!t.content.size)return e;let i=t.content;for(let o=0;o<t.openStart;o++)i=i.firstChild.content;for(let o=1;o<=(t.openStart==0&&t.size?2:1);o++)for(let a=r.depth;a>=0;a--){let u=a==r.depth?0:r.pos<=(r.start(a+1)+r.end(a+1))/2?-1:1,c=r.index(a)+(u>0?1:0),h=r.node(a),d=!1;if(o==1)d=h.canReplace(c,c,i);else{let m=h.contentMatchAt(c).findWrapping(i.firstChild.type);d=m&&h.canReplaceWith(c,c,m[0])}if(d)return u==0?r.pos:u<0?r.before(a+1):r.after(a+1)}return null}function af(n,e,t=e,r=G.empty){if(e==t&&!r.size)return null;let i=n.resolve(e),o=n.resolve(t);return Ag(i,o,r)?new bt(e,t,r):new qE(i,o,r).fit()}function Ag(n,e,t){return!t.openStart&&!t.openEnd&&n.start()==e.start()&&n.parent.canReplace(n.index(),e.index(),t.content)}class qE{constructor(e,t,r){this.$from=e,this.$to=t,this.unplaced=r,this.frontier=[],this.placed=L.empty;for(let i=0;i<=e.depth;i++){let o=e.node(i);this.frontier.push({type:o.type,match:o.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=L.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let h=this.findFittable();h?this.placeNodes(h):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let o=this.placed,a=r.depth,u=i.depth;for(;a&&u&&o.childCount==1;)o=o.firstChild.content,a--,u--;let c=new G(o,a,u);return e>-1?new it(r.pos,e,this.$to.pos,this.$to.end(),c,t):c.size||r.pos!=this.$to.pos?new bt(r.pos,i.pos,c):null}findFittable(){for(let e=1;e<=2;e++)for(let t=this.unplaced.openStart;t>=0;t--){let r,i=null;t?(i=ic(this.unplaced.content,t-1).firstChild,r=i.content):r=this.unplaced.content;let o=r.firstChild;for(let a=this.depth;a>=0;a--){let{type:u,match:c}=this.frontier[a],h,d=null;if(e==1&&(o?c.matchType(o.type)||(d=c.fillBefore(L.from(o),!1)):i&&u.compatibleContent(i.type)))return{sliceDepth:t,frontierDepth:a,parent:i,inject:d};if(e==2&&o&&(h=c.findWrapping(o.type)))return{sliceDepth:t,frontierDepth:a,parent:i,wrap:h};if(i&&c.matchType(i.type))break}}}openMore(){let{content:e,openStart:t,openEnd:r}=this.unplaced,i=ic(e,t);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new G(e,t+1,Math.max(r,i.size+t>=e.size-r?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:r}=this.unplaced,i=ic(e,t);if(i.childCount<=1&&t>0){let o=e.size-t<=t+i.size;this.unplaced=new G(lo(e,t-1,1),t-1,o?t-1:r)}else this.unplaced=new G(lo(e,t,1),t,r)}placeNodes({sliceDepth:e,frontierDepth:t,parent:r,inject:i,wrap:o}){for(;this.depth>t;)this.closeFrontierNode();if(o)for(let w=0;w<o.length;w++)this.openFrontierNode(o[w]);let a=this.unplaced,u=r?r.content:a.content,c=a.openStart-e,h=0,d=[],{match:m,type:g}=this.frontier[t];if(i){for(let w=0;w<i.childCount;w++)d.push(i.child(w));m=m.matchFragment(i)}let y=u.size+e-(a.content.size-a.openEnd);for(;h<u.childCount;){let w=u.child(h),_=m.matchType(w.type);if(!_)break;h++,(h>1||c==0||w.content.size)&&(m=_,d.push(_g(w.mark(g.allowedMarks(w.marks)),h==1?c:0,h==u.childCount?y:-1)))}let x=h==u.childCount;x||(y=-1),this.placed=uo(this.placed,t,L.from(d)),this.frontier[t].match=m,x&&y<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let w=0,_=u;w<y;w++){let O=_.lastChild;this.frontier.push({type:O.type,match:O.contentMatchAt(O.childCount)}),_=O.content}this.unplaced=x?e==0?G.empty:new G(lo(a.content,e-1,1),e-1,y<0?a.openEnd:e-1):new G(lo(a.content,e,h),a.openStart,a.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!sc(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:r,type:i}=this.frontier[t],o=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),a=sc(e,t,i,r,o);if(!!a){for(let u=t-1;u>=0;u--){let{match:c,type:h}=this.frontier[u],d=sc(e,u,h,c,!0);if(!d||d.childCount)continue e}return{depth:t,fit:a,move:o?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=uo(this.placed,t.depth,t.fit)),e=t.move;for(let r=t.depth+1;r<=e.depth;r++){let i=e.node(r),o=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,o)}return e}openFrontierNode(e,t=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=uo(this.placed,this.depth,L.from(e.create(t,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(L.empty,!0);t.childCount&&(this.placed=uo(this.placed,this.frontier.length,t))}}function lo(n,e,t){return e==0?n.cutByIndex(t,n.childCount):n.replaceChild(0,n.firstChild.copy(lo(n.firstChild.content,e-1,t)))}function uo(n,e,t){return e==0?n.append(t):n.replaceChild(n.childCount-1,n.lastChild.copy(uo(n.lastChild.content,e-1,t)))}function ic(n,e){for(let t=0;t<e;t++)n=n.firstChild.content;return n}function _g(n,e,t){if(e<=0)return n;let r=n.content;return e>1&&(r=r.replaceChild(0,_g(r.firstChild,e-1,r.childCount==1?t-1:0))),e>0&&(r=n.type.contentMatch.fillBefore(r).append(r),t<=0&&(r=r.append(n.type.contentMatch.matchFragment(r).fillBefore(L.empty,!0)))),n.copy(r)}function sc(n,e,t,r,i){let o=n.node(e),a=i?n.indexAfter(e):n.index(e);if(a==o.childCount&&!t.compatibleContent(o.type))return null;let u=r.fillBefore(o.content,!0,a);return u&&!KE(t,o.content,a)?u:null}function KE(n,e,t){for(let r=t;r<e.childCount;r++)if(!n.allowsMarks(e.child(r).marks))return!0;return!1}function jE(n){return n.spec.defining||n.spec.definingForContent}function JE(n,e,t,r){if(!r.size)return n.deleteRange(e,t);let i=n.doc.resolve(e),o=n.doc.resolve(t);if(Ag(i,o,r))return n.step(new bt(e,t,r));let a=kg(i,n.doc.resolve(t));a[a.length-1]==0&&a.pop();let u=-(i.depth+1);a.unshift(u);for(let g=i.depth,y=i.pos-1;g>0;g--,y--){let x=i.node(g).type.spec;if(x.defining||x.definingAsContext||x.isolating)break;a.indexOf(g)>-1?u=g:i.before(g)==y&&a.splice(1,0,-g)}let c=a.indexOf(u),h=[],d=r.openStart;for(let g=r.content,y=0;;y++){let x=g.firstChild;if(h.push(x),y==r.openStart)break;g=x.content}for(let g=d-1;g>=0;g--){let y=h[g].type,x=jE(y);if(x&&i.node(c).type!=y)d=g;else if(x||!y.isTextblock)break}for(let g=r.openStart;g>=0;g--){let y=(g+d+1)%(r.openStart+1),x=h[y];if(!!x)for(let w=0;w<a.length;w++){let _=a[(w+c)%a.length],O=!0;_<0&&(O=!1,_=-_);let P=i.node(_-1),z=i.index(_-1);if(P.canReplaceWith(z,z,x.type,x.marks))return n.replace(i.before(_),O?o.after(_):t,new G(Sg(r.content,0,r.openStart,y),y,r.openEnd))}}let m=n.steps.length;for(let g=a.length-1;g>=0&&(n.replace(e,t,r),!(n.steps.length>m));g--){let y=a[g];y<0||(e=i.before(y),t=o.after(y))}}function Sg(n,e,t,r,i){if(e<t){let o=n.firstChild;n=n.replaceChild(0,o.copy(Sg(o.content,e+1,t,r,o)))}if(e>r){let o=i.contentMatchAt(0),a=o.fillBefore(n).append(n);n=a.append(o.matchFragment(a).fillBefore(L.empty,!0))}return n}function GE(n,e,t,r){if(!r.isInline&&e==t&&n.doc.resolve(e).parent.content.size){let i=WE(n.doc,e,r.type);i!=null&&(e=t=i)}n.replaceRange(e,t,new G(L.from(r),0,0))}function YE(n,e,t){let r=n.doc.resolve(e),i=n.doc.resolve(t),o=kg(r,i);for(let a=0;a<o.length;a++){let u=o[a],c=a==o.length-1;if(c&&u==0||r.node(u).type.contentMatch.validEnd)return n.delete(r.start(u),i.end(u));if(u>0&&(c||r.node(u-1).canReplace(r.index(u-1),i.indexAfter(u-1))))return n.delete(r.before(u),i.after(u))}for(let a=1;a<=r.depth&&a<=i.depth;a++)if(e-r.start(a)==r.depth-a&&t>r.end(a)&&i.end(a)-t!=i.depth-a)return n.delete(r.before(a),t);n.delete(e,t)}function kg(n,e){let t=[],r=Math.min(n.depth,e.depth);for(let i=r;i>=0;i--){let o=n.start(i);if(o<n.pos-(n.depth-i)||e.end(i)>e.pos+(e.depth-i)||n.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(o==e.start(i)||i==n.depth&&i==e.depth&&n.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==o-1)&&t.push(i)}return t}let vs=class extends Error{};vs=function n(e){let t=Error.call(this,e);return t.__proto__=n.prototype,t};vs.prototype=Object.create(Error.prototype);vs.prototype.constructor=vs;vs.prototype.name="TransformError";class Og{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new mo}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new vs(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,r=G.empty){let i=af(this.doc,e,t,r);return i&&this.step(i),this}replaceWith(e,t,r){return this.replace(e,t,new G(L.from(r),0,0))}delete(e,t){return this.replace(e,t,G.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,r){return JE(this,e,t,r),this}replaceRangeWith(e,t,r){return GE(this,e,t,r),this}deleteRange(e,t){return YE(this,e,t),this}lift(e,t){return NE(this,e,t),this}join(e,t=1){return VE(this,e,t),this}wrap(e,t){return IE(this,e,t),this}setBlockType(e,t=e,r,i=null){return PE(this,e,t,r,i),this}setNodeMarkup(e,t,r=null,i=[]){return zE(this,e,t,r,i),this}split(e,t=1,r){return $E(this,e,t,r),this}addMark(e,t,r){return OE(this,e,t,r),this}removeMark(e,t,r){return TE(this,e,t,r),this}clearIncompatible(e,t,r){return ME(this,e,t,r),this}}const oc=Object.create(null);class pe{constructor(e,t,r){this.$anchor=e,this.$head=t,this.ranges=r||[new XE(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=G.empty){let r=t.content.lastChild,i=null;for(let u=0;u<t.openEnd;u++)i=r,r=r.lastChild;let o=e.steps.length,a=this.ranges;for(let u=0;u<a.length;u++){let{$from:c,$to:h}=a[u],d=e.mapping.slice(o);e.replaceRange(d.map(c.pos),d.map(h.pos),u?G.empty:t),u==0&&Fp(e,o,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,t){let r=e.steps.length,i=this.ranges;for(let o=0;o<i.length;o++){let{$from:a,$to:u}=i[o],c=e.mapping.slice(r),h=c.map(a.pos),d=c.map(u.pos);o?e.deleteRange(h,d):(e.replaceRangeWith(h,d,t),Fp(e,r,t.isInline?-1:1))}}static findFrom(e,t,r=!1){let i=e.parent.inlineContent?new be(e):Zi(e.node(0),e.parent,e.pos,e.index(),t,r);if(i)return i;for(let o=e.depth-1;o>=0;o--){let a=t<0?Zi(e.node(0),e.node(o),e.before(o+1),e.index(o),t,r):Zi(e.node(0),e.node(o),e.after(o+1),e.index(o)+1,t,r);if(a)return a}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new Rn(e.node(0))}static atStart(e){return Zi(e,e,0,0,1)||new Rn(e)}static atEnd(e){return Zi(e,e,e.content.size,e.childCount,-1)||new Rn(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=oc[t.type];if(!r)throw new RangeError(`No selection type ${t.type} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in oc)throw new RangeError("Duplicate use of selection JSON ID "+e);return oc[e]=t,t.prototype.jsonID=e,t}getBookmark(){return be.between(this.$anchor,this.$head).getBookmark()}}pe.prototype.visible=!0;class XE{constructor(e,t){this.$from=e,this.$to=t}}let Tp=!1;function Mp(n){!Tp&&!n.parent.inlineContent&&(Tp=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+n.parent.type.name+")"))}class be extends pe{constructor(e,t=e){Mp(e),Mp(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let r=e.resolve(t.map(this.head));if(!r.parent.inlineContent)return pe.near(r);let i=e.resolve(t.map(this.anchor));return new be(i.parent.inlineContent?i:r,r)}replace(e,t=G.empty){if(super.replace(e,t),t==G.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof be&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new Cl(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if(typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new be(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,r=t){let i=e.resolve(t);return new this(i,r==t?i:e.resolve(r))}static between(e,t,r){let i=e.pos-t.pos;if((!r||i)&&(r=i>=0?1:-1),!t.parent.inlineContent){let o=pe.findFrom(t,r,!0)||pe.findFrom(t,-r,!0);if(o)t=o.$head;else return pe.near(t,r)}return e.parent.inlineContent||(i==0?e=t:(e=(pe.findFrom(e,-r,!0)||pe.findFrom(e,r,!0)).$anchor,e.pos<t.pos!=i<0&&(e=t))),new be(e,t)}}pe.jsonID("text",be);class Cl{constructor(e,t){this.anchor=e,this.head=t}map(e){return new Cl(e.map(this.anchor),e.map(this.head))}resolve(e){return be.between(e.resolve(this.anchor),e.resolve(this.head))}}class ie extends pe{constructor(e){let t=e.nodeAfter,r=e.node(0).resolve(e.pos+t.nodeSize);super(e,r),this.node=t}map(e,t){let{deleted:r,pos:i}=t.mapResult(this.anchor),o=e.resolve(i);return r?pe.near(o):new ie(o)}content(){return new G(L.from(this.node),0,0)}eq(e){return e instanceof ie&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new lf(this.anchor)}static fromJSON(e,t){if(typeof t.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new ie(e.resolve(t.anchor))}static create(e,t){return new ie(e.resolve(t))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}ie.prototype.visible=!1;pe.jsonID("node",ie);class lf{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:r}=e.mapResult(this.anchor);return t?new Cl(r,r):new lf(r)}resolve(e){let t=e.resolve(this.anchor),r=t.nodeAfter;return r&&ie.isSelectable(r)?new ie(t):pe.near(t)}}class Rn extends pe{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=G.empty){if(t==G.empty){e.delete(0,e.doc.content.size);let r=pe.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new Rn(e)}map(e){return new Rn(e)}eq(e){return e instanceof Rn}getBookmark(){return ZE}}pe.jsonID("all",Rn);const ZE={map(){return this},resolve(n){return new Rn(n)}};function Zi(n,e,t,r,i,o=!1){if(e.inlineContent)return be.create(n,t);for(let a=r-(i>0?0:1);i>0?a<e.childCount:a>=0;a+=i){let u=e.child(a);if(u.isAtom){if(!o&&ie.isSelectable(u))return ie.create(n,t-(i<0?u.nodeSize:0))}else{let c=Zi(n,u,t+i,i<0?u.childCount:0,i,o);if(c)return c}t+=u.nodeSize*i}return null}function Fp(n,e,t){let r=n.steps.length-1;if(r<e)return;let i=n.steps[r];if(!(i instanceof bt||i instanceof it))return;let o=n.mapping.maps[r],a;o.forEach((u,c,h,d)=>{a==null&&(a=d)}),n.setSelection(pe.near(n.doc.resolve(a),t))}const Np=1,ka=2,Rp=4;class QE extends Og{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|Np)&~ka,this.storedMarks=null,this}get selectionSet(){return(this.updated&Np)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=ka,this}ensureMarks(e){return Te.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&ka)>0}addStep(e,t){super.addStep(e,t),this.updated=this.updated&~ka,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let r=this.selection;return t&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||Te.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,r){let i=this.doc.type.schema;if(t==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=t),r=r==null?t:r,!e)return this.deleteRange(t,r);let o=this.storedMarks;if(!o){let a=this.doc.resolve(t);o=r==t?a.marks():a.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(t,r,i.text(e,o)),this.selection.empty||this.setSelection(pe.near(this.selection.$to)),this}}setMeta(e,t){return this.meta[typeof e=="string"?e:e.key]=t,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=Rp,this}get scrolledIntoView(){return(this.updated&Rp)>0}}function Bp(n,e){return!e||!n?n:n.bind(e)}class co{constructor(e,t,r){this.name=e,this.init=Bp(t.init,r),this.apply=Bp(t.apply,r)}}const eA=[new co("doc",{init(n){return n.doc||n.schema.topNodeType.createAndFill()},apply(n){return n.doc}}),new co("selection",{init(n,e){return n.selection||pe.atStart(e.doc)},apply(n){return n.selection}}),new co("storedMarks",{init(n){return n.storedMarks||null},apply(n,e,t,r){return r.selection.$cursor?n.storedMarks:null}}),new co("scrollToSelection",{init(){return 0},apply(n,e){return n.scrolledIntoView?e+1:e}})];class ac{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=eA.slice(),t&&t.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new co(r.key,r.spec.state,r))})}}class ts{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=t){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],r=this.applyInner(e),i=null;for(;;){let o=!1;for(let a=0;a<this.config.plugins.length;a++){let u=this.config.plugins[a];if(u.spec.appendTransaction){let c=i?i[a].n:0,h=i?i[a].state:this,d=c<t.length&&u.spec.appendTransaction.call(u,c?t.slice(c):t,h,r);if(d&&r.filterTransaction(d,a)){if(d.setMeta("appendedTransaction",e),!i){i=[];for(let m=0;m<this.config.plugins.length;m++)i.push(m<a?{state:r,n:t.length}:{state:this,n:0})}t.push(d),r=r.applyInner(d),o=!0}i&&(i[a]={state:r,n:t.length})}}if(!o)return{state:r,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let t=new ts(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let o=r[i];t[o.name]=o.apply(e,this[o.name],this,t)}return t}get tr(){return new QE(this)}static create(e){let t=new ac(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new ts(t);for(let i=0;i<t.fields.length;i++)r[t.fields[i].name]=t.fields[i].init(e,r);return r}reconfigure(e){let t=new ac(this.schema,e.plugins),r=t.fields,i=new ts(t);for(let o=0;o<r.length;o++){let a=r[o].name;i[a]=this.hasOwnProperty(a)?this[a]:r[o].init(e,i)}return i}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],o=i.spec.state;o&&o.toJSON&&(t[r]=o.toJSON.call(i,this[i.key]))}return t}static fromJSON(e,t,r){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new ac(e.schema,e.plugins),o=new ts(i);return i.fields.forEach(a=>{if(a.name=="doc")o.doc=Zn.fromJSON(e.schema,t.doc);else if(a.name=="selection")o.selection=pe.fromJSON(o.doc,t.selection);else if(a.name=="storedMarks")t.storedMarks&&(o.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let u in r){let c=r[u],h=c.spec.state;if(c.key==a.name&&h&&h.fromJSON&&Object.prototype.hasOwnProperty.call(t,u)){o[a.name]=h.fromJSON.call(c,e,t[u],o);return}}o[a.name]=a.init(e,o)}}),o}}function Tg(n,e,t){for(let r in n){let i=n[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=Tg(i,e,{})),t[r]=i}return t}class tn{constructor(e){this.spec=e,this.props={},e.props&&Tg(e.props,this,this.props),this.key=e.key?e.key.key:Mg("plugin")}getState(e){return e[this.key]}}const lc=Object.create(null);function Mg(n){return n in lc?n+"$"+ ++lc[n]:(lc[n]=0,n+"$")}class rr{constructor(e="key"){this.key=Mg(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const qr=typeof navigator<"u"?navigator:null,Ip=typeof document<"u"?document:null,Gr=qr&&qr.userAgent||"",Fc=/Edge\/(\d+)/.exec(Gr),Fg=/MSIE \d/.exec(Gr),Nc=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Gr),Qt=!!(Fg||Nc||Fc),Hr=Fg?document.documentMode:Nc?+Nc[1]:Fc?+Fc[1]:0,er=!Qt&&/gecko\/(\d+)/i.test(Gr);er&&+(/Firefox\/(\d+)/.exec(Gr)||[0,0])[1];const Rc=!Qt&&/Chrome\/(\d+)/.exec(Gr),kt=!!Rc,tA=Rc?+Rc[1]:0,Ht=!Qt&&!!qr&&/Apple Computer/.test(qr.vendor),ys=Ht&&(/Mobile\/\w+/.test(Gr)||!!qr&&qr.maxTouchPoints>2),gn=ys||(qr?/Mac/.test(qr.platform):!1),jn=/Android \d/.test(Gr),El=!!Ip&&"webkitFontSmoothing"in Ip.documentElement.style,nA=El?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,Yt=function(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e},uf=function(n){let e=n.assignedSlot||n.parentNode;return e&&e.nodeType==11?e.host:e};let Pp=null;const vr=function(n,e,t){let r=Pp||(Pp=document.createRange());return r.setEnd(n,t==null?n.nodeValue.length:t),r.setStart(n,e||0),r},So=function(n,e,t,r){return t&&(Lp(n,e,t,r,-1)||Lp(n,e,t,r,1))},rA=/^(img|br|input|textarea|hr)$/i;function Lp(n,e,t,r,i){for(;;){if(n==t&&e==r)return!0;if(e==(i<0?0:Jn(n))){let o=n.parentNode;if(!o||o.nodeType!=1||sA(n)||rA.test(n.nodeName)||n.contentEditable=="false")return!1;e=Yt(n)+(i<0?0:1),n=o}else if(n.nodeType==1){if(n=n.childNodes[e+(i<0?-1:0)],n.contentEditable=="false")return!1;e=i<0?Jn(n):0}else return!1}}function Jn(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function iA(n,e,t){for(let r=e==0,i=e==Jn(n);r||i;){if(n==t)return!0;let o=Yt(n);if(n=n.parentNode,!n)return!1;r=r&&o==0,i=i&&o==Jn(n)}}function sA(n){let e;for(let t=n;t&&!(e=t.pmViewDesc);t=t.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==n||e.contentDOM==n)}const cf=function(n){let e=n.isCollapsed;return e&&kt&&n.rangeCount&&!n.getRangeAt(0).collapsed&&(e=!1),e};function ns(n,e){let t=document.createEvent("Event");return t.initEvent("keydown",!0,!0),t.keyCode=n,t.key=t.code=e,t}function oA(n){return{left:0,right:n.documentElement.clientWidth,top:0,bottom:n.documentElement.clientHeight}}function Rr(n,e){return typeof n=="number"?n:n[e]}function aA(n){let e=n.getBoundingClientRect(),t=e.width/n.offsetWidth||1,r=e.height/n.offsetHeight||1;return{left:e.left,right:e.left+n.clientWidth*t,top:e.top,bottom:e.top+n.clientHeight*r}}function zp(n,e,t){let r=n.someProp("scrollThreshold")||0,i=n.someProp("scrollMargin")||5,o=n.dom.ownerDocument;for(let a=t||n.dom;a;a=uf(a)){if(a.nodeType!=1)continue;let u=a,c=u==o.body,h=c?oA(o):aA(u),d=0,m=0;if(e.top<h.top+Rr(r,"top")?m=-(h.top-e.top+Rr(i,"top")):e.bottom>h.bottom-Rr(r,"bottom")&&(m=e.bottom-h.bottom+Rr(i,"bottom")),e.left<h.left+Rr(r,"left")?d=-(h.left-e.left+Rr(i,"left")):e.right>h.right-Rr(r,"right")&&(d=e.right-h.right+Rr(i,"right")),d||m)if(c)o.defaultView.scrollBy(d,m);else{let g=u.scrollLeft,y=u.scrollTop;m&&(u.scrollTop+=m),d&&(u.scrollLeft+=d);let x=u.scrollLeft-g,w=u.scrollTop-y;e={left:e.left-x,top:e.top-w,right:e.right-x,bottom:e.bottom-w}}if(c)break}}function lA(n){let e=n.dom.getBoundingClientRect(),t=Math.max(0,e.top),r,i;for(let o=(e.left+e.right)/2,a=t+1;a<Math.min(innerHeight,e.bottom);a+=5){let u=n.root.elementFromPoint(o,a);if(!u||u==n.dom||!n.dom.contains(u))continue;let c=u.getBoundingClientRect();if(c.top>=t-20){r=u,i=c.top;break}}return{refDOM:r,refTop:i,stack:Ng(n.dom)}}function Ng(n){let e=[],t=n.ownerDocument;for(let r=n;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),n!=t);r=uf(r));return e}function uA({refDOM:n,refTop:e,stack:t}){let r=n?n.getBoundingClientRect().top:0;Rg(t,r==0?0:r-e)}function Rg(n,e){for(let t=0;t<n.length;t++){let{dom:r,top:i,left:o}=n[t];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=o&&(r.scrollLeft=o)}}let Yi=null;function cA(n){if(n.setActive)return n.setActive();if(Yi)return n.focus(Yi);let e=Ng(n);n.focus(Yi==null?{get preventScroll(){return Yi={preventScroll:!0},!0}}:void 0),Yi||(Yi=!1,Rg(e,0))}function Bg(n,e){let t,r=2e8,i,o=0,a=e.top,u=e.top;for(let c=n.firstChild,h=0;c;c=c.nextSibling,h++){let d;if(c.nodeType==1)d=c.getClientRects();else if(c.nodeType==3)d=vr(c).getClientRects();else continue;for(let m=0;m<d.length;m++){let g=d[m];if(g.top<=a&&g.bottom>=u){a=Math.max(g.bottom,a),u=Math.min(g.top,u);let y=g.left>e.left?g.left-e.left:g.right<e.left?e.left-g.right:0;if(y<r){t=c,r=y,i=y&&t.nodeType==3?{left:g.right<e.left?g.right:g.left,top:e.top}:e,c.nodeType==1&&y&&(o=h+(e.left>=(g.left+g.right)/2?1:0));continue}}!t&&(e.left>=g.right&&e.top>=g.top||e.left>=g.left&&e.top>=g.bottom)&&(o=h+1)}}return t&&t.nodeType==3?fA(t,i):!t||r&&t.nodeType==1?{node:n,offset:o}:Bg(t,i)}function fA(n,e){let t=n.nodeValue.length,r=document.createRange();for(let i=0;i<t;i++){r.setEnd(n,i+1),r.setStart(n,i);let o=Br(r,1);if(o.top!=o.bottom&&ff(e,o))return{node:n,offset:i+(e.left>=(o.left+o.right)/2?1:0)}}return{node:n,offset:0}}function ff(n,e){return n.left>=e.left-1&&n.left<=e.right+1&&n.top>=e.top-1&&n.top<=e.bottom+1}function dA(n,e){let t=n.parentNode;return t&&/^li$/i.test(t.nodeName)&&e.left<n.getBoundingClientRect().left?t:n}function hA(n,e,t){let{node:r,offset:i}=Bg(e,t),o=-1;if(r.nodeType==1&&!r.firstChild){let a=r.getBoundingClientRect();o=a.left!=a.right&&t.left>(a.left+a.right)/2?1:-1}return n.docView.posFromDOM(r,i,o)}function pA(n,e,t,r){let i=-1;for(let o=e;o!=n.dom;){let a=n.docView.nearestDesc(o,!0);if(!a)return null;if(a.node.isBlock&&a.parent){let u=a.dom.getBoundingClientRect();if(u.left>r.left||u.top>r.top)i=a.posBefore;else if(u.right<r.left||u.bottom<r.top)i=a.posAfter;else break}o=a.dom.parentNode}return i>-1?i:n.docView.posFromDOM(e,t,1)}function Ig(n,e,t){let r=n.childNodes.length;if(r&&t.top<t.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-t.top)/(t.bottom-t.top))-2)),o=i;;){let a=n.childNodes[o];if(a.nodeType==1){let u=a.getClientRects();for(let c=0;c<u.length;c++){let h=u[c];if(ff(e,h))return Ig(a,e,h)}}if((o=(o+1)%r)==i)break}return n}function mA(n,e){let t=n.dom.ownerDocument,r,i=0;if(t.caretPositionFromPoint)try{let c=t.caretPositionFromPoint(e.left,e.top);c&&({offsetNode:r,offset:i}=c)}catch{}if(!r&&t.caretRangeFromPoint){let c=t.caretRangeFromPoint(e.left,e.top);c&&({startContainer:r,startOffset:i}=c)}let o=(n.root.elementFromPoint?n.root:t).elementFromPoint(e.left,e.top+1),a;if(!o||!n.dom.contains(o.nodeType!=1?o.parentNode:o)){let c=n.dom.getBoundingClientRect();if(!ff(e,c)||(o=Ig(n.dom,e,c),!o))return null}if(Ht)for(let c=o;r&&c;c=uf(c))c.draggable&&(r=void 0);if(o=dA(o,e),r){if(er&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let c=r.childNodes[i],h;c.nodeName=="IMG"&&(h=c.getBoundingClientRect()).right<=e.left&&h.bottom>e.top&&i++}r==n.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?a=n.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(a=pA(n,r,i,e))}a==null&&(a=hA(n,o,e));let u=n.docView.nearestDesc(o,!0);return{pos:a,inside:u?u.posAtStart-u.border:-1}}function Br(n,e){let t=n.getClientRects();return t.length?t[e<0?0:t.length-1]:n.getBoundingClientRect()}const gA=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function Pg(n,e,t){let{node:r,offset:i}=n.docView.domFromPos(e,t<0?-1:1),o=El||er;if(r.nodeType==3)if(o&&(gA.test(r.nodeValue)||(t<0?!i:i==r.nodeValue.length))){let a=Br(vr(r,i,i),t);if(er&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let u=Br(vr(r,i-1,i-1),-1);if(u.top==a.top){let c=Br(vr(r,i,i+1),-1);if(c.top!=a.top)return to(c,c.left<u.left)}}return a}else{let a=i,u=i,c=t<0?1:-1;return t<0&&!i?(u++,c=-1):t>=0&&i==r.nodeValue.length?(a--,c=1):t<0?a--:u++,to(Br(vr(r,a,u),c),c<0)}if(!n.state.doc.resolve(e).parent.inlineContent){if(i&&(t<0||i==Jn(r))){let a=r.childNodes[i-1];if(a.nodeType==1)return uc(a.getBoundingClientRect(),!1)}if(i<Jn(r)){let a=r.childNodes[i];if(a.nodeType==1)return uc(a.getBoundingClientRect(),!0)}return uc(r.getBoundingClientRect(),t>=0)}if(i&&(t<0||i==Jn(r))){let a=r.childNodes[i-1],u=a.nodeType==3?vr(a,Jn(a)-(o?0:1)):a.nodeType==1&&(a.nodeName!="BR"||!a.nextSibling)?a:null;if(u)return to(Br(u,1),!1)}if(i<Jn(r)){let a=r.childNodes[i];for(;a.pmViewDesc&&a.pmViewDesc.ignoreForCoords;)a=a.nextSibling;let u=a?a.nodeType==3?vr(a,0,o?0:1):a.nodeType==1?a:null:null;if(u)return to(Br(u,-1),!0)}return to(Br(r.nodeType==3?vr(r):r,-t),t>=0)}function to(n,e){if(n.width==0)return n;let t=e?n.left:n.right;return{top:n.top,bottom:n.bottom,left:t,right:t}}function uc(n,e){if(n.height==0)return n;let t=e?n.top:n.bottom;return{top:t,bottom:t,left:n.left,right:n.right}}function Lg(n,e,t){let r=n.state,i=n.root.activeElement;r!=e&&n.updateState(e),i!=n.dom&&n.focus();try{return t()}finally{r!=e&&n.updateState(r),i!=n.dom&&i&&i.focus()}}function vA(n,e,t){let r=e.selection,i=t=="up"?r.$from:r.$to;return Lg(n,e,()=>{let{node:o}=n.docView.domFromPos(i.pos,t=="up"?-1:1);for(;;){let u=n.docView.nearestDesc(o,!0);if(!u)break;if(u.node.isBlock){o=u.dom;break}o=u.dom.parentNode}let a=Pg(n,i.pos,1);for(let u=o.firstChild;u;u=u.nextSibling){let c;if(u.nodeType==1)c=u.getClientRects();else if(u.nodeType==3)c=vr(u,0,u.nodeValue.length).getClientRects();else continue;for(let h=0;h<c.length;h++){let d=c[h];if(d.bottom>d.top+1&&(t=="up"?a.top-d.top>(d.bottom-a.top)*2:d.bottom-a.bottom>(a.bottom-d.top)*2))return!1}}return!0})}const yA=/[\u0590-\u08ac]/;function bA(n,e,t){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,o=!i,a=i==r.parent.content.size,u=n.domSelection();return!yA.test(r.parent.textContent)||!u.modify?t=="left"||t=="backward"?o:a:Lg(n,e,()=>{let c=u.getRangeAt(0),h=u.focusNode,d=u.focusOffset,m=u.caretBidiLevel;u.modify("move",t,"character");let y=!(r.depth?n.docView.domAfterPos(r.before()):n.dom).contains(u.focusNode.nodeType==1?u.focusNode:u.focusNode.parentNode)||h==u.focusNode&&d==u.focusOffset;return u.removeAllRanges(),u.addRange(c),m!=null&&(u.caretBidiLevel=m),y})}let $p=null,Hp=null,Vp=!1;function DA(n,e,t){return $p==e&&Hp==t?Vp:($p=e,Hp=t,Vp=t=="up"||t=="down"?vA(n,e,t):bA(n,e,t))}const Bn=0,Wp=1,rs=2,tr=3;class Ro{constructor(e,t,r,i){this.parent=e,this.children=t,this.dom=r,this.contentDOM=i,this.dirty=Bn,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,r=this.posAtStart;;t++){let i=this.children[t];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let o,a;if(e==this.contentDOM)o=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.previousSibling}for(;o&&!((a=o.pmViewDesc)&&a.parent==this);)o=o.previousSibling;return o?this.posBeforeChild(a)+a.size:this.posAtStart}else{let o,a;if(e==this.contentDOM)o=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.nextSibling}for(;o&&!((a=o.pmViewDesc)&&a.parent==this);)o=o.nextSibling;return o?this.posBeforeChild(a):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=t>Yt(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(t==0)for(let o=e;;o=o.parentNode){if(o==this.dom){i=!1;break}if(o.previousSibling)break}if(i==null&&t==e.childNodes.length)for(let o=e;;o=o.parentNode){if(o==this.dom){i=!0;break}if(o.nextSibling)break}}return(i==null?r>0:i)?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let r=!0,i=e;i;i=i.parentNode){let o=this.getDesc(i),a;if(o&&(!t||o.node))if(r&&(a=o.nodeDOM)&&!(a.nodeType==1?a.contains(e.nodeType==1?e:e.parentNode):a==e))r=!1;else return o}}getDesc(e){let t=e.pmViewDesc;for(let r=t;r;r=r.parent)if(r==this)return t}posFromDOM(e,t,r){for(let i=e;i;i=i.parentNode){let o=this.getDesc(i);if(o)return o.localPosFromDOM(e,t,r)}return-1}descAt(e){for(let t=0,r=0;t<this.children.length;t++){let i=this.children[t],o=r+i.size;if(r==e&&o!=r){for(;!i.border&&i.children.length;)i=i.children[0];return i}if(e<o)return i.descAt(e-r-i.border);r=o}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0};let r=0,i=0;for(let o=0;r<this.children.length;r++){let a=this.children[r],u=o+a.size;if(u>e||a instanceof $g){i=e-o;break}o=u}if(i)return this.children[r].domFromPos(i-this.children[r].border,t);for(let o;r&&!(o=this.children[r-1]).size&&o instanceof zg&&o.side>=0;r--);if(t<=0){let o,a=!0;for(;o=r?this.children[r-1]:null,!(!o||o.dom.parentNode==this.contentDOM);r--,a=!1);return o&&t&&a&&!o.border&&!o.domAtom?o.domFromPos(o.size,t):{node:this.contentDOM,offset:o?Yt(o.dom)+1:0}}else{let o,a=!0;for(;o=r<this.children.length?this.children[r]:null,!(!o||o.dom.parentNode==this.contentDOM);r++,a=!1);return o&&a&&!o.border&&!o.domAtom?o.domFromPos(0,t):{node:this.contentDOM,offset:o?Yt(o.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,o=-1;for(let a=r,u=0;;u++){let c=this.children[u],h=a+c.size;if(i==-1&&e<=h){let d=a+c.border;if(e>=d&&t<=h-c.border&&c.node&&c.contentDOM&&this.contentDOM.contains(c.contentDOM))return c.parseRange(e,t,d);e=a;for(let m=u;m>0;m--){let g=this.children[m-1];if(g.size&&g.dom.parentNode==this.contentDOM&&!g.emptyChildAt(1)){i=Yt(g.dom)+1;break}e-=g.size}i==-1&&(i=0)}if(i>-1&&(h>t||u==this.children.length-1)){t=h;for(let d=u+1;d<this.children.length;d++){let m=this.children[d];if(m.size&&m.dom.parentNode==this.contentDOM&&!m.emptyChildAt(-1)){o=Yt(m.dom);break}t+=m.size}o==-1&&(o=this.contentDOM.childNodes.length);break}a=h}return{node:this.contentDOM,from:e,to:t,fromOffset:i,toOffset:o}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return t.size==0||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:r}=this.domFromPos(e,0);if(t.nodeType!=1||r==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[r]}setSelection(e,t,r,i=!1){let o=Math.min(e,t),a=Math.max(e,t);for(let g=0,y=0;g<this.children.length;g++){let x=this.children[g],w=y+x.size;if(o>y&&a<w)return x.setSelection(e-y-x.border,t-y-x.border,r,i);y=w}let u=this.domFromPos(e,e?-1:1),c=t==e?u:this.domFromPos(t,t?-1:1),h=r.getSelection(),d=!1;if((er||Ht)&&e==t){let{node:g,offset:y}=u;if(g.nodeType==3){if(d=!!(y&&g.nodeValue[y-1]==`
`),d&&y==g.nodeValue.length)for(let x=g,w;x;x=x.parentNode){if(w=x.nextSibling){w.nodeName=="BR"&&(u=c={node:w.parentNode,offset:Yt(w)+1});break}let _=x.pmViewDesc;if(_&&_.node&&_.node.isBlock)break}}else{let x=g.childNodes[y-1];d=x&&(x.nodeName=="BR"||x.contentEditable=="false")}}if(er&&h.focusNode&&h.focusNode!=c.node&&h.focusNode.nodeType==1){let g=h.focusNode.childNodes[h.focusOffset];g&&g.contentEditable=="false"&&(i=!0)}if(!(i||d&&Ht)&&So(u.node,u.offset,h.anchorNode,h.anchorOffset)&&So(c.node,c.offset,h.focusNode,h.focusOffset))return;let m=!1;if((h.extend||e==t)&&!d){h.collapse(u.node,u.offset);try{e!=t&&h.extend(c.node,c.offset),m=!0}catch(g){if(!(g instanceof DOMException))throw g}}if(!m){if(e>t){let y=u;u=c,c=y}let g=document.createRange();g.setEnd(c.node,c.offset),g.setStart(u.node,u.offset),h.removeAllRanges(),h.addRange(g)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let r=0,i=0;i<this.children.length;i++){let o=this.children[i],a=r+o.size;if(r==a?e<=a&&t>=r:e<a&&t>r){let u=r+o.border,c=a-o.border;if(e>=u&&t<=c){this.dirty=e==r||t==a?rs:Wp,e==u&&t==c&&(o.contentLost||o.dom.parentNode!=this.contentDOM)?o.dirty=tr:o.markDirty(e-u,t-u);return}else o.dirty=o.dom==o.contentDOM&&o.dom.parentNode==this.contentDOM&&!o.children.length?rs:tr}r=a}this.dirty=rs}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let r=e==1?rs:Wp;t.dirty<r&&(t.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}}class zg extends Ro{constructor(e,t,r,i){let o,a=t.type.toDOM;if(typeof a=="function"&&(a=a(r,()=>{if(!o)return i;if(o.parent)return o.parent.posBeforeChild(o)})),!t.type.spec.raw){if(a.nodeType!=1){let u=document.createElement("span");u.appendChild(a),a=u}a.contentEditable="false",a.classList.add("ProseMirror-widget")}super(e,[],a,null),this.widget=t,this.widget=t,o=this}matchesWidget(e){return this.dirty==Bn&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return t?t(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class xA extends Ro{constructor(e,t,r,i){super(e,[],t,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class ki extends Ro{constructor(e,t,r,i){super(e,[],r,i),this.mark=t}static create(e,t,r,i){let o=i.nodeViews[t.type.name],a=o&&o(t,i,r);return(!a||!a.dom)&&(a=Gn.renderSpec(document,t.type.spec.toDOM(t,r))),new ki(e,t,a.dom,a.contentDOM||a.dom)}parseRule(){return this.dirty&tr||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM||void 0}}matchesMark(e){return this.dirty!=tr&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),this.dirty!=Bn){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=Bn}}slice(e,t,r){let i=ki.create(this.parent,this.mark,!0,r),o=this.children,a=this.size;t<a&&(o=Pc(o,t,a,r)),e>0&&(o=Pc(o,0,e,r));for(let u=0;u<o.length;u++)o[u].parent=i;return i.children=o,i}}class Oi extends Ro{constructor(e,t,r,i,o,a,u,c,h){super(e,[],o,a),this.node=t,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=u,a&&this.updateChildren(c,h)}static create(e,t,r,i,o,a){let u=o.nodeViews[t.type.name],c,h=u&&u(t,o,()=>{if(!c)return a;if(c.parent)return c.parent.posBeforeChild(c)},r,i),d=h&&h.dom,m=h&&h.contentDOM;if(t.isText){if(!d)d=document.createTextNode(t.text);else if(d.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else d||({dom:d,contentDOM:m}=Gn.renderSpec(document,t.type.spec.toDOM(t)));!m&&!t.isText&&d.nodeName!="BR"&&(d.hasAttribute("contenteditable")||(d.contentEditable="false"),t.type.spec.draggable&&(d.draggable=!0));let g=d;return d=Wg(d,r,t),h?c=new wA(e,t,r,i,d,m||null,g,h,o,a+1):t.isText?new Al(e,t,r,i,d,g,o):new Oi(e,t,r,i,d,m||null,g,o,a+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let t=this.children.length-1;t>=0;t--){let r=this.children[t];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>L.empty)}return e}matchesNode(e,t,r){return this.dirty==Bn&&e.eq(this.node)&&Ic(t,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let r=this.node.inlineContent,i=t,o=e.composing?this.localCompositionInfo(e,t):null,a=o&&o.pos>-1?o:null,u=o&&o.pos<0,c=new EA(this,a&&a.node);SA(this.node,this.innerDeco,(h,d,m)=>{h.spec.marks?c.syncToMarks(h.spec.marks,r,e):h.type.side>=0&&!m&&c.syncToMarks(d==this.node.childCount?Te.none:this.node.child(d).marks,r,e),c.placeWidget(h,e,i)},(h,d,m,g)=>{c.syncToMarks(h.marks,r,e);let y;c.findNodeMatch(h,d,m,g)||u&&e.state.selection.from>i&&e.state.selection.to<i+h.nodeSize&&(y=c.findIndexWithChild(o.node))>-1&&c.updateNodeAt(h,d,m,y,e)||c.updateNextNode(h,d,m,e,g)||c.addNode(h,d,m,e,i),i+=h.nodeSize}),c.syncToMarks([],r,e),this.node.isTextblock&&c.addTextblockHacks(),c.destroyRest(),(c.changed||this.dirty==rs)&&(a&&this.protectLocalComposition(e,a),Hg(this.contentDOM,this.children,e),ys&&kA(this.dom))}localCompositionInfo(e,t){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof be)||r<t||i>t+this.node.content.size)return null;let o=e.domSelection(),a=OA(o.focusNode,o.focusOffset);if(!a||!this.dom.contains(a.parentNode))return null;if(this.node.inlineContent){let u=a.nodeValue,c=TA(this.node.content,u,r-t,i-t);return c<0?null:{node:a,pos:c,text:u}}else return{node:a,pos:-1,text:""}}protectLocalComposition(e,{node:t,pos:r,text:i}){if(this.getDesc(t))return;let o=t;for(;o.parentNode!=this.contentDOM;o=o.parentNode){for(;o.previousSibling;)o.parentNode.removeChild(o.previousSibling);for(;o.nextSibling;)o.parentNode.removeChild(o.nextSibling);o.pmViewDesc&&(o.pmViewDesc=void 0)}let a=new xA(this,o,t,i);e.input.compositionNodes.push(a),this.children=Pc(this.children,r,r+i.length,e,a)}update(e,t,r,i){return this.dirty==tr||!e.sameMarkup(this.node)?!1:(this.updateInner(e,t,r,i),!0)}updateInner(e,t,r,i){this.updateOuterDeco(t),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=Bn}updateOuterDeco(e){if(Ic(e,this.outerDeco))return;let t=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=Vg(this.dom,this.nodeDOM,Bc(this.outerDeco,this.node,t),Bc(e,this.node,t)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable")}get domAtom(){return this.node.isAtom}}function Up(n,e,t,r,i){return Wg(r,e,n),new Oi(void 0,n,e,t,r,r,r,i,0)}class Al extends Oi{constructor(e,t,r,i,o,a,u){super(e,t,r,i,o,null,a,u,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,r,i){return this.dirty==tr||this.dirty!=Bn&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(t),(this.dirty!=Bn||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=Bn,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,r){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,t,r){let i=this.node.cut(e,t),o=document.createTextNode(i.text);return new Al(this.parent,i,this.outerDeco,this.innerDeco,o,o,r)}markDirty(e,t){super.markDirty(e,t),this.dom!=this.nodeDOM&&(e==0||t==this.nodeDOM.nodeValue.length)&&(this.dirty=tr)}get domAtom(){return!1}}class $g extends Ro{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Bn&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class wA extends Oi{constructor(e,t,r,i,o,a,u,c,h,d){super(e,t,r,i,o,a,u,h,d),this.spec=c}update(e,t,r,i){if(this.dirty==tr)return!1;if(this.spec.update){let o=this.spec.update(e,t,r);return o&&this.updateInner(e,t,r,i),o}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,t,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,r,i){this.spec.setSelection?this.spec.setSelection(e,t,r):super.setSelection(e,t,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function Hg(n,e,t){let r=n.firstChild,i=!1;for(let o=0;o<e.length;o++){let a=e[o],u=a.dom;if(u.parentNode==n){for(;u!=r;)r=qp(r),i=!0;r=r.nextSibling}else i=!0,n.insertBefore(u,r);if(a instanceof ki){let c=r?r.previousSibling:n.lastChild;Hg(a.contentDOM,a.children,t),r=c?c.nextSibling:n.firstChild}}for(;r;)r=qp(r),i=!0;i&&t.trackWrites==n&&(t.trackWrites=null)}const go=function(n){n&&(this.nodeName=n)};go.prototype=Object.create(null);const mi=[new go];function Bc(n,e,t){if(n.length==0)return mi;let r=t?mi[0]:new go,i=[r];for(let o=0;o<n.length;o++){let a=n[o].type.attrs;if(!!a){a.nodeName&&i.push(r=new go(a.nodeName));for(let u in a){let c=a[u];c!=null&&(t&&i.length==1&&i.push(r=new go(e.isInline?"span":"div")),u=="class"?r.class=(r.class?r.class+" ":"")+c:u=="style"?r.style=(r.style?r.style+";":"")+c:u!="nodeName"&&(r[u]=c))}}}return i}function Vg(n,e,t,r){if(t==mi&&r==mi)return e;let i=e;for(let o=0;o<r.length;o++){let a=r[o],u=t[o];if(o){let c;u&&u.nodeName==a.nodeName&&i!=n&&(c=i.parentNode)&&c.nodeName.toLowerCase()==a.nodeName||(c=document.createElement(a.nodeName),c.pmIsDeco=!0,c.appendChild(i),u=mi[0]),i=c}CA(i,u||mi[0],a)}return i}function CA(n,e,t){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in t)&&n.removeAttribute(r);for(let r in t)r!="class"&&r!="style"&&r!="nodeName"&&t[r]!=e[r]&&n.setAttribute(r,t[r]);if(e.class!=t.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=t.class?t.class.split(" ").filter(Boolean):[];for(let o=0;o<r.length;o++)i.indexOf(r[o])==-1&&n.classList.remove(r[o]);for(let o=0;o<i.length;o++)r.indexOf(i[o])==-1&&n.classList.add(i[o]);n.classList.length==0&&n.removeAttribute("class")}if(e.style!=t.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)n.style.removeProperty(i[1])}t.style&&(n.style.cssText+=t.style)}}function Wg(n,e,t){return Vg(n,n,mi,Bc(e,t,n.nodeType!=1))}function Ic(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].type.eq(e[t].type))return!1;return!0}function qp(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class EA{constructor(e,t){this.lock=t,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=AA(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let r=e;r<t;r++)this.top.children[r].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,r){let i=0,o=this.stack.length>>1,a=Math.min(o,e.length);for(;i<a&&(i==o-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<o;)this.destroyRest(),this.top.dirty=Bn,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<e.length;){this.stack.push(this.top,this.index+1);let u=-1;for(let c=this.index;c<Math.min(this.index+3,this.top.children.length);c++)if(this.top.children[c].matchesMark(e[o])){u=c;break}if(u>-1)u>this.index&&(this.changed=!0,this.destroyBetween(this.index,u)),this.top=this.top.children[this.index];else{let c=ki.create(this.top,e[o],t,r);this.top.children.splice(this.index,0,c),this.top=c,this.changed=!0}this.index=0,o++}}findNodeMatch(e,t,r,i){let o=-1,a;if(i>=this.preMatch.index&&(a=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&a.matchesNode(e,t,r))o=this.top.children.indexOf(a,this.index);else for(let u=this.index,c=Math.min(this.top.children.length,u+5);u<c;u++){let h=this.top.children[u];if(h.matchesNode(e,t,r)&&!this.preMatch.matched.has(h)){o=u;break}}return o<0?!1:(this.destroyBetween(this.index,o),this.index++,!0)}updateNodeAt(e,t,r,i,o){let a=this.top.children[i];return a.dirty==tr&&a.dom==a.contentDOM&&(a.dirty=rs),a.update(e,t,r,o)?(this.destroyBetween(this.index,i),this.index=i+1,!0):!1}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=t}}updateNextNode(e,t,r,i,o){for(let a=this.index;a<this.top.children.length;a++){let u=this.top.children[a];if(u instanceof Oi){let c=this.preMatch.matched.get(u);if(c!=null&&c!=o)return!1;let h=u.dom;if(!(this.lock&&(h==this.lock||h.nodeType==1&&h.contains(this.lock.parentNode))&&!(e.isText&&u.node&&u.node.isText&&u.nodeDOM.nodeValue==e.text&&u.dirty!=tr&&Ic(t,u.outerDeco)))&&u.update(e,t,r,i))return this.destroyBetween(this.index,a),u.dom!=h&&(this.changed=!0),this.index++,!0;break}}return!1}addNode(e,t,r,i,o){this.top.children.splice(this.index++,0,Oi.create(this.top,e,t,r,i,o)),this.changed=!0}placeWidget(e,t,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let o=new zg(this.top,e,t,r);this.top.children.splice(this.index++,0,o),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof ki;)t=e,e=t.children[t.children.length-1];(!e||!(e instanceof Al)||/\n$/.test(e.node.text))&&((Ht||kt)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new $g(this.top,[],r,null);t!=this.top?t.children.push(i):t.children.splice(this.index++,0,i),this.changed=!0}}}function AA(n,e){let t=e,r=t.children.length,i=n.childCount,o=new Map,a=[];e:for(;i>0;){let u;for(;;)if(r){let h=t.children[r-1];if(h instanceof ki)t=h,r=h.children.length;else{u=h,r--;break}}else{if(t==e)break e;r=t.parent.children.indexOf(t),t=t.parent}let c=u.node;if(!!c){if(c!=n.child(i-1))break;--i,o.set(u,i),a.push(u)}}return{index:i,matched:o,matches:a.reverse()}}function _A(n,e){return n.type.side-e.type.side}function SA(n,e,t,r){let i=e.locals(n),o=0;if(i.length==0){for(let h=0;h<n.childCount;h++){let d=n.child(h);r(d,i,e.forChild(o,d),h),o+=d.nodeSize}return}let a=0,u=[],c=null;for(let h=0;;){if(a<i.length&&i[a].to==o){let x=i[a++],w;for(;a<i.length&&i[a].to==o;)(w||(w=[x])).push(i[a++]);if(w){w.sort(_A);for(let _=0;_<w.length;_++)t(w[_],h,!!c)}else t(x,h,!!c)}let d,m;if(c)m=-1,d=c,c=null;else if(h<n.childCount)m=h,d=n.child(h++);else break;for(let x=0;x<u.length;x++)u[x].to<=o&&u.splice(x--,1);for(;a<i.length&&i[a].from<=o&&i[a].to>o;)u.push(i[a++]);let g=o+d.nodeSize;if(d.isText){let x=g;a<i.length&&i[a].from<x&&(x=i[a].from);for(let w=0;w<u.length;w++)u[w].to<x&&(x=u[w].to);x<g&&(c=d.cut(x-o),d=d.cut(0,x-o),g=x,m=-1)}let y=d.isInline&&!d.isLeaf?u.filter(x=>!x.inline):u.slice();r(d,y,e.forChild(o,d),m),o=g}}function kA(n){if(n.nodeName=="UL"||n.nodeName=="OL"){let e=n.style.cssText;n.style.cssText=e+"; list-style: square !important",window.getComputedStyle(n).listStyle,n.style.cssText=e}}function OA(n,e){for(;;){if(n.nodeType==3)return n;if(n.nodeType==1&&e>0){if(n.childNodes.length>e&&n.childNodes[e].nodeType==3)return n.childNodes[e];n=n.childNodes[e-1],e=Jn(n)}else if(n.nodeType==1&&e<n.childNodes.length)n=n.childNodes[e],e=0;else return null}}function TA(n,e,t,r){for(let i=0,o=0;i<n.childCount&&o<=r;){let a=n.child(i++),u=o;if(o+=a.nodeSize,!a.isText)continue;let c=a.text;for(;i<n.childCount;){let h=n.child(i++);if(o+=h.nodeSize,!h.isText)break;c+=h.text}if(o>=t){let h=u<r?c.lastIndexOf(e,r-u-1):-1;if(h>=0&&h+e.length+u>=t)return u+h;if(t==r&&c.length>=r+e.length-u&&c.slice(r-u,r-u+e.length)==e)return r}}return-1}function Pc(n,e,t,r,i){let o=[];for(let a=0,u=0;a<n.length;a++){let c=n[a],h=u,d=u+=c.size;h>=t||d<=e?o.push(c):(h<e&&o.push(c.slice(0,e-h,r)),i&&(o.push(i),i=void 0),d>t&&o.push(c.slice(t-h,c.size,r)))}return o}function Ug(n,e=null){let t=n.domSelection(),r=n.state.doc;if(!t.focusNode)return null;let i=n.docView.nearestDesc(t.focusNode),o=i&&i.size==0,a=n.docView.posFromDOM(t.focusNode,t.focusOffset,1);if(a<0)return null;let u=r.resolve(a),c,h;if(cf(t)){for(c=u;i&&!i.node;)i=i.parent;let d=i.node;if(i&&d.isAtom&&ie.isSelectable(d)&&i.parent&&!(d.isInline&&iA(t.focusNode,t.focusOffset,i.dom))){let m=i.posBefore;h=new ie(a==m?u:r.resolve(m))}}else{let d=n.docView.posFromDOM(t.anchorNode,t.anchorOffset,1);if(d<0)return null;c=r.resolve(d)}if(!h){let d=e=="pointer"||n.state.selection.head<u.pos&&!o?1:-1;h=df(n,c,u,d)}return h}function qg(n){return n.editable?n.hasFocus():jg(n)&&document.activeElement&&document.activeElement.contains(n.dom)}function Kr(n,e=!1){let t=n.state.selection;if(Kg(n,t),!!qg(n)){if(!e&&n.input.mouseDown&&n.input.mouseDown.allowDefault&&kt){let r=n.domSelection(),i=n.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&So(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){n.input.mouseDown.delayedSelectionSync=!0,n.domObserver.setCurSelection();return}}if(n.domObserver.disconnectSelection(),n.cursorWrapper)FA(n);else{let{anchor:r,head:i}=t,o,a;Kp&&!(t instanceof be)&&(t.$from.parent.inlineContent||(o=jp(n,t.from)),!t.empty&&!t.$from.parent.inlineContent&&(a=jp(n,t.to))),n.docView.setSelection(r,i,n.root,e),Kp&&(o&&Jp(o),a&&Jp(a)),t.visible?n.dom.classList.remove("ProseMirror-hideselection"):(n.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&MA(n))}n.domObserver.setCurSelection(),n.domObserver.connectSelection()}}const Kp=Ht||kt&&tA<63;function jp(n,e){let{node:t,offset:r}=n.docView.domFromPos(e,0),i=r<t.childNodes.length?t.childNodes[r]:null,o=r?t.childNodes[r-1]:null;if(Ht&&i&&i.contentEditable=="false")return cc(i);if((!i||i.contentEditable=="false")&&(!o||o.contentEditable=="false")){if(i)return cc(i);if(o)return cc(o)}}function cc(n){return n.contentEditable="true",Ht&&n.draggable&&(n.draggable=!1,n.wasDraggable=!0),n}function Jp(n){n.contentEditable="false",n.wasDraggable&&(n.draggable=!0,n.wasDraggable=null)}function MA(n){let e=n.dom.ownerDocument;e.removeEventListener("selectionchange",n.input.hideSelectionGuard);let t=n.domSelection(),r=t.anchorNode,i=t.anchorOffset;e.addEventListener("selectionchange",n.input.hideSelectionGuard=()=>{(t.anchorNode!=r||t.anchorOffset!=i)&&(e.removeEventListener("selectionchange",n.input.hideSelectionGuard),setTimeout(()=>{(!qg(n)||n.state.selection.visible)&&n.dom.classList.remove("ProseMirror-hideselection")},20))})}function FA(n){let e=n.domSelection(),t=document.createRange(),r=n.cursorWrapper.dom,i=r.nodeName=="IMG";i?t.setEnd(r.parentNode,Yt(r)+1):t.setEnd(r,0),t.collapse(!1),e.removeAllRanges(),e.addRange(t),!i&&!n.state.selection.visible&&Qt&&Hr<=11&&(r.disabled=!0,r.disabled=!1)}function Kg(n,e){if(e instanceof ie){let t=n.docView.descAt(e.from);t!=n.lastSelectedViewDesc&&(Gp(n),t&&t.selectNode(),n.lastSelectedViewDesc=t)}else Gp(n)}function Gp(n){n.lastSelectedViewDesc&&(n.lastSelectedViewDesc.parent&&n.lastSelectedViewDesc.deselectNode(),n.lastSelectedViewDesc=void 0)}function df(n,e,t,r){return n.someProp("createSelectionBetween",i=>i(n,e,t))||be.between(e,t,r)}function Yp(n){return n.editable&&n.root.activeElement!=n.dom?!1:jg(n)}function jg(n){let e=n.domSelection();if(!e.anchorNode)return!1;try{return n.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(n.editable||n.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function NA(n){let e=n.docView.domFromPos(n.state.selection.anchor,0),t=n.domSelection();return So(e.node,e.offset,t.anchorNode,t.anchorOffset)}function Lc(n,e){let{$anchor:t,$head:r}=n.selection,i=e>0?t.max(r):t.min(r),o=i.parent.inlineContent?i.depth?n.doc.resolve(e>0?i.after():i.before()):null:i;return o&&pe.findFrom(o,e)}function hi(n,e){return n.dispatch(n.state.tr.setSelection(e).scrollIntoView()),!0}function Xp(n,e,t){let r=n.state.selection;if(r instanceof be){if(!r.empty||t.indexOf("s")>-1)return!1;if(n.endOfTextblock(e>0?"right":"left")){let i=Lc(n.state,e);return i&&i instanceof ie?hi(n,i):!1}else if(!(gn&&t.indexOf("m")>-1)){let i=r.$head,o=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,a;if(!o||o.isText)return!1;let u=e<0?i.pos-o.nodeSize:i.pos;return o.isAtom||(a=n.docView.descAt(u))&&!a.contentDOM?ie.isSelectable(o)?hi(n,new ie(e<0?n.state.doc.resolve(i.pos-o.nodeSize):i)):El?hi(n,new be(n.state.doc.resolve(e<0?u:u+o.nodeSize))):!1:!1}}else{if(r instanceof ie&&r.node.isInline)return hi(n,new be(e>0?r.$to:r.$from));{let i=Lc(n.state,e);return i?hi(n,i):!1}}}function Wa(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function vo(n){let e=n.pmViewDesc;return e&&e.size==0&&(n.nextSibling||n.nodeName!="BR")}function fc(n){let e=n.domSelection(),t=e.focusNode,r=e.focusOffset;if(!t)return;let i,o,a=!1;for(er&&t.nodeType==1&&r<Wa(t)&&vo(t.childNodes[r])&&(a=!0);;)if(r>0){if(t.nodeType!=1)break;{let u=t.childNodes[r-1];if(vo(u))i=t,o=--r;else if(u.nodeType==3)t=u,r=t.nodeValue.length;else break}}else{if(Jg(t))break;{let u=t.previousSibling;for(;u&&vo(u);)i=t.parentNode,o=Yt(u),u=u.previousSibling;if(u)t=u,r=Wa(t);else{if(t=t.parentNode,t==n.dom)break;r=0}}}a?zc(n,e,t,r):i&&zc(n,e,i,o)}function dc(n){let e=n.domSelection(),t=e.focusNode,r=e.focusOffset;if(!t)return;let i=Wa(t),o,a;for(;;)if(r<i){if(t.nodeType!=1)break;let u=t.childNodes[r];if(vo(u))o=t,a=++r;else break}else{if(Jg(t))break;{let u=t.nextSibling;for(;u&&vo(u);)o=u.parentNode,a=Yt(u)+1,u=u.nextSibling;if(u)t=u,r=0,i=Wa(t);else{if(t=t.parentNode,t==n.dom)break;r=i=0}}}o&&zc(n,e,o,a)}function Jg(n){let e=n.pmViewDesc;return e&&e.node&&e.node.isBlock}function zc(n,e,t,r){if(cf(e)){let o=document.createRange();o.setEnd(t,r),o.setStart(t,r),e.removeAllRanges(),e.addRange(o)}else e.extend&&e.extend(t,r);n.domObserver.setCurSelection();let{state:i}=n;setTimeout(()=>{n.state==i&&Kr(n)},50)}function Zp(n,e,t){let r=n.state.selection;if(r instanceof be&&!r.empty||t.indexOf("s")>-1||gn&&t.indexOf("m")>-1)return!1;let{$from:i,$to:o}=r;if(!i.parent.inlineContent||n.endOfTextblock(e<0?"up":"down")){let a=Lc(n.state,e);if(a&&a instanceof ie)return hi(n,a)}if(!i.parent.inlineContent){let a=e<0?i:o,u=r instanceof Rn?pe.near(a,e):pe.findFrom(a,e);return u?hi(n,u):!1}return!1}function Qp(n,e){if(!(n.state.selection instanceof be))return!0;let{$head:t,$anchor:r,empty:i}=n.state.selection;if(!t.sameParent(r))return!0;if(!i)return!1;if(n.endOfTextblock(e>0?"forward":"backward"))return!0;let o=!t.textOffset&&(e<0?t.nodeBefore:t.nodeAfter);if(o&&!o.isText){let a=n.state.tr;return e<0?a.delete(t.pos-o.nodeSize,t.pos):a.delete(t.pos,t.pos+o.nodeSize),n.dispatch(a),!0}return!1}function em(n,e,t){n.domObserver.stop(),e.contentEditable=t,n.domObserver.start()}function RA(n){if(!Ht||n.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:t}=n.domSelection();if(e&&e.nodeType==1&&t==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;em(n,r,"true"),setTimeout(()=>em(n,r,"false"),20)}return!1}function BA(n){let e="";return n.ctrlKey&&(e+="c"),n.metaKey&&(e+="m"),n.altKey&&(e+="a"),n.shiftKey&&(e+="s"),e}function IA(n,e){let t=e.keyCode,r=BA(e);return t==8||gn&&t==72&&r=="c"?Qp(n,-1)||fc(n):t==46||gn&&t==68&&r=="c"?Qp(n,1)||dc(n):t==13||t==27?!0:t==37||gn&&t==66&&r=="c"?Xp(n,-1,r)||fc(n):t==39||gn&&t==70&&r=="c"?Xp(n,1,r)||dc(n):t==38||gn&&t==80&&r=="c"?Zp(n,-1,r)||fc(n):t==40||gn&&t==78&&r=="c"?RA(n)||Zp(n,1,r)||dc(n):r==(gn?"m":"c")&&(t==66||t==73||t==89||t==90)}function Gg(n,e){let t=[],{content:r,openStart:i,openEnd:o}=e;for(;i>1&&o>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,o--;let y=r.firstChild;t.push(y.type.name,y.attrs!=y.type.defaultAttrs?y.attrs:null),r=y.content}let a=n.someProp("clipboardSerializer")||Gn.fromSchema(n.state.schema),u=t0(),c=u.createElement("div");c.appendChild(a.serializeFragment(r,{document:u}));let h=c.firstChild,d,m=0;for(;h&&h.nodeType==1&&(d=e0[h.nodeName.toLowerCase()]);){for(let y=d.length-1;y>=0;y--){let x=u.createElement(d[y]);for(;c.firstChild;)x.appendChild(c.firstChild);c.appendChild(x),m++}h=c.firstChild}h&&h.nodeType==1&&h.setAttribute("data-pm-slice",`${i} ${o}${m?` -${m}`:""} ${JSON.stringify(t)}`);let g=n.someProp("clipboardTextSerializer",y=>y(e))||e.content.textBetween(0,e.content.size,`

`);return{dom:c,text:g}}function Yg(n,e,t,r,i){let o=i.parent.type.spec.code,a,u;if(!t&&!e)return null;let c=e&&(r||o||!t);if(c){if(n.someProp("transformPastedText",g=>{e=g(e,o||r)}),o)return e?new G(L.from(n.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):G.empty;let m=n.someProp("clipboardTextParser",g=>g(e,i,r));if(m)u=m;else{let g=i.marks(),{schema:y}=n.state,x=Gn.fromSchema(y);a=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(w=>{let _=a.appendChild(document.createElement("p"));w&&_.appendChild(x.serializeNode(y.text(w,g)))})}}else n.someProp("transformPastedHTML",m=>{t=m(t)}),a=zA(t),El&&$A(a);let h=a&&a.querySelector("[data-pm-slice]"),d=h&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(h.getAttribute("data-pm-slice")||"");if(d&&d[3])for(let m=+d[3];m>0&&a.firstChild;m--)a=a.firstChild;if(u||(u=(n.someProp("clipboardParser")||n.someProp("domParser")||gs.fromSchema(n.state.schema)).parseSlice(a,{preserveWhitespace:!!(c||d),context:i,ruleFromNode(g){return g.nodeName=="BR"&&!g.nextSibling&&g.parentNode&&!PA.test(g.parentNode.nodeName)?{ignore:!0}:null}})),d)u=HA(tm(u,+d[1],+d[2]),d[4]);else if(u=G.maxOpen(LA(u.content,i),!0),u.openStart||u.openEnd){let m=0,g=0;for(let y=u.content.firstChild;m<u.openStart&&!y.type.spec.isolating;m++,y=y.firstChild);for(let y=u.content.lastChild;g<u.openEnd&&!y.type.spec.isolating;g++,y=y.lastChild);u=tm(u,m,g)}return n.someProp("transformPasted",m=>{u=m(u)}),u}const PA=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function LA(n,e){if(n.childCount<2)return n;for(let t=e.depth;t>=0;t--){let i=e.node(t).contentMatchAt(e.index(t)),o,a=[];if(n.forEach(u=>{if(!a)return;let c=i.findWrapping(u.type),h;if(!c)return a=null;if(h=a.length&&o.length&&Zg(c,o,u,a[a.length-1],0))a[a.length-1]=h;else{a.length&&(a[a.length-1]=Qg(a[a.length-1],o.length));let d=Xg(u,c);a.push(d),i=i.matchType(d.type),o=c}}),a)return L.from(a)}return n}function Xg(n,e,t=0){for(let r=e.length-1;r>=t;r--)n=e[r].create(null,L.from(n));return n}function Zg(n,e,t,r,i){if(i<n.length&&i<e.length&&n[i]==e[i]){let o=Zg(n,e,t,r.lastChild,i+1);if(o)return r.copy(r.content.replaceChild(r.childCount-1,o));if(r.contentMatchAt(r.childCount).matchType(i==n.length-1?t.type:n[i+1]))return r.copy(r.content.append(L.from(Xg(t,n,i+1))))}}function Qg(n,e){if(e==0)return n;let t=n.content.replaceChild(n.childCount-1,Qg(n.lastChild,e-1)),r=n.contentMatchAt(n.childCount).fillBefore(L.empty,!0);return n.copy(t.append(r))}function $c(n,e,t,r,i,o){let a=e<0?n.firstChild:n.lastChild,u=a.content;return i<r-1&&(u=$c(u,e,t,r,i+1,o)),i>=t&&(u=e<0?a.contentMatchAt(0).fillBefore(u,n.childCount>1||o<=i).append(u):u.append(a.contentMatchAt(a.childCount).fillBefore(L.empty,!0))),n.replaceChild(e<0?0:n.childCount-1,a.copy(u))}function tm(n,e,t){return e<n.openStart&&(n=new G($c(n.content,-1,e,n.openStart,0,n.openEnd),e,n.openEnd)),t<n.openEnd&&(n=new G($c(n.content,1,t,n.openEnd,0,0),n.openStart,t)),n}const e0={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let nm=null;function t0(){return nm||(nm=document.implementation.createHTMLDocument("title"))}function zA(n){let e=/^(\s*<meta [^>]*>)*/.exec(n);e&&(n=n.slice(e[0].length));let t=t0().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(n),i;if((i=r&&e0[r[1].toLowerCase()])&&(n=i.map(o=>"<"+o+">").join("")+n+i.map(o=>"</"+o+">").reverse().join("")),t.innerHTML=n,i)for(let o=0;o<i.length;o++)t=t.querySelector(i[o])||t;return t}function $A(n){let e=n.querySelectorAll(kt?"span:not([class]):not([style])":"span.Apple-converted-space");for(let t=0;t<e.length;t++){let r=e[t];r.childNodes.length==1&&r.textContent=="\xA0"&&r.parentNode&&r.parentNode.replaceChild(n.ownerDocument.createTextNode(" "),r)}}function HA(n,e){if(!n.size)return n;let t=n.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return n}let{content:i,openStart:o,openEnd:a}=n;for(let u=r.length-2;u>=0;u-=2){let c=t.nodes[r[u]];if(!c||c.hasRequiredAttrs())break;i=L.from(c.create(r[u+1],i)),o++,a++}return new G(i,o,a)}const Vt={};let Ot={};class VA{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastAndroidDelete=0,this.composing=!1,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function WA(n){for(let e in Vt){let t=Vt[e];n.dom.addEventListener(e,n.input.eventHandlers[e]=r=>{qA(n,r)&&!hf(n,r)&&(n.editable||!(r.type in Ot))&&t(n,r)})}Ht&&n.dom.addEventListener("input",()=>null),Hc(n)}function gi(n,e){n.input.lastSelectionOrigin=e,n.input.lastSelectionTime=Date.now()}function UA(n){n.domObserver.stop();for(let e in n.input.eventHandlers)n.dom.removeEventListener(e,n.input.eventHandlers[e]);clearTimeout(n.input.composingTimeout),clearTimeout(n.input.lastIOSEnterFallbackTimeout)}function Hc(n){n.someProp("handleDOMEvents",e=>{for(let t in e)n.input.eventHandlers[t]||n.dom.addEventListener(t,n.input.eventHandlers[t]=r=>hf(n,r))})}function hf(n,e){return n.someProp("handleDOMEvents",t=>{let r=t[e.type];return r?r(n,e)||e.defaultPrevented:!1})}function qA(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target;t!=n.dom;t=t.parentNode)if(!t||t.nodeType==11||t.pmViewDesc&&t.pmViewDesc.stopEvent(e))return!1;return!0}function KA(n,e){!hf(n,e)&&Vt[e.type]&&(n.editable||!(e.type in Ot))&&Vt[e.type](n,e)}Ot.keydown=(n,e)=>{let t=e;if(n.input.shiftKey=t.keyCode==16||t.shiftKey,!r0(n,t)&&(n.input.lastKeyCode=t.keyCode,n.input.lastKeyCodeTime=Date.now(),!(jn&&kt&&t.keyCode==13)))if(t.keyCode!=229&&n.domObserver.forceFlush(),ys&&t.keyCode==13&&!t.ctrlKey&&!t.altKey&&!t.metaKey){let r=Date.now();n.input.lastIOSEnter=r,n.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{n.input.lastIOSEnter==r&&(n.someProp("handleKeyDown",i=>i(n,ns(13,"Enter"))),n.input.lastIOSEnter=0)},200)}else n.someProp("handleKeyDown",r=>r(n,t))||IA(n,t)?t.preventDefault():gi(n,"key")};Ot.keyup=(n,e)=>{e.keyCode==16&&(n.input.shiftKey=!1)};Ot.keypress=(n,e)=>{let t=e;if(r0(n,t)||!t.charCode||t.ctrlKey&&!t.altKey||gn&&t.metaKey)return;if(n.someProp("handleKeyPress",i=>i(n,t))){t.preventDefault();return}let r=n.state.selection;if(!(r instanceof be)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(t.charCode);n.someProp("handleTextInput",o=>o(n,r.$from.pos,r.$to.pos,i))||n.dispatch(n.state.tr.insertText(i).scrollIntoView()),t.preventDefault()}};function _l(n){return{left:n.clientX,top:n.clientY}}function jA(n,e){let t=e.x-n.clientX,r=e.y-n.clientY;return t*t+r*r<100}function pf(n,e,t,r,i){if(r==-1)return!1;let o=n.state.doc.resolve(r);for(let a=o.depth+1;a>0;a--)if(n.someProp(e,u=>a>o.depth?u(n,t,o.nodeAfter,o.before(a),i,!0):u(n,t,o.node(a),o.before(a),i,!1)))return!0;return!1}function ps(n,e,t){n.focused||n.focus();let r=n.state.tr.setSelection(e);t=="pointer"&&r.setMeta("pointer",!0),n.dispatch(r)}function JA(n,e){if(e==-1)return!1;let t=n.state.doc.resolve(e),r=t.nodeAfter;return r&&r.isAtom&&ie.isSelectable(r)?(ps(n,new ie(t),"pointer"),!0):!1}function GA(n,e){if(e==-1)return!1;let t=n.state.selection,r,i;t instanceof ie&&(r=t.node);let o=n.state.doc.resolve(e);for(let a=o.depth+1;a>0;a--){let u=a>o.depth?o.nodeAfter:o.node(a);if(ie.isSelectable(u)){r&&t.$from.depth>0&&a>=t.$from.depth&&o.before(t.$from.depth+1)==t.$from.pos?i=o.before(t.$from.depth):i=o.before(a);break}}return i!=null?(ps(n,ie.create(n.state.doc,i),"pointer"),!0):!1}function YA(n,e,t,r,i){return pf(n,"handleClickOn",e,t,r)||n.someProp("handleClick",o=>o(n,e,r))||(i?GA(n,t):JA(n,t))}function XA(n,e,t,r){return pf(n,"handleDoubleClickOn",e,t,r)||n.someProp("handleDoubleClick",i=>i(n,e,r))}function ZA(n,e,t,r){return pf(n,"handleTripleClickOn",e,t,r)||n.someProp("handleTripleClick",i=>i(n,e,r))||QA(n,t,r)}function QA(n,e,t){if(t.button!=0)return!1;let r=n.state.doc;if(e==-1)return r.inlineContent?(ps(n,be.create(r,0,r.content.size),"pointer"),!0):!1;let i=r.resolve(e);for(let o=i.depth+1;o>0;o--){let a=o>i.depth?i.nodeAfter:i.node(o),u=i.before(o);if(a.inlineContent)ps(n,be.create(r,u+1,u+1+a.content.size),"pointer");else if(ie.isSelectable(a))ps(n,ie.create(r,u),"pointer");else continue;return!0}}function mf(n){return Ua(n)}const n0=gn?"metaKey":"ctrlKey";Vt.mousedown=(n,e)=>{let t=e;n.input.shiftKey=t.shiftKey;let r=mf(n),i=Date.now(),o="singleClick";i-n.input.lastClick.time<500&&jA(t,n.input.lastClick)&&!t[n0]&&(n.input.lastClick.type=="singleClick"?o="doubleClick":n.input.lastClick.type=="doubleClick"&&(o="tripleClick")),n.input.lastClick={time:i,x:t.clientX,y:t.clientY,type:o};let a=n.posAtCoords(_l(t));!a||(o=="singleClick"?(n.input.mouseDown&&n.input.mouseDown.done(),n.input.mouseDown=new e_(n,a,t,!!r)):(o=="doubleClick"?XA:ZA)(n,a.pos,a.inside,t)?t.preventDefault():gi(n,"pointer"))};class e_{constructor(e,t,r,i){this.view=e,this.pos=t,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[n0],this.allowDefault=r.shiftKey;let o,a;if(t.inside>-1)o=e.state.doc.nodeAt(t.inside),a=t.inside;else{let d=e.state.doc.resolve(t.pos);o=d.parent,a=d.depth?d.before():0}const u=i?null:r.target,c=u?e.docView.nearestDesc(u,!0):null;this.target=c?c.dom:null;let{selection:h}=e.state;(r.button==0&&o.type.spec.draggable&&o.type.spec.selectable!==!1||h instanceof ie&&h.from<=a&&h.to>a)&&(this.mightDrag={node:o,pos:a,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&er&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),gi(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Kr(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(_l(e))),this.allowDefault||!t?gi(this.view,"pointer"):YA(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Ht&&this.mightDrag&&!this.mightDrag.node.isAtom||kt&&!(this.view.state.selection instanceof be)&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(ps(this.view,pe.near(this.view.state.doc.resolve(t.pos)),"pointer"),e.preventDefault()):gi(this.view,"pointer")}move(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0),gi(this.view,"pointer"),e.buttons==0&&this.done()}}Vt.touchdown=n=>{mf(n),gi(n,"pointer")};Vt.contextmenu=n=>mf(n);function r0(n,e){return n.composing?!0:Ht&&Math.abs(e.timeStamp-n.input.compositionEndedAt)<500?(n.input.compositionEndedAt=-2e8,!0):!1}const t_=jn?5e3:-1;Ot.compositionstart=Ot.compositionupdate=n=>{if(!n.composing){n.domObserver.flush();let{state:e}=n,t=e.selection.$from;if(e.selection.empty&&(e.storedMarks||!t.textOffset&&t.parentOffset&&t.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))n.markCursor=n.state.storedMarks||t.marks(),Ua(n,!0),n.markCursor=null;else if(Ua(n),er&&e.selection.empty&&t.parentOffset&&!t.textOffset&&t.nodeBefore.marks.length){let r=n.domSelection();for(let i=r.focusNode,o=r.focusOffset;i&&i.nodeType==1&&o!=0;){let a=o<0?i.lastChild:i.childNodes[o-1];if(!a)break;if(a.nodeType==3){r.collapse(a,a.nodeValue.length);break}else i=a,o=-1}}n.input.composing=!0}i0(n,t_)};Ot.compositionend=(n,e)=>{n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=e.timeStamp,i0(n,20))};function i0(n,e){clearTimeout(n.input.composingTimeout),e>-1&&(n.input.composingTimeout=setTimeout(()=>Ua(n),e))}function s0(n){for(n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=n_());n.input.compositionNodes.length>0;)n.input.compositionNodes.pop().markParentsDirty()}function n_(){let n=document.createEvent("Event");return n.initEvent("event",!0,!0),n.timeStamp}function Ua(n,e=!1){if(!(jn&&n.domObserver.flushingSoon>=0)){if(n.domObserver.forceFlush(),s0(n),e||n.docView&&n.docView.dirty){let t=Ug(n);return t&&!t.eq(n.state.selection)?n.dispatch(n.state.tr.setSelection(t)):n.updateState(n.state),!0}return!1}}function r_(n,e){if(!n.dom.parentNode)return;let t=n.dom.parentNode.appendChild(document.createElement("div"));t.appendChild(e),t.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),n.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t),n.focus()},50)}const bs=Qt&&Hr<15||ys&&nA<604;Vt.copy=Ot.cut=(n,e)=>{let t=e,r=n.state.selection,i=t.type=="cut";if(r.empty)return;let o=bs?null:t.clipboardData,a=r.content(),{dom:u,text:c}=Gg(n,a);o?(t.preventDefault(),o.clearData(),o.setData("text/html",u.innerHTML),o.setData("text/plain",c)):r_(n,u),i&&n.dispatch(n.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function i_(n){return n.openStart==0&&n.openEnd==0&&n.content.childCount==1?n.content.firstChild:null}function s_(n,e){if(!n.dom.parentNode)return;let t=n.input.shiftKey||n.state.selection.$from.parent.type.spec.code,r=n.dom.parentNode.appendChild(document.createElement(t?"textarea":"div"));t||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus(),setTimeout(()=>{n.focus(),r.parentNode&&r.parentNode.removeChild(r),t?Vc(n,r.value,null,e):Vc(n,r.textContent,r.innerHTML,e)},50)}function Vc(n,e,t,r){let i=Yg(n,e,t,n.input.shiftKey,n.state.selection.$from);if(n.someProp("handlePaste",u=>u(n,r,i||G.empty)))return!0;if(!i)return!1;let o=i_(i),a=o?n.state.tr.replaceSelectionWith(o,n.input.shiftKey):n.state.tr.replaceSelection(i);return n.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}Ot.paste=(n,e)=>{let t=e;if(n.composing&&!jn)return;let r=bs?null:t.clipboardData;r&&Vc(n,r.getData("text/plain"),r.getData("text/html"),t)?t.preventDefault():s_(n,t)};class o_{constructor(e,t){this.slice=e,this.move=t}}const o0=gn?"altKey":"ctrlKey";Vt.dragstart=(n,e)=>{let t=e,r=n.input.mouseDown;if(r&&r.done(),!t.dataTransfer)return;let i=n.state.selection,o=i.empty?null:n.posAtCoords(_l(t));if(!(o&&o.pos>=i.from&&o.pos<=(i instanceof ie?i.to-1:i.to))){if(r&&r.mightDrag)n.dispatch(n.state.tr.setSelection(ie.create(n.state.doc,r.mightDrag.pos)));else if(t.target&&t.target.nodeType==1){let h=n.docView.nearestDesc(t.target,!0);h&&h.node.type.spec.draggable&&h!=n.docView&&n.dispatch(n.state.tr.setSelection(ie.create(n.state.doc,h.posBefore)))}}let a=n.state.selection.content(),{dom:u,text:c}=Gg(n,a);t.dataTransfer.clearData(),t.dataTransfer.setData(bs?"Text":"text/html",u.innerHTML),t.dataTransfer.effectAllowed="copyMove",bs||t.dataTransfer.setData("text/plain",c),n.dragging=new o_(a,!t[o0])};Vt.dragend=n=>{let e=n.dragging;window.setTimeout(()=>{n.dragging==e&&(n.dragging=null)},50)};Ot.dragover=Ot.dragenter=(n,e)=>e.preventDefault();Ot.drop=(n,e)=>{let t=e,r=n.dragging;if(n.dragging=null,!t.dataTransfer)return;let i=n.posAtCoords(_l(t));if(!i)return;let o=n.state.doc.resolve(i.pos);if(!o)return;let a=r&&r.slice;a?n.someProp("transformPasted",x=>{a=x(a)}):a=Yg(n,t.dataTransfer.getData(bs?"Text":"text/plain"),bs?null:t.dataTransfer.getData("text/html"),!1,o);let u=!!(r&&!t[o0]);if(n.someProp("handleDrop",x=>x(n,t,a||G.empty,u))){t.preventDefault();return}if(!a)return;t.preventDefault();let c=a?UE(n.state.doc,o.pos,a):o.pos;c==null&&(c=o.pos);let h=n.state.tr;u&&h.deleteSelection();let d=h.mapping.map(c),m=a.openStart==0&&a.openEnd==0&&a.content.childCount==1,g=h.doc;if(m?h.replaceRangeWith(d,d,a.content.firstChild):h.replaceRange(d,d,a),h.doc.eq(g))return;let y=h.doc.resolve(d);if(m&&ie.isSelectable(a.content.firstChild)&&y.nodeAfter&&y.nodeAfter.sameMarkup(a.content.firstChild))h.setSelection(new ie(y));else{let x=h.mapping.map(c);h.mapping.maps[h.mapping.maps.length-1].forEach((w,_,O,P)=>x=P),h.setSelection(df(n,y,h.doc.resolve(x)))}n.focus(),n.dispatch(h.setMeta("uiEvent","drop"))};Vt.focus=n=>{n.focused||(n.domObserver.stop(),n.dom.classList.add("ProseMirror-focused"),n.domObserver.start(),n.focused=!0,setTimeout(()=>{n.docView&&n.hasFocus()&&!n.domObserver.currentSelection.eq(n.domSelection())&&Kr(n)},20))};Vt.blur=(n,e)=>{let t=e;n.focused&&(n.domObserver.stop(),n.dom.classList.remove("ProseMirror-focused"),n.domObserver.start(),t.relatedTarget&&n.dom.contains(t.relatedTarget)&&n.domObserver.currentSelection.clear(),n.focused=!1)};Vt.beforeinput=(n,e)=>{if(kt&&jn&&e.inputType=="deleteContentBackward"){n.domObserver.flushSoon();let{domChangeCount:r}=n.input;setTimeout(()=>{if(n.input.domChangeCount!=r||(n.dom.blur(),n.focus(),n.someProp("handleKeyDown",o=>o(n,ns(8,"Backspace")))))return;let{$cursor:i}=n.state.selection;i&&i.pos>0&&n.dispatch(n.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let n in Ot)Vt[n]=Ot[n];function ko(n,e){if(n==e)return!0;for(let t in n)if(n[t]!==e[t])return!1;for(let t in e)if(!(t in n))return!1;return!0}class gf{constructor(e,t){this.toDOM=e,this.spec=t||Ei,this.side=this.spec.side||0}map(e,t,r,i){let{pos:o,deleted:a}=e.mapResult(t.from+i,this.side<0?-1:1);return a?null:new Fn(o-r,o-r,this)}valid(){return!0}eq(e){return this==e||e instanceof gf&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&ko(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Vr{constructor(e,t){this.attrs=e,this.spec=t||Ei}map(e,t,r,i){let o=e.map(t.from+i,this.spec.inclusiveStart?-1:1)-r,a=e.map(t.to+i,this.spec.inclusiveEnd?1:-1)-r;return o>=a?null:new Fn(o,a,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof Vr&&ko(this.attrs,e.attrs)&&ko(this.spec,e.spec)}static is(e){return e.type instanceof Vr}destroy(){}}class vf{constructor(e,t){this.attrs=e,this.spec=t||Ei}map(e,t,r,i){let o=e.mapResult(t.from+i,1);if(o.deleted)return null;let a=e.mapResult(t.to+i,-1);return a.deleted||a.pos<=o.pos?null:new Fn(o.pos-r,a.pos-r,this)}valid(e,t){let{index:r,offset:i}=e.content.findIndex(t.from),o;return i==t.from&&!(o=e.child(r)).isText&&i+o.nodeSize==t.to}eq(e){return this==e||e instanceof vf&&ko(this.attrs,e.attrs)&&ko(this.spec,e.spec)}destroy(){}}class Fn{constructor(e,t,r){this.from=e,this.to=t,this.type=r}copy(e,t){return new Fn(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,r){return this.type.map(e,this,t,r)}static widget(e,t,r){return new Fn(e,e,new gf(t,r))}static inline(e,t,r,i){return new Fn(e,t,new Vr(r,i))}static node(e,t,r,i){return new Fn(e,t,new vf(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof Vr}}const Qi=[],Ei={};class yt{constructor(e,t){this.local=e.length?e:Qi,this.children=t.length?t:Qi}static create(e,t){return t.length?qa(t,e,0,Ei):vt}find(e,t,r){let i=[];return this.findInner(e==null?0:e,t==null?1e9:t,i,0,r),i}findInner(e,t,r,i,o){for(let a=0;a<this.local.length;a++){let u=this.local[a];u.from<=t&&u.to>=e&&(!o||o(u.spec))&&r.push(u.copy(u.from+i,u.to+i))}for(let a=0;a<this.children.length;a+=3)if(this.children[a]<t&&this.children[a+1]>e){let u=this.children[a]+1;this.children[a+2].findInner(e-u,t-u,r,i+u,o)}}map(e,t,r){return this==vt||e.maps.length==0?this:this.mapInner(e,t,0,0,r||Ei)}mapInner(e,t,r,i,o){let a;for(let u=0;u<this.local.length;u++){let c=this.local[u].map(e,r,i);c&&c.type.valid(t,c)?(a||(a=[])).push(c):o.onRemove&&o.onRemove(this.local[u].spec)}return this.children.length?a_(this.children,a||[],e,t,r,i,o):a?new yt(a.sort(Ai),Qi):vt}add(e,t){return t.length?this==vt?yt.create(e,t):this.addInner(e,t,0):this}addInner(e,t,r){let i,o=0;e.forEach((u,c)=>{let h=c+r,d;if(!!(d=l0(t,u,h))){for(i||(i=this.children.slice());o<i.length&&i[o]<c;)o+=3;i[o]==c?i[o+2]=i[o+2].addInner(u,d,h+1):i.splice(o,0,c,c+u.nodeSize,qa(d,u,h+1,Ei)),o+=3}});let a=a0(o?u0(t):t,-r);for(let u=0;u<a.length;u++)a[u].type.valid(e,a[u])||a.splice(u--,1);return new yt(a.length?this.local.concat(a).sort(Ai):this.local,i||this.children)}remove(e){return e.length==0||this==vt?this:this.removeInner(e,0)}removeInner(e,t){let r=this.children,i=this.local;for(let o=0;o<r.length;o+=3){let a,u=r[o]+t,c=r[o+1]+t;for(let d=0,m;d<e.length;d++)(m=e[d])&&m.from>u&&m.to<c&&(e[d]=null,(a||(a=[])).push(m));if(!a)continue;r==this.children&&(r=this.children.slice());let h=r[o+2].removeInner(a,u+1);h!=vt?r[o+2]=h:(r.splice(o,3),o-=3)}if(i.length){for(let o=0,a;o<e.length;o++)if(a=e[o])for(let u=0;u<i.length;u++)i[u].eq(a,t)&&(i==this.local&&(i=this.local.slice()),i.splice(u--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new yt(i,r):vt}forChild(e,t){if(this==vt)return this;if(t.isLeaf)return yt.empty;let r,i;for(let u=0;u<this.children.length;u+=3)if(this.children[u]>=e){this.children[u]==e&&(r=this.children[u+2]);break}let o=e+1,a=o+t.content.size;for(let u=0;u<this.local.length;u++){let c=this.local[u];if(c.from<a&&c.to>o&&c.type instanceof Vr){let h=Math.max(o,c.from)-o,d=Math.min(a,c.to)-o;h<d&&(i||(i=[])).push(c.copy(h,d))}}if(i){let u=new yt(i.sort(Ai),Qi);return r?new Lr([u,r]):u}return r||vt}eq(e){if(this==e)return!0;if(!(e instanceof yt)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return yf(this.localsInner(e))}localsInner(e){if(this==vt)return Qi;if(e.inlineContent||!this.local.some(Vr.is))return this.local;let t=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof Vr||t.push(this.local[r]);return t}}yt.empty=new yt([],[]);yt.removeOverlap=yf;const vt=yt.empty;class Lr{constructor(e){this.members=e}map(e,t){const r=this.members.map(i=>i.map(e,t,Ei));return Lr.from(r)}forChild(e,t){if(t.isLeaf)return yt.empty;let r=[];for(let i=0;i<this.members.length;i++){let o=this.members[i].forChild(e,t);o!=vt&&(o instanceof Lr?r=r.concat(o.members):r.push(o))}return Lr.from(r)}eq(e){if(!(e instanceof Lr)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,r=!0;for(let i=0;i<this.members.length;i++){let o=this.members[i].localsInner(e);if(!!o.length)if(!t)t=o;else{r&&(t=t.slice(),r=!1);for(let a=0;a<o.length;a++)t.push(o[a])}}return t?yf(r?t:t.sort(Ai)):Qi}static from(e){switch(e.length){case 0:return vt;case 1:return e[0];default:return new Lr(e)}}}function a_(n,e,t,r,i,o,a){let u=n.slice(),c=(d,m,g,y)=>{for(let x=0;x<u.length;x+=3){let w=u[x+1],_;if(w<0||d>w+o)continue;let O=u[x]+o;m>=O?u[x+1]=d<=O?-2:-1:g>=i&&(_=y-g-(m-d))&&(u[x]+=_,u[x+1]+=_)}};for(let d=0;d<t.maps.length;d++)t.maps[d].forEach(c);let h=!1;for(let d=0;d<u.length;d+=3)if(u[d+1]<0){if(u[d+1]==-2){h=!0,u[d+1]=-1;continue}let m=t.map(n[d]+o),g=m-i;if(g<0||g>=r.content.size){h=!0;continue}let y=t.map(n[d+1]+o,-1),x=y-i,{index:w,offset:_}=r.content.findIndex(g),O=r.maybeChild(w);if(O&&_==g&&_+O.nodeSize==x){let P=u[d+2].mapInner(t,O,m+1,n[d]+o+1,a);P!=vt?(u[d]=g,u[d+1]=x,u[d+2]=P):(u[d+1]=-2,h=!0)}else h=!0}if(h){let d=l_(u,n,e,t,i,o,a),m=qa(d,r,0,a);e=m.local;for(let g=0;g<u.length;g+=3)u[g+1]<0&&(u.splice(g,3),g-=3);for(let g=0,y=0;g<m.children.length;g+=3){let x=m.children[g];for(;y<u.length&&u[y]<x;)y+=3;u.splice(y,0,m.children[g],m.children[g+1],m.children[g+2])}}return new yt(e.sort(Ai),u)}function a0(n,e){if(!e||!n.length)return n;let t=[];for(let r=0;r<n.length;r++){let i=n[r];t.push(new Fn(i.from+e,i.to+e,i.type))}return t}function l_(n,e,t,r,i,o,a){function u(c,h){for(let d=0;d<c.local.length;d++){let m=c.local[d].map(r,i,h);m?t.push(m):a.onRemove&&a.onRemove(c.local[d].spec)}for(let d=0;d<c.children.length;d+=3)u(c.children[d+2],c.children[d]+h+1)}for(let c=0;c<n.length;c+=3)n[c+1]==-1&&u(n[c+2],e[c]+o+1);return t}function l0(n,e,t){if(e.isLeaf)return null;let r=t+e.nodeSize,i=null;for(let o=0,a;o<n.length;o++)(a=n[o])&&a.from>t&&a.to<r&&((i||(i=[])).push(a),n[o]=null);return i}function u0(n){let e=[];for(let t=0;t<n.length;t++)n[t]!=null&&e.push(n[t]);return e}function qa(n,e,t,r){let i=[],o=!1;e.forEach((u,c)=>{let h=l0(n,u,c+t);if(h){o=!0;let d=qa(h,u,t+c+1,r);d!=vt&&i.push(c,c+u.nodeSize,d)}});let a=a0(o?u0(n):n,-t).sort(Ai);for(let u=0;u<a.length;u++)a[u].type.valid(e,a[u])||(r.onRemove&&r.onRemove(a[u].spec),a.splice(u--,1));return a.length||i.length?new yt(a,i):vt}function Ai(n,e){return n.from-e.from||n.to-e.to}function yf(n){let e=n;for(let t=0;t<e.length-1;t++){let r=e[t];if(r.from!=r.to)for(let i=t+1;i<e.length;i++){let o=e[i];if(o.from==r.from){o.to!=r.to&&(e==n&&(e=n.slice()),e[i]=o.copy(o.from,r.to),rm(e,i+1,o.copy(r.to,o.to)));continue}else{o.from<r.to&&(e==n&&(e=n.slice()),e[t]=r.copy(r.from,o.from),rm(e,i,r.copy(o.from,r.to)));break}}}return e}function rm(n,e,t){for(;e<n.length&&Ai(t,n[e])>0;)e++;n.splice(e,0,t)}function hc(n){let e=[];return n.someProp("decorations",t=>{let r=t(n.state);r&&r!=vt&&e.push(r)}),n.cursorWrapper&&e.push(yt.create(n.state.doc,[n.cursorWrapper.deco])),Lr.from(e)}const u_={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},c_=Qt&&Hr<=11;class f_{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class d_{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new f_,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);Qt&&Hr<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),c_&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&this.observer.observe(this.view.dom,u_),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(!!Yp(this.view)){if(this.suppressingSelectionUpdates)return Kr(this.view);if(Qt&&Hr<=11&&!this.view.state.selection.empty){let e=this.view.domSelection();if(e.focusNode&&So(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelection())}ignoreSelectionChange(e){if(e.rangeCount==0)return!0;let t=e.getRangeAt(0).commonAncestorContainer,r=this.view.docView.nearestDesc(t);if(r&&r.ignoreMutation({type:"selection",target:t.nodeType==3?t.parentNode:t}))return this.setCurSelection(),!0}flush(){if(!this.view.docView||this.flushingSoon>-1)return;let e=this.observer?this.observer.takeRecords():[];this.queue.length&&(e=this.queue.concat(e),this.queue.length=0);let t=this.view.domSelection(),r=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(t)&&Yp(this.view)&&!this.ignoreSelectionChange(t),i=-1,o=-1,a=!1,u=[];if(this.view.editable)for(let c=0;c<e.length;c++){let h=this.registerMutation(e[c],u);h&&(i=i<0?h.from:Math.min(h.from,i),o=o<0?h.to:Math.max(h.to,o),h.typeOver&&(a=!0))}if(er&&u.length>1){let c=u.filter(h=>h.nodeName=="BR");if(c.length==2){let h=c[0],d=c[1];h.parentNode&&h.parentNode.parentNode==d.parentNode?d.remove():h.remove()}}(i>-1||r)&&(i>-1&&(this.view.docView.markDirty(i,o),h_(this.view)),this.handleDOMChange(i,o,a,u),this.view.docView&&this.view.docView.dirty?this.view.updateState(this.view.state):this.currentSelection.eq(t)||Kr(this.view),this.currentSelection.set(t))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let d=0;d<e.addedNodes.length;d++)t.push(e.addedNodes[d]);if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,o=e.nextSibling;if(Qt&&Hr<=11&&e.addedNodes.length)for(let d=0;d<e.addedNodes.length;d++){let{previousSibling:m,nextSibling:g}=e.addedNodes[d];(!m||Array.prototype.indexOf.call(e.addedNodes,m)<0)&&(i=m),(!g||Array.prototype.indexOf.call(e.addedNodes,g)<0)&&(o=g)}let a=i&&i.parentNode==e.target?Yt(i)+1:0,u=r.localPosFromDOM(e.target,a,-1),c=o&&o.parentNode==e.target?Yt(o):e.target.childNodes.length,h=r.localPosFromDOM(e.target,c,1);return{from:u,to:h}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}}}let im=!1;function h_(n){im||(im=!0,getComputedStyle(n.dom).whiteSpace=="normal"&&console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."))}function p_(n,e,t){let{node:r,fromOffset:i,toOffset:o,from:a,to:u}=n.docView.parseRange(e,t),c=n.domSelection(),h,d=c.anchorNode;if(d&&n.dom.contains(d.nodeType==1?d:d.parentNode)&&(h=[{node:d,offset:c.anchorOffset}],cf(c)||h.push({node:c.focusNode,offset:c.focusOffset})),kt&&n.input.lastKeyCode===8)for(let _=o;_>i;_--){let O=r.childNodes[_-1],P=O.pmViewDesc;if(O.nodeName=="BR"&&!P){o=_;break}if(!P||P.size)break}let m=n.state.doc,g=n.someProp("domParser")||gs.fromSchema(n.state.schema),y=m.resolve(a),x=null,w=g.parse(r,{topNode:y.parent,topMatch:y.parent.contentMatchAt(y.index()),topOpen:!0,from:i,to:o,preserveWhitespace:y.parent.type.whitespace=="pre"?"full":!0,findPositions:h,ruleFromNode:m_,context:y});if(h&&h[0].pos!=null){let _=h[0].pos,O=h[1]&&h[1].pos;O==null&&(O=_),x={anchor:_+a,head:O+a}}return{doc:w,sel:x,from:a,to:u}}function m_(n){let e=n.pmViewDesc;if(e)return e.parseRule();if(n.nodeName=="BR"&&n.parentNode){if(Ht&&/^(ul|ol)$/i.test(n.parentNode.nodeName)){let t=document.createElement("div");return t.appendChild(document.createElement("li")),{skip:t}}else if(n.parentNode.lastChild==n||Ht&&/^(tr|table)$/i.test(n.parentNode.nodeName))return{ignore:!0}}else if(n.nodeName=="IMG"&&n.getAttribute("mark-placeholder"))return{ignore:!0};return null}function g_(n,e,t,r,i){if(e<0){let H=n.input.lastSelectionTime>Date.now()-50?n.input.lastSelectionOrigin:null,fe=Ug(n,H);if(fe&&!n.state.selection.eq(fe)){let Ee=n.state.tr.setSelection(fe);H=="pointer"?Ee.setMeta("pointer",!0):H=="key"&&Ee.scrollIntoView(),n.dispatch(Ee)}return}let o=n.state.doc.resolve(e),a=o.sharedDepth(t);e=o.before(a+1),t=n.state.doc.resolve(t).after(a+1);let u=n.state.selection,c=p_(n,e,t);if(kt&&n.cursorWrapper&&c.sel&&c.sel.anchor==n.cursorWrapper.deco.from){let H=n.cursorWrapper.deco.type.toDOM.nextSibling,fe=H&&H.nodeValue?H.nodeValue.length:1;c.sel={anchor:c.sel.anchor+fe,head:c.sel.anchor+fe}}let h=n.state.doc,d=h.slice(c.from,c.to),m,g;n.input.lastKeyCode===8&&Date.now()-100<n.input.lastKeyCodeTime?(m=n.state.selection.to,g="end"):(m=n.state.selection.from,g="start"),n.input.lastKeyCode=null;let y=b_(d.content,c.doc.content,c.from,m,g);if((ys&&n.input.lastIOSEnter>Date.now()-225||jn)&&i.some(H=>H.nodeName=="DIV"||H.nodeName=="P")&&(!y||y.endA>=y.endB)&&n.someProp("handleKeyDown",H=>H(n,ns(13,"Enter")))){n.input.lastIOSEnter=0;return}if(!y)if(r&&u instanceof be&&!u.empty&&u.$head.sameParent(u.$anchor)&&!n.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))y={start:u.from,endA:u.to,endB:u.to};else{if(c.sel){let H=sm(n,n.state.doc,c.sel);H&&!H.eq(n.state.selection)&&n.dispatch(n.state.tr.setSelection(H))}return}n.input.domChangeCount++,n.state.selection.from<n.state.selection.to&&y.start==y.endB&&n.state.selection instanceof be&&(y.start>n.state.selection.from&&y.start<=n.state.selection.from+2&&n.state.selection.from>=c.from?y.start=n.state.selection.from:y.endA<n.state.selection.to&&y.endA>=n.state.selection.to-2&&n.state.selection.to<=c.to&&(y.endB+=n.state.selection.to-y.endA,y.endA=n.state.selection.to)),Qt&&Hr<=11&&y.endB==y.start+1&&y.endA==y.start&&y.start>c.from&&c.doc.textBetween(y.start-c.from-1,y.start-c.from+1)==" \xA0"&&(y.start--,y.endA--,y.endB--);let x=c.doc.resolveNoCache(y.start-c.from),w=c.doc.resolveNoCache(y.endB-c.from),_=h.resolve(y.start),O=x.sameParent(w)&&x.parent.inlineContent&&_.end()>=y.endA,P;if((ys&&n.input.lastIOSEnter>Date.now()-225&&(!O||i.some(H=>H.nodeName=="DIV"||H.nodeName=="P"))||!O&&x.pos<c.doc.content.size&&(P=pe.findFrom(c.doc.resolve(x.pos+1),1,!0))&&P.head==w.pos)&&n.someProp("handleKeyDown",H=>H(n,ns(13,"Enter")))){n.input.lastIOSEnter=0;return}if(n.state.selection.anchor>y.start&&y_(h,y.start,y.endA,x,w)&&n.someProp("handleKeyDown",H=>H(n,ns(8,"Backspace")))){jn&&kt&&n.domObserver.suppressSelectionUpdates();return}kt&&jn&&y.endB==y.start&&(n.input.lastAndroidDelete=Date.now()),jn&&!O&&x.start()!=w.start()&&w.parentOffset==0&&x.depth==w.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==y.endA&&(y.endB-=2,w=c.doc.resolveNoCache(y.endB-c.from),setTimeout(()=>{n.someProp("handleKeyDown",function(H){return H(n,ns(13,"Enter"))})},20));let z=y.start,E=y.endA,q,$,K;if(O){if(x.pos==w.pos)Qt&&Hr<=11&&x.parentOffset==0&&(n.domObserver.suppressSelectionUpdates(),setTimeout(()=>Kr(n),20)),q=n.state.tr.delete(z,E),$=h.resolve(y.start).marksAcross(h.resolve(y.endA));else if(y.endA==y.endB&&(K=v_(x.parent.content.cut(x.parentOffset,w.parentOffset),_.parent.content.cut(_.parentOffset,y.endA-_.start()))))q=n.state.tr,K.type=="add"?q.addMark(z,E,K.mark):q.removeMark(z,E,K.mark);else if(x.parent.child(x.index()).isText&&x.index()==w.index()-(w.textOffset?0:1)){let H=x.parent.textBetween(x.parentOffset,w.parentOffset);if(n.someProp("handleTextInput",fe=>fe(n,z,E,H)))return;q=n.state.tr.insertText(H,z,E)}}if(q||(q=n.state.tr.replace(z,E,c.doc.slice(y.start-c.from,y.endB-c.from))),c.sel){let H=sm(n,q.doc,c.sel);H&&!(kt&&jn&&n.composing&&H.empty&&(y.start!=y.endB||n.input.lastAndroidDelete<Date.now()-100)&&(H.head==z||H.head==q.mapping.map(E)-1)||Qt&&H.empty&&H.head==z)&&q.setSelection(H)}$&&q.ensureMarks($),n.dispatch(q.scrollIntoView())}function sm(n,e,t){return Math.max(t.anchor,t.head)>e.content.size?null:df(n,e.resolve(t.anchor),e.resolve(t.head))}function v_(n,e){let t=n.firstChild.marks,r=e.firstChild.marks,i=t,o=r,a,u,c;for(let d=0;d<r.length;d++)i=r[d].removeFromSet(i);for(let d=0;d<t.length;d++)o=t[d].removeFromSet(o);if(i.length==1&&o.length==0)u=i[0],a="add",c=d=>d.mark(u.addToSet(d.marks));else if(i.length==0&&o.length==1)u=o[0],a="remove",c=d=>d.mark(u.removeFromSet(d.marks));else return null;let h=[];for(let d=0;d<e.childCount;d++)h.push(c(e.child(d)));if(L.from(h).eq(n))return{mark:u,type:a}}function y_(n,e,t,r,i){if(!r.parent.isTextblock||t-e<=i.pos-r.pos||pc(r,!0,!1)<i.pos)return!1;let o=n.resolve(e);if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;let a=n.resolve(pc(o,!0,!0));return!a.parent.isTextblock||a.pos>t||pc(a,!0,!1)<t?!1:r.parent.content.cut(r.parentOffset).eq(a.parent.content)}function pc(n,e,t){let r=n.depth,i=e?n.end():n.pos;for(;r>0&&(e||n.indexAfter(r)==n.node(r).childCount);)r--,i++,e=!1;if(t){let o=n.node(r).maybeChild(n.indexAfter(r));for(;o&&!o.isLeaf;)o=o.firstChild,i++}return i}function b_(n,e,t,r,i){let o=n.findDiffStart(e,t);if(o==null)return null;let{a,b:u}=n.findDiffEnd(e,t+n.size,t+e.size);if(i=="end"){let c=Math.max(0,o-Math.min(a,u));r-=a+c-o}return a<o&&n.size<e.size?(o-=r<=o&&r>=a?o-r:0,u=o+(u-a),a=o):u<o&&(o-=r<=o&&r>=u?o-r:0,a=o+(a-u),u=o),{start:o,endA:a,endB:u}}class D_{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new VA,this.prevDirectPlugins=[],this.pluginViews=[],this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(cm),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=lm(this),am(this),this.nodeViews=um(this),this.docView=Up(this.state.doc,om(this),hc(this),this.dom,this),this.domObserver=new d_(this,(r,i,o,a)=>g_(this,r,i,o,a)),this.domObserver.start(),WA(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let t in e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Hc(this),this._props=e,e.plugins&&(e.plugins.forEach(cm),this.directPlugins=e.plugins),this.updateStateInner(e.state,!0)}setProps(e){let t={};for(let r in this._props)t[r]=this._props[r];t.state=this.state;for(let r in e)t[r]=e[r];this.update(t)}updateState(e){this.updateStateInner(e,this.state.plugins!=e.plugins)}updateStateInner(e,t){let r=this.state,i=!1,o=!1;if(e.storedMarks&&this.composing&&(s0(this),o=!0),this.state=e,t){let m=um(this);w_(m,this.nodeViews)&&(this.nodeViews=m,i=!0),Hc(this)}this.editable=lm(this),am(this);let a=hc(this),u=om(this),c=t?"reset":e.scrollToSelection>r.scrollToSelection?"to selection":"preserve",h=i||!this.docView.matchesNode(e.doc,u,a);(h||!e.selection.eq(r.selection))&&(o=!0);let d=c=="preserve"&&o&&this.dom.style.overflowAnchor==null&&lA(this);if(o){this.domObserver.stop();let m=h&&(Qt||kt)&&!this.composing&&!r.selection.empty&&!e.selection.empty&&x_(r.selection,e.selection);if(h){let g=kt?this.trackWrites=this.domSelection().focusNode:null;(i||!this.docView.update(e.doc,u,a,this))&&(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=Up(e.doc,u,a,this.dom,this)),g&&!this.trackWrites&&(m=!0)}m||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelection())&&NA(this))?Kr(this,m):(Kg(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}if(this.updatePluginViews(r),c=="reset")this.dom.scrollTop=0;else if(c=="to selection"){let m=this.domSelection().focusNode;if(!this.someProp("handleScrollToSelection",g=>g(this)))if(e.selection instanceof ie){let g=this.docView.domAfterPos(e.selection.from);g.nodeType==1&&zp(this,g.getBoundingClientRect(),m)}else zp(this,this.coordsAtPos(e.selection.head,1),m)}else d&&uA(d)}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let t=0;t<this.directPlugins.length;t++){let r=this.directPlugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let t=0;t<this.state.plugins.length;t++){let r=this.state.plugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let t=0;t<this.pluginViews.length;t++){let r=this.pluginViews[t];r.update&&r.update(this,e)}}someProp(e,t){let r=this._props&&this._props[e],i;if(r!=null&&(i=t?t(r):r))return i;for(let a=0;a<this.directPlugins.length;a++){let u=this.directPlugins[a].props[e];if(u!=null&&(i=t?t(u):u))return i}let o=this.state.plugins;if(o)for(let a=0;a<o.length;a++){let u=o[a].props[e];if(u!=null&&(i=t?t(u):u))return i}}hasFocus(){return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&cA(this.dom),Kr(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let t=this.dom.parentNode;t;t=t.parentNode)if(t.nodeType==9||t.nodeType==11&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t}return e||document}posAtCoords(e){return mA(this,e)}coordsAtPos(e,t=1){return Pg(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t,r=-1){let i=this.docView.posFromDOM(e,t,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,t){return DA(this,t||this.state,e)}destroy(){!this.docView||(UA(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],hc(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)}get isDestroyed(){return this.docView==null}dispatchEvent(e){return KA(this,e)}dispatch(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))}domSelection(){return this.root.getSelection()}}function om(n){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(n.editable),e.translate="no",n.someProp("attributes",t=>{if(typeof t=="function"&&(t=t(n.state)),t)for(let r in t)r=="class"&&(e.class+=" "+t[r]),r=="style"?e.style=(e.style?e.style+";":"")+t[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(t[r]))}),[Fn.node(0,n.state.doc.content.size,e)]}function am(n){if(n.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),n.cursorWrapper={dom:e,deco:Fn.widget(n.state.selection.head,e,{raw:!0,marks:n.markCursor})}}else n.cursorWrapper=null}function lm(n){return!n.someProp("editable",e=>e(n.state)===!1)}function x_(n,e){let t=Math.min(n.$anchor.sharedDepth(n.head),e.$anchor.sharedDepth(e.head));return n.$anchor.start(t)!=e.$anchor.start(t)}function um(n){let e=Object.create(null);function t(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return n.someProp("nodeViews",t),n.someProp("markViews",t),e}function w_(n,e){let t=0,r=0;for(let i in n){if(n[i]!=e[i])return!0;t++}for(let i in e)r++;return t!=r}function cm(n){if(n.spec.state||n.spec.filterTransaction||n.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var jr={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Ka={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},fm=typeof navigator<"u"&&/Chrome\/(\d+)/.exec(navigator.userAgent);typeof navigator<"u"&&/Gecko\/\d+/.test(navigator.userAgent);var C_=typeof navigator<"u"&&/Mac/.test(navigator.platform),E_=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),A_=C_||fm&&+fm[1]<57;for(var ft=0;ft<10;ft++)jr[48+ft]=jr[96+ft]=String(ft);for(var ft=1;ft<=24;ft++)jr[ft+111]="F"+ft;for(var ft=65;ft<=90;ft++)jr[ft]=String.fromCharCode(ft+32),Ka[ft]=String.fromCharCode(ft);for(var mc in jr)Ka.hasOwnProperty(mc)||(Ka[mc]=jr[mc]);function __(n){var e=A_&&(n.ctrlKey||n.altKey||n.metaKey)||E_&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?Ka:jr)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}const S_=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function k_(n){let e=n.split(/-(?!$)/),t=e[e.length-1];t=="Space"&&(t=" ");let r,i,o,a;for(let u=0;u<e.length-1;u++){let c=e[u];if(/^(cmd|meta|m)$/i.test(c))a=!0;else if(/^a(lt)?$/i.test(c))r=!0;else if(/^(c|ctrl|control)$/i.test(c))i=!0;else if(/^s(hift)?$/i.test(c))o=!0;else if(/^mod$/i.test(c))S_?a=!0:i=!0;else throw new Error("Unrecognized modifier name: "+c)}return r&&(t="Alt-"+t),i&&(t="Ctrl-"+t),a&&(t="Meta-"+t),o&&(t="Shift-"+t),t}function O_(n){let e=Object.create(null);for(let t in n)e[k_(t)]=n[t];return e}function gc(n,e,t){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t!==!1&&e.shiftKey&&(n="Shift-"+n),n}function T_(n){return new tn({props:{handleKeyDown:M_(n)}})}function M_(n){let e=O_(n);return function(t,r){let i=__(r),o=i.length==1&&i!=" ",a,u=e[gc(i,r,!o)];if(u&&u(t.state,t.dispatch,t))return!0;if(o&&(r.shiftKey||r.altKey||r.metaKey||i.charCodeAt(0)>127)&&(a=jr[r.keyCode])&&a!=i){let c=e[gc(a,r,!0)];if(c&&c(t.state,t.dispatch,t))return!0}else if(o&&r.shiftKey){let c=e[gc(i,r,!0)];if(c&&c(t.state,t.dispatch,t))return!0}return!1}}const F_=(n,e)=>n.selection.empty?!1:(e&&e(n.tr.deleteSelection().scrollIntoView()),!0),N_=(n,e,t)=>{let{$cursor:r}=n.selection;if(!r||(t?!t.endOfTextblock("backward",n):r.parentOffset>0))return!1;let i=c0(r);if(!i){let a=r.blockRange(),u=a&&Os(a);return u==null?!1:(e&&e(n.tr.lift(a,u).scrollIntoView()),!0)}let o=i.nodeBefore;if(!o.type.spec.isolating&&h0(n,i,e))return!0;if(r.parent.content.size==0&&(Ds(o,"end")||ie.isSelectable(o))){let a=af(n.doc,r.before(),r.after(),G.empty);if(a&&a.slice.size<a.to-a.from){if(e){let u=n.tr.step(a);u.setSelection(Ds(o,"end")?pe.findFrom(u.doc.resolve(u.mapping.map(i.pos,-1)),-1):ie.create(u.doc,i.pos-o.nodeSize)),e(u.scrollIntoView())}return!0}}return o.isAtom&&i.depth==r.depth-1?(e&&e(n.tr.delete(i.pos-o.nodeSize,i.pos).scrollIntoView()),!0):!1};function Ds(n,e,t=!1){for(let r=n;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(t&&r.childCount!=1)return!1}return!1}const R_=(n,e,t)=>{let{$head:r,empty:i}=n.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("backward",n):r.parentOffset>0)return!1;o=c0(r)}let a=o&&o.nodeBefore;return!a||!ie.isSelectable(a)?!1:(e&&e(n.tr.setSelection(ie.create(n.doc,o.pos-a.nodeSize)).scrollIntoView()),!0)};function c0(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){if(n.index(e)>0)return n.doc.resolve(n.before(e+1));if(n.node(e).type.spec.isolating)break}return null}const B_=(n,e,t)=>{let{$cursor:r}=n.selection;if(!r||(t?!t.endOfTextblock("forward",n):r.parentOffset<r.parent.content.size))return!1;let i=f0(r);if(!i)return!1;let o=i.nodeAfter;if(h0(n,i,e))return!0;if(r.parent.content.size==0&&(Ds(o,"start")||ie.isSelectable(o))){let a=af(n.doc,r.before(),r.after(),G.empty);if(a&&a.slice.size<a.to-a.from){if(e){let u=n.tr.step(a);u.setSelection(Ds(o,"start")?pe.findFrom(u.doc.resolve(u.mapping.map(i.pos)),1):ie.create(u.doc,u.mapping.map(i.pos))),e(u.scrollIntoView())}return!0}}return o.isAtom&&i.depth==r.depth-1?(e&&e(n.tr.delete(i.pos,i.pos+o.nodeSize).scrollIntoView()),!0):!1},I_=(n,e,t)=>{let{$head:r,empty:i}=n.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("forward",n):r.parentOffset<r.parent.content.size)return!1;o=f0(r)}let a=o&&o.nodeAfter;return!a||!ie.isSelectable(a)?!1:(e&&e(n.tr.setSelection(ie.create(n.doc,o.pos)).scrollIntoView()),!0)};function f0(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){let t=n.node(e);if(n.index(e)+1<t.childCount)return n.doc.resolve(n.after(e+1));if(t.type.spec.isolating)break}return null}const P_=(n,e)=>{let{$from:t,$to:r}=n.selection,i=t.blockRange(r),o=i&&Os(i);return o==null?!1:(e&&e(n.tr.lift(i,o).scrollIntoView()),!0)},L_=(n,e)=>{let{$head:t,$anchor:r}=n.selection;return!t.parent.type.spec.code||!t.sameParent(r)?!1:(e&&e(n.tr.insertText(`
`).scrollIntoView()),!0)};function d0(n){for(let e=0;e<n.edgeCount;e++){let{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}const z_=(n,e)=>{let{$head:t,$anchor:r}=n.selection;if(!t.parent.type.spec.code||!t.sameParent(r))return!1;let i=t.node(-1),o=t.indexAfter(-1),a=d0(i.contentMatchAt(o));if(!a||!i.canReplaceWith(o,o,a))return!1;if(e){let u=t.after(),c=n.tr.replaceWith(u,u,a.createAndFill());c.setSelection(pe.near(c.doc.resolve(u),1)),e(c.scrollIntoView())}return!0},$_=(n,e)=>{let t=n.selection,{$from:r,$to:i}=t;if(t instanceof Rn||r.parent.inlineContent||i.parent.inlineContent)return!1;let o=d0(i.parent.contentMatchAt(i.indexAfter()));if(!o||!o.isTextblock)return!1;if(e){let a=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,u=n.tr.insert(a,o.createAndFill());u.setSelection(be.create(u.doc,a+1)),e(u.scrollIntoView())}return!0},H_=(n,e)=>{let{$cursor:t}=n.selection;if(!t||t.parent.content.size)return!1;if(t.depth>1&&t.after()!=t.end(-1)){let o=t.before();if(hs(n.doc,o))return e&&e(n.tr.split(o).scrollIntoView()),!0}let r=t.blockRange(),i=r&&Os(r);return i==null?!1:(e&&e(n.tr.lift(r,i).scrollIntoView()),!0)},V_=(n,e)=>{let{$from:t,to:r}=n.selection,i,o=t.sharedDepth(r);return o==0?!1:(i=t.before(o),e&&e(n.tr.setSelection(ie.create(n.doc,i))),!0)};function W_(n,e,t){let r=e.nodeBefore,i=e.nodeAfter,o=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(o-1,o)?(t&&t(n.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(o,o+1)||!(i.isTextblock||wl(n.doc,e.pos))?!1:(t&&t(n.tr.clearIncompatible(e.pos,r.type,r.contentMatchAt(r.childCount)).join(e.pos).scrollIntoView()),!0)}function h0(n,e,t){let r=e.nodeBefore,i=e.nodeAfter,o,a;if(r.type.spec.isolating||i.type.spec.isolating)return!1;if(W_(n,e,t))return!0;let u=e.parent.canReplace(e.index(),e.index()+1);if(u&&(o=(a=r.contentMatchAt(r.childCount)).findWrapping(i.type))&&a.matchType(o[0]||i.type).validEnd){if(t){let m=e.pos+i.nodeSize,g=L.empty;for(let w=o.length-1;w>=0;w--)g=L.from(o[w].create(null,g));g=L.from(r.copy(g));let y=n.tr.step(new it(e.pos-1,m,e.pos,m,new G(g,1,0),o.length,!0)),x=m+2*o.length;wl(y.doc,x)&&y.join(x),t(y.scrollIntoView())}return!0}let c=pe.findFrom(e,1),h=c&&c.$from.blockRange(c.$to),d=h&&Os(h);if(d!=null&&d>=e.depth)return t&&t(n.tr.lift(h,d).scrollIntoView()),!0;if(u&&Ds(i,"start",!0)&&Ds(r,"end")){let m=r,g=[];for(;g.push(m),!m.isTextblock;)m=m.lastChild;let y=i,x=1;for(;!y.isTextblock;y=y.firstChild)x++;if(m.canReplace(m.childCount,m.childCount,y.content)){if(t){let w=L.empty;for(let O=g.length-1;O>=0;O--)w=L.from(g[O].copy(w));let _=n.tr.step(new it(e.pos-g.length,e.pos+i.nodeSize,e.pos+x,e.pos+i.nodeSize-x,new G(w,g.length,0),0,!0));t(_.scrollIntoView())}return!0}}return!1}function p0(n){return function(e,t){let r=e.selection,i=n<0?r.$from:r.$to,o=i.depth;for(;i.node(o).isInline;){if(!o)return!1;o--}return i.node(o).isTextblock?(t&&t(e.tr.setSelection(be.create(e.doc,n<0?i.start(o):i.end(o)))),!0):!1}}const U_=p0(-1),q_=p0(1);function K_(n,e=null){return function(t,r){let{$from:i,$to:o}=t.selection,a=i.blockRange(o),u=a&&Eg(a,n,e);return u?(r&&r(t.tr.wrap(a,u).scrollIntoView()),!0):!1}}function dm(n,e=null){return function(t,r){let{from:i,to:o}=t.selection,a=!1;return t.doc.nodesBetween(i,o,(u,c)=>{if(a)return!1;if(!(!u.isTextblock||u.hasMarkup(n,e)))if(u.type==n)a=!0;else{let h=t.doc.resolve(c),d=h.index();a=h.parent.canReplaceWith(d,d+1,n)}}),a?(r&&r(t.tr.setBlockType(i,o,n,e).scrollIntoView()),!0):!1}}typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function j_(n,e=null){return function(t,r){let{$from:i,$to:o}=t.selection,a=i.blockRange(o),u=!1,c=a;if(!a)return!1;if(a.depth>=2&&i.node(a.depth-1).type.compatibleContent(n)&&a.startIndex==0){if(i.index(a.depth-1)==0)return!1;let d=t.doc.resolve(a.start-2);c=new La(d,d,a.depth),a.endIndex<a.parent.childCount&&(a=new La(i,t.doc.resolve(o.end(a.depth)),a.depth)),u=!0}let h=Eg(c,n,e,a);return h?(r&&r(J_(t.tr,a,h,u,n).scrollIntoView()),!0):!1}}function J_(n,e,t,r,i){let o=L.empty;for(let d=t.length-1;d>=0;d--)o=L.from(t[d].type.create(t[d].attrs,o));n.step(new it(e.start-(r?2:0),e.end,e.start,e.end,new G(o,0,0),t.length,!0));let a=0;for(let d=0;d<t.length;d++)t[d].type==i&&(a=d+1);let u=t.length-a,c=e.start+t.length-(r?2:0),h=e.parent;for(let d=e.startIndex,m=e.endIndex,g=!0;d<m;d++,g=!1)!g&&hs(n.doc,c,u)&&(n.split(c,u),c+=2*u),c+=h.child(d).nodeSize;return n}function G_(n){return function(e,t){let{$from:r,$to:i}=e.selection,o=r.blockRange(i,a=>a.childCount>0&&a.firstChild.type==n);return o?t?r.node(o.depth-1).type==n?Y_(e,t,n,o):X_(e,t,o):!0:!1}}function Y_(n,e,t,r){let i=n.tr,o=r.end,a=r.$to.end(r.depth);return o<a&&(i.step(new it(o-1,a,o,a,new G(L.from(t.create(null,r.parent.copy())),1,0),1,!0)),r=new La(i.doc.resolve(r.$from.pos),i.doc.resolve(a),r.depth)),e(i.lift(r,Os(r)).scrollIntoView()),!0}function X_(n,e,t){let r=n.tr,i=t.parent;for(let y=t.end,x=t.endIndex-1,w=t.startIndex;x>w;x--)y-=i.child(x).nodeSize,r.delete(y-1,y+1);let o=r.doc.resolve(t.start),a=o.nodeAfter;if(r.mapping.map(t.end)!=t.start+o.nodeAfter.nodeSize)return!1;let u=t.startIndex==0,c=t.endIndex==i.childCount,h=o.node(-1),d=o.index(-1);if(!h.canReplace(d+(u?0:1),d+1,a.content.append(c?L.empty:L.from(i))))return!1;let m=o.pos,g=m+a.nodeSize;return r.step(new it(m-(u?1:0),g+(c?1:0),m+1,g-1,new G((u?L.empty:L.from(i.copy(L.empty))).append(c?L.empty:L.from(i.copy(L.empty))),u?0:1,c?0:1),u?0:1)),e(r.scrollIntoView()),!0}function Z_(n){return function(e,t){let{$from:r,$to:i}=e.selection,o=r.blockRange(i,h=>h.childCount>0&&h.firstChild.type==n);if(!o)return!1;let a=o.startIndex;if(a==0)return!1;let u=o.parent,c=u.child(a-1);if(c.type!=n)return!1;if(t){let h=c.lastChild&&c.lastChild.type==u.type,d=L.from(h?n.create():null),m=new G(L.from(n.create(null,L.from(u.type.create(null,d)))),h?3:1,0),g=o.start,y=o.end;t(e.tr.step(new it(g-(h?3:1),y,g,y,m,1,!0)).scrollIntoView())}return!0}}function Sl(n){const{state:e,transaction:t}=n;let{selection:r}=t,{doc:i}=t,{storedMarks:o}=t;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),filterTransaction:e.filterTransaction,plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return o},get selection(){return r},get doc(){return i},get tr(){return r=t.selection,i=t.doc,o=t.storedMarks,t}}}class kl{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:r}=this,{view:i}=t,{tr:o}=r,a=this.buildProps(o);return Object.fromEntries(Object.entries(e).map(([u,c])=>[u,(...d)=>{const m=c(...d)(a);return!o.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(o),m}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:r,editor:i,state:o}=this,{view:a}=i,u=[],c=!!e,h=e||o.tr,d=()=>(!c&&t&&!h.getMeta("preventDispatch")&&!this.hasCustomState&&a.dispatch(h),u.every(g=>g===!0)),m={...Object.fromEntries(Object.entries(r).map(([g,y])=>[g,(...w)=>{const _=this.buildProps(h,t),O=y(...w)(_);return u.push(O),m}])),run:d};return m}createCan(e){const{rawCommands:t,state:r}=this,i=void 0,o=e||r.tr,a=this.buildProps(o,i);return{...Object.fromEntries(Object.entries(t).map(([c,h])=>[c,(...d)=>h(...d)({...a,dispatch:i})])),chain:()=>this.createChain(o,i)}}buildProps(e,t=!0){const{rawCommands:r,editor:i,state:o}=this,{view:a}=i;o.storedMarks&&e.setStoredMarks(o.storedMarks);const u={tr:e,editor:i,view:a,state:Sl({state:o,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([c,h])=>[c,(...d)=>h(...d)(u)]))}};return u}}class Q_{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e,...t){const r=this.callbacks[e];return r&&r.forEach(i=>i.apply(this,t)),this}off(e,t){const r=this.callbacks[e];return r&&(t?this.callbacks[e]=r.filter(i=>i!==t):delete this.callbacks[e]),this}removeAllListeners(){this.callbacks={}}}function Y(n,e,t){return n.config[e]===void 0&&n.parent?Y(n.parent,e,t):typeof n.config[e]=="function"?n.config[e].bind({...t,parent:n.parent?Y(n.parent,e,t):null}):n.config[e]}function Ol(n){const e=n.filter(i=>i.type==="extension"),t=n.filter(i=>i.type==="node"),r=n.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:t,markExtensions:r}}function m0(n){const e=[],{nodeExtensions:t,markExtensions:r}=Ol(n),i=[...t,...r],o={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return n.forEach(a=>{const u={name:a.name,options:a.options,storage:a.storage},c=Y(a,"addGlobalAttributes",u);if(!c)return;c().forEach(d=>{d.types.forEach(m=>{Object.entries(d.attributes).forEach(([g,y])=>{e.push({type:m,name:g,attribute:{...o,...y}})})})})}),i.forEach(a=>{const u={name:a.name,options:a.options,storage:a.storage},c=Y(a,"addAttributes",u);if(!c)return;const h=c();Object.entries(h).forEach(([d,m])=>{const g={...o,...m};m.isRequired&&m.default===void 0&&delete g.default,e.push({type:a.name,name:d,attribute:g})})}),e}function st(n,e){if(typeof n=="string"){if(!e.nodes[n])throw Error(`There is no node type named '${n}'. Maybe you forgot to add the extension?`);return e.nodes[n]}return n}function bf(...n){return n.filter(e=>!!e).reduce((e,t)=>{const r={...e};return Object.entries(t).forEach(([i,o])=>{if(!r[i]){r[i]=o;return}i==="class"?r[i]=[r[i],o].join(" "):i==="style"?r[i]=[r[i],o].join("; "):r[i]=o}),r},{})}function Wc(n,e){return e.filter(t=>t.attribute.rendered).map(t=>t.attribute.renderHTML?t.attribute.renderHTML(n.attrs)||{}:{[t.name]:n.attrs[t.name]}).reduce((t,r)=>bf(t,r),{})}function g0(n){return typeof n=="function"}function ye(n,e=void 0,...t){return g0(n)?e?n.bind(e)(...t):n(...t):n}function eS(n={}){return Object.keys(n).length===0&&n.constructor===Object}function tS(n){return typeof n!="string"?n:n.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(n):n==="true"?!0:n==="false"?!1:n}function hm(n,e){return n.style?n:{...n,getAttrs:t=>{const r=n.getAttrs?n.getAttrs(t):n.attrs;if(r===!1)return!1;const i=e.reduce((o,a)=>{const u=a.attribute.parseHTML?a.attribute.parseHTML(t):tS(t.getAttribute(a.name));return u==null?o:{...o,[a.name]:u}},{});return{...r,...i}}}}function pm(n){return Object.fromEntries(Object.entries(n).filter(([e,t])=>e==="attrs"&&eS(t)?!1:t!=null))}function nS(n){var e;const t=m0(n),{nodeExtensions:r,markExtensions:i}=Ol(n),o=(e=r.find(c=>Y(c,"topNode")))===null||e===void 0?void 0:e.name,a=Object.fromEntries(r.map(c=>{const h=t.filter(_=>_.type===c.name),d={name:c.name,options:c.options,storage:c.storage},m=n.reduce((_,O)=>{const P=Y(O,"extendNodeSchema",d);return{..._,...P?P(c):{}}},{}),g=pm({...m,content:ye(Y(c,"content",d)),marks:ye(Y(c,"marks",d)),group:ye(Y(c,"group",d)),inline:ye(Y(c,"inline",d)),atom:ye(Y(c,"atom",d)),selectable:ye(Y(c,"selectable",d)),draggable:ye(Y(c,"draggable",d)),code:ye(Y(c,"code",d)),defining:ye(Y(c,"defining",d)),isolating:ye(Y(c,"isolating",d)),attrs:Object.fromEntries(h.map(_=>{var O;return[_.name,{default:(O=_==null?void 0:_.attribute)===null||O===void 0?void 0:O.default}]}))}),y=ye(Y(c,"parseHTML",d));y&&(g.parseDOM=y.map(_=>hm(_,h)));const x=Y(c,"renderHTML",d);x&&(g.toDOM=_=>x({node:_,HTMLAttributes:Wc(_,h)}));const w=Y(c,"renderText",d);return w&&(g.toText=w),[c.name,g]})),u=Object.fromEntries(i.map(c=>{const h=t.filter(w=>w.type===c.name),d={name:c.name,options:c.options,storage:c.storage},m=n.reduce((w,_)=>{const O=Y(_,"extendMarkSchema",d);return{...w,...O?O(c):{}}},{}),g=pm({...m,inclusive:ye(Y(c,"inclusive",d)),excludes:ye(Y(c,"excludes",d)),group:ye(Y(c,"group",d)),spanning:ye(Y(c,"spanning",d)),code:ye(Y(c,"code",d)),attrs:Object.fromEntries(h.map(w=>{var _;return[w.name,{default:(_=w==null?void 0:w.attribute)===null||_===void 0?void 0:_.default}]}))}),y=ye(Y(c,"parseHTML",d));y&&(g.parseDOM=y.map(w=>hm(w,h)));const x=Y(c,"renderHTML",d);return x&&(g.toDOM=w=>x({mark:w,HTMLAttributes:Wc(w,h)})),[c.name,g]}));return new DE({topNode:o,nodes:a,marks:u})}function vc(n,e){return e.nodes[n]||e.marks[n]||null}function mm(n,e){return Array.isArray(e)?e.some(t=>(typeof t=="string"?t:t.name)===n.name):e}const rS=(n,e=500)=>{let t="";return n.parent.nodesBetween(Math.max(0,n.parentOffset-e),n.parentOffset,(r,i,o,a)=>{var u,c,h;t+=((c=(u=r.type.spec).toText)===null||c===void 0?void 0:c.call(u,{node:r,pos:i,parent:o,index:a}))||((h=n.nodeBefore)===null||h===void 0?void 0:h.text)||"%leaf%"}),t};function Df(n){return Object.prototype.toString.call(n)==="[object RegExp]"}class iS{constructor(e){this.find=e.find,this.handler=e.handler}}const sS=(n,e)=>{if(Df(e))return e.exec(n);const t=e(n);if(!t)return null;const r=[];return r.push(t.text),r.index=t.index,r.input=n,r.data=t.data,t.replaceWith&&(t.text.includes(t.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(t.replaceWith)),r};function yc(n){var e;const{editor:t,from:r,to:i,text:o,rules:a,plugin:u}=n,{view:c}=t;if(c.composing)return!1;const h=c.state.doc.resolve(r);if(h.parent.type.spec.code||!!(!((e=h.nodeBefore||h.nodeAfter)===null||e===void 0)&&e.marks.find(g=>g.type.spec.code)))return!1;let d=!1;const m=rS(h)+o;return a.forEach(g=>{if(d)return;const y=sS(m,g.find);if(!y)return;const x=c.state.tr,w=Sl({state:c.state,transaction:x}),_={from:r-(y[0].length-o.length),to:i},{commands:O,chain:P,can:z}=new kl({editor:t,state:w});g.handler({state:w,range:_,match:y,commands:O,chain:P,can:z})===null||!x.steps.length||(x.setMeta(u,{transform:x,from:r,to:i,text:o}),c.dispatch(x),d=!0)}),d}function oS(n){const{editor:e,rules:t}=n,r=new tn({state:{init(){return null},apply(i,o){const a=i.getMeta(r);return a||(i.selectionSet||i.docChanged?null:o)}},props:{handleTextInput(i,o,a,u){return yc({editor:e,from:o,to:a,text:u,rules:t,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:o}=i.state.selection;o&&yc({editor:e,from:o.pos,to:o.pos,text:"",rules:t,plugin:r})}),!1)},handleKeyDown(i,o){if(o.key!=="Enter")return!1;const{$cursor:a}=i.state.selection;return a?yc({editor:e,from:a.pos,to:a.pos,text:`
`,rules:t,plugin:r}):!1}},isInputRules:!0});return r}function aS(n){return typeof n=="number"}class lS{constructor(e){this.find=e.find,this.handler=e.handler}}const uS=(n,e)=>{if(Df(e))return[...n.matchAll(e)];const t=e(n);return t?t.map(r=>{const i=[];return i.push(r.text),i.index=r.index,i.input=n,i.data=r.data,r.replaceWith&&(r.text.includes(r.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),i.push(r.replaceWith)),i}):[]};function cS(n){const{editor:e,state:t,from:r,to:i,rule:o}=n,{commands:a,chain:u,can:c}=new kl({editor:e,state:t}),h=[];return t.doc.nodesBetween(r,i,(m,g)=>{if(!m.isTextblock||m.type.spec.code)return;const y=Math.max(r,g),x=Math.min(i,g+m.content.size),w=m.textBetween(y-g,x-g,void 0,"\uFFFC");uS(w,o.find).forEach(O=>{if(O.index===void 0)return;const P=y+O.index+1,z=P+O[0].length,E={from:t.tr.mapping.map(P),to:t.tr.mapping.map(z)},q=o.handler({state:t,range:E,match:O,commands:a,chain:u,can:c});h.push(q)})}),h.every(m=>m!==null)}function fS(n){const{editor:e,rules:t}=n;let r=null,i=!1,o=!1;return t.map(u=>new tn({view(c){const h=d=>{var m;r=!((m=c.dom.parentElement)===null||m===void 0)&&m.contains(d.target)?c.dom.parentElement:null};return window.addEventListener("dragstart",h),{destroy(){window.removeEventListener("dragstart",h)}}},props:{handleDOMEvents:{drop:c=>(o=r===c.dom.parentElement,!1),paste:(c,h)=>{var d;const m=(d=h.clipboardData)===null||d===void 0?void 0:d.getData("text/html");return i=!!(m!=null&&m.includes("data-pm-slice")),!1}}},appendTransaction:(c,h,d)=>{const m=c[0],g=m.getMeta("uiEvent")==="paste"&&!i,y=m.getMeta("uiEvent")==="drop"&&!o;if(!g&&!y)return;const x=h.doc.content.findDiffStart(d.doc.content),w=h.doc.content.findDiffEnd(d.doc.content);if(!aS(x)||!w||x===w.b)return;const _=d.tr,O=Sl({state:d,transaction:_});if(!(!cS({editor:e,state:O,from:Math.max(x-1,0),to:w.b,rule:u})||!_.steps.length))return _}}))}function dS(n){const e=n.filter((t,r)=>n.indexOf(t)!==r);return[...new Set(e)]}class is{constructor(e,t){this.splittableMarks=[],this.editor=t,this.extensions=is.resolve(e),this.schema=nS(this.extensions),this.extensions.forEach(r=>{var i;this.editor.extensionStorage[r.name]=r.storage;const o={name:r.name,options:r.options,storage:r.storage,editor:this.editor,type:vc(r.name,this.schema)};r.type==="mark"&&((i=ye(Y(r,"keepOnSplit",o)))!==null&&i!==void 0?i:!0)&&this.splittableMarks.push(r.name);const a=Y(r,"onBeforeCreate",o);a&&this.editor.on("beforeCreate",a);const u=Y(r,"onCreate",o);u&&this.editor.on("create",u);const c=Y(r,"onUpdate",o);c&&this.editor.on("update",c);const h=Y(r,"onSelectionUpdate",o);h&&this.editor.on("selectionUpdate",h);const d=Y(r,"onTransaction",o);d&&this.editor.on("transaction",d);const m=Y(r,"onFocus",o);m&&this.editor.on("focus",m);const g=Y(r,"onBlur",o);g&&this.editor.on("blur",g);const y=Y(r,"onDestroy",o);y&&this.editor.on("destroy",y)})}static resolve(e){const t=is.sort(is.flatten(e)),r=dS(t.map(i=>i.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(i=>`'${i}'`).join(", ")}]. This can lead to issues.`),t}static flatten(e){return e.map(t=>{const r={name:t.name,options:t.options,storage:t.storage},i=Y(t,"addExtensions",r);return i?[t,...this.flatten(i())]:t}).flat(10)}static sort(e){return e.sort((r,i)=>{const o=Y(r,"priority")||100,a=Y(i,"priority")||100;return o>a?-1:o<a?1:0})}get commands(){return this.extensions.reduce((e,t)=>{const r={name:t.name,options:t.options,storage:t.storage,editor:this.editor,type:vc(t.name,this.schema)},i=Y(t,"addCommands",r);return i?{...e,...i()}:e},{})}get plugins(){const{editor:e}=this,t=is.sort([...this.extensions].reverse()),r=[],i=[],o=t.map(a=>{const u={name:a.name,options:a.options,storage:a.storage,editor:e,type:vc(a.name,this.schema)},c=[],h=Y(a,"addKeyboardShortcuts",u);if(h){const y=Object.fromEntries(Object.entries(h()).map(([w,_])=>[w,()=>_({editor:e})])),x=T_(y);c.push(x)}const d=Y(a,"addInputRules",u);mm(a,e.options.enableInputRules)&&d&&r.push(...d());const m=Y(a,"addPasteRules",u);mm(a,e.options.enablePasteRules)&&m&&i.push(...m());const g=Y(a,"addProseMirrorPlugins",u);if(g){const y=g();c.push(...y)}return c}).flat();return[oS({editor:e,rules:r}),...fS({editor:e,rules:i}),...o]}get attributes(){return m0(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:t}=Ol(this.extensions);return Object.fromEntries(t.filter(r=>!!Y(r,"addNodeView")).map(r=>{const i=this.attributes.filter(c=>c.type===r.name),o={name:r.name,options:r.options,storage:r.storage,editor:e,type:st(r.name,this.schema)},a=Y(r,"addNodeView",o);if(!a)return[];const u=(c,h,d,m)=>{const g=Wc(c,i);return a()({editor:e,node:c,getPos:d,decorations:m,HTMLAttributes:g,extension:r})};return[r.name,u]}))}}function hS(n){return Object.prototype.toString.call(n).slice(8,-1)}function bc(n){return hS(n)!=="Object"?!1:n.constructor===Object&&Object.getPrototypeOf(n)===Object.prototype}function Tl(n,e){const t={...n};return bc(n)&&bc(e)&&Object.keys(e).forEach(r=>{bc(e[r])?r in n?t[r]=Tl(n[r],e[r]):Object.assign(t,{[r]:e[r]}):Object.assign(t,{[r]:e[r]})}),t}class In{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=ye(Y(this,"addOptions",{name:this.name}))),this.storage=ye(Y(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new In(e)}configure(e={}){const t=this.extend();return t.options=Tl(this.options,e),t.storage=ye(Y(t,"addStorage",{name:t.name,options:t.options})),t}extend(e={}){const t=new In(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=ye(Y(t,"addOptions",{name:t.name})),t.storage=ye(Y(t,"addStorage",{name:t.name,options:t.options})),t}}function v0(n,e,t){const{from:r,to:i}=e,{blockSeparator:o=`

`,textSerializers:a={}}=t||{};let u="",c=!0;return n.nodesBetween(r,i,(h,d,m,g)=>{var y;const x=a==null?void 0:a[h.type.name];x?(h.isBlock&&!c&&(u+=o,c=!0),m&&(u+=x({node:h,pos:d,parent:m,index:g,range:e}))):h.isText?(u+=(y=h==null?void 0:h.text)===null||y===void 0?void 0:y.slice(Math.max(r,d)-d,i-d),c=!1):h.isBlock&&!c&&(u+=o,c=!0)}),u}function y0(n){return Object.fromEntries(Object.entries(n.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}const pS=In.create({name:"clipboardTextSerializer",addProseMirrorPlugins(){return[new tn({key:new rr("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:n}=this,{state:e,schema:t}=n,{doc:r,selection:i}=e,{ranges:o}=i,a=Math.min(...o.map(d=>d.$from.pos)),u=Math.max(...o.map(d=>d.$to.pos)),c=y0(t);return v0(r,{from:a,to:u},{textSerializers:c})}}})]}}),mS=()=>({editor:n,view:e})=>(requestAnimationFrame(()=>{var t;n.isDestroyed||(e.dom.blur(),(t=window==null?void 0:window.getSelection())===null||t===void 0||t.removeAllRanges())}),!0),gS=(n=!1)=>({commands:e})=>e.setContent("",n),vS=()=>({state:n,tr:e,dispatch:t})=>{const{selection:r}=e,{ranges:i}=r;return t&&i.forEach(({$from:o,$to:a})=>{n.doc.nodesBetween(o.pos,a.pos,(u,c)=>{if(u.type.isText)return;const{doc:h,mapping:d}=e,m=h.resolve(d.map(c)),g=h.resolve(d.map(c+u.nodeSize)),y=m.blockRange(g);if(!y)return;const x=Os(y);if(u.type.isTextblock){const{defaultType:w}=m.parent.contentMatchAt(m.index());e.setNodeMarkup(y.start,w)}(x||x===0)&&e.lift(y,x)})}),!0},yS=n=>e=>n(e),bS=()=>({state:n,dispatch:e})=>$_(n,e),DS=n=>({tr:e,state:t,dispatch:r})=>{const i=st(n,t.schema),o=e.selection.$anchor;for(let a=o.depth;a>0;a-=1)if(o.node(a).type===i){if(r){const c=o.before(a),h=o.after(a);e.delete(c,h).scrollIntoView()}return!0}return!1},xS=n=>({tr:e,dispatch:t})=>{const{from:r,to:i}=n;return t&&e.delete(r,i),!0},wS=()=>({state:n,dispatch:e})=>F_(n,e),CS=()=>({commands:n})=>n.keyboardShortcut("Enter"),ES=()=>({state:n,dispatch:e})=>z_(n,e);function ja(n,e,t={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>t.strict?e[i]===n[i]:Df(e[i])?e[i].test(n[i]):e[i]===n[i]):!0}function Uc(n,e,t={}){return n.find(r=>r.type===e&&ja(r.attrs,t))}function AS(n,e,t={}){return!!Uc(n,e,t)}function xf(n,e,t={}){if(!n||!e)return;let r=n.parent.childAfter(n.parentOffset);if(n.parentOffset===r.offset&&r.offset!==0&&(r=n.parent.childBefore(n.parentOffset)),!r.node)return;const i=Uc([...r.node.marks],e,t);if(!i)return;let o=r.index,a=n.start()+r.offset,u=o+1,c=a+r.node.nodeSize;for(Uc([...r.node.marks],e,t);o>0&&i.isInSet(n.parent.child(o-1).marks);)o-=1,a-=n.parent.child(o).nodeSize;for(;u<n.parent.childCount&&AS([...n.parent.child(u).marks],e,t);)c+=n.parent.child(u).nodeSize,u+=1;return{from:a,to:c}}function Yr(n,e){if(typeof n=="string"){if(!e.marks[n])throw Error(`There is no mark type named '${n}'. Maybe you forgot to add the extension?`);return e.marks[n]}return n}const _S=(n,e={})=>({tr:t,state:r,dispatch:i})=>{const o=Yr(n,r.schema),{doc:a,selection:u}=t,{$from:c,from:h,to:d}=u;if(i){const m=xf(c,o,e);if(m&&m.from<=h&&m.to>=d){const g=be.create(a,m.from,m.to);t.setSelection(g)}}return!0},SS=n=>e=>{const t=typeof n=="function"?n(e):n;for(let r=0;r<t.length;r+=1)if(t[r](e))return!0;return!1};function kS(n){var e;return((e=n.constructor)===null||e===void 0?void 0:e.toString().substring(0,5))==="class"}function b0(n){return n&&typeof n=="object"&&!Array.isArray(n)&&!kS(n)}function D0(n){return b0(n)&&n instanceof be}function Dr(n=0,e=0,t=0){return Math.min(Math.max(n,e),t)}function x0(n,e=null){if(!e)return null;const t=pe.atStart(n),r=pe.atEnd(n);if(e==="start"||e===!0)return t;if(e==="end")return r;const i=t.from,o=r.to;return e==="all"?be.create(n,Dr(0,i,o),Dr(n.content.size,i,o)):be.create(n,Dr(e,i,o),Dr(e,i,o))}function wf(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const OS=(n=null,e={})=>({editor:t,view:r,tr:i,dispatch:o})=>{e={scrollIntoView:!0,...e};const a=()=>{wf()&&r.dom.focus(),requestAnimationFrame(()=>{t.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&t.commands.scrollIntoView())})};if(r.hasFocus()&&n===null||n===!1)return!0;if(o&&n===null&&!D0(t.state.selection))return a(),!0;const u=x0(i.doc,n)||t.state.selection,c=t.state.selection.eq(u);return o&&(c||i.setSelection(u),c&&i.storedMarks&&i.setStoredMarks(i.storedMarks),a()),!0},TS=(n,e)=>t=>n.every((r,i)=>e(r,{...t,index:i})),MS=(n,e)=>({tr:t,commands:r})=>r.insertContentAt({from:t.selection.from,to:t.selection.to},n,e);function gm(n){const e=`<body>${n}</body>`;return new window.DOMParser().parseFromString(e,"text/html").body}function Ja(n,e,t){if(t={slice:!0,parseOptions:{},...t},typeof n=="object"&&n!==null)try{return Array.isArray(n)?L.fromArray(n.map(r=>e.nodeFromJSON(r))):e.nodeFromJSON(n)}catch(r){return console.warn("[tiptap warn]: Invalid content.","Passed value:",n,"Error:",r),Ja("",e,t)}if(typeof n=="string"){const r=gs.fromSchema(e);return t.slice?r.parseSlice(gm(n),t.parseOptions).content:r.parse(gm(n),t.parseOptions)}return Ja("",e,t)}function FS(n,e,t){const r=n.steps.length-1;if(r<e)return;const i=n.steps[r];if(!(i instanceof bt||i instanceof it))return;const o=n.mapping.maps[r];let a=0;o.forEach((u,c,h,d)=>{a===0&&(a=d)}),n.setSelection(pe.near(n.doc.resolve(a),t))}const NS=n=>n.toString().startsWith("<"),RS=(n,e,t)=>({tr:r,dispatch:i,editor:o})=>{if(i){t={parseOptions:{},updateSelection:!0,...t};const a=Ja(e,o.schema,{parseOptions:{preserveWhitespace:"full",...t.parseOptions}});if(a.toString()==="<>")return!0;let{from:u,to:c}=typeof n=="number"?{from:n,to:n}:n,h=!0,d=!0;if((NS(a)?a:[a]).forEach(g=>{g.check(),h=h?g.isText&&g.marks.length===0:!1,d=d?g.isBlock:!1}),u===c&&d){const{parent:g}=r.doc.resolve(u);g.isTextblock&&!g.type.spec.code&&!g.childCount&&(u-=1,c+=1)}h?r.insertText(e,u,c):r.replaceWith(u,c,a),t.updateSelection&&FS(r,r.steps.length-1,-1)}return!0},BS=()=>({state:n,dispatch:e})=>N_(n,e),IS=()=>({state:n,dispatch:e})=>B_(n,e);function w0(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function PS(n){const e=n.split(/-(?!$)/);let t=e[e.length-1];t==="Space"&&(t=" ");let r,i,o,a;for(let u=0;u<e.length-1;u+=1){const c=e[u];if(/^(cmd|meta|m)$/i.test(c))a=!0;else if(/^a(lt)?$/i.test(c))r=!0;else if(/^(c|ctrl|control)$/i.test(c))i=!0;else if(/^s(hift)?$/i.test(c))o=!0;else if(/^mod$/i.test(c))wf()||w0()?a=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${c}`)}return r&&(t=`Alt-${t}`),i&&(t=`Ctrl-${t}`),a&&(t=`Meta-${t}`),o&&(t=`Shift-${t}`),t}const LS=n=>({editor:e,view:t,tr:r,dispatch:i})=>{const o=PS(n).split(/-(?!$)/),a=o.find(h=>!["Alt","Ctrl","Meta","Shift"].includes(h)),u=new KeyboardEvent("keydown",{key:a==="Space"?" ":a,altKey:o.includes("Alt"),ctrlKey:o.includes("Ctrl"),metaKey:o.includes("Meta"),shiftKey:o.includes("Shift"),bubbles:!0,cancelable:!0}),c=e.captureTransaction(()=>{t.someProp("handleKeyDown",h=>h(t,u))});return c==null||c.steps.forEach(h=>{const d=h.map(r.mapping);d&&i&&r.maybeStep(d)}),!0};function Oo(n,e,t={}){const{from:r,to:i,empty:o}=n.selection,a=e?st(e,n.schema):null,u=[];n.doc.nodesBetween(r,i,(m,g)=>{if(m.isText)return;const y=Math.max(r,g),x=Math.min(i,g+m.nodeSize);u.push({node:m,from:y,to:x})});const c=i-r,h=u.filter(m=>a?a.name===m.node.type.name:!0).filter(m=>ja(m.node.attrs,t,{strict:!1}));return o?!!h.length:h.reduce((m,g)=>m+g.to-g.from,0)>=c}const zS=(n,e={})=>({state:t,dispatch:r})=>{const i=st(n,t.schema);return Oo(t,i,e)?P_(t,r):!1},$S=()=>({state:n,dispatch:e})=>H_(n,e),HS=n=>({state:e,dispatch:t})=>{const r=st(n,e.schema);return G_(r)(e,t)},VS=()=>({state:n,dispatch:e})=>L_(n,e);function Ml(n,e){return e.nodes[n]?"node":e.marks[n]?"mark":null}function vm(n,e){const t=typeof e=="string"?[e]:e;return Object.keys(n).reduce((r,i)=>(t.includes(i)||(r[i]=n[i]),r),{})}const WS=(n,e)=>({tr:t,state:r,dispatch:i})=>{let o=null,a=null;const u=Ml(typeof n=="string"?n:n.name,r.schema);return u?(u==="node"&&(o=st(n,r.schema)),u==="mark"&&(a=Yr(n,r.schema)),i&&t.selection.ranges.forEach(c=>{r.doc.nodesBetween(c.$from.pos,c.$to.pos,(h,d)=>{o&&o===h.type&&t.setNodeMarkup(d,void 0,vm(h.attrs,e)),a&&h.marks.length&&h.marks.forEach(m=>{a===m.type&&t.addMark(d,d+h.nodeSize,a.create(vm(m.attrs,e)))})})}),!0):!1},US=()=>({tr:n,dispatch:e})=>(e&&n.scrollIntoView(),!0),qS=()=>({tr:n,commands:e})=>e.setTextSelection({from:0,to:n.doc.content.size}),KS=()=>({state:n,dispatch:e})=>R_(n,e),jS=()=>({state:n,dispatch:e})=>I_(n,e),JS=()=>({state:n,dispatch:e})=>V_(n,e),GS=()=>({state:n,dispatch:e})=>q_(n,e),YS=()=>({state:n,dispatch:e})=>U_(n,e);function C0(n,e,t={}){return Ja(n,e,{slice:!1,parseOptions:t})}const XS=(n,e=!1,t={})=>({tr:r,editor:i,dispatch:o})=>{const{doc:a}=r,u=C0(n,i.schema,t);return o&&r.replaceWith(0,a.content.size,u).setMeta("preventUpdate",!e),!0};function E0(n,e){const t=Yr(e,n.schema),{from:r,to:i,empty:o}=n.selection,a=[];o?(n.storedMarks&&a.push(...n.storedMarks),a.push(...n.selection.$head.marks())):n.doc.nodesBetween(r,i,c=>{a.push(...c.marks)});const u=a.find(c=>c.type.name===t.name);return u?{...u.attrs}:{}}const ZS=(n,e={})=>({tr:t,state:r,dispatch:i})=>{const{selection:o}=t,{empty:a,ranges:u}=o,c=Yr(n,r.schema);if(i)if(a){const h=E0(r,c);t.addStoredMark(c.create({...h,...e}))}else u.forEach(h=>{const d=h.$from.pos,m=h.$to.pos;r.doc.nodesBetween(d,m,(g,y)=>{const x=Math.max(y,d),w=Math.min(y+g.nodeSize,m);g.marks.find(O=>O.type===c)?g.marks.forEach(O=>{c===O.type&&t.addMark(x,w,c.create({...O.attrs,...e}))}):t.addMark(x,w,c.create(e))})});return!0},QS=(n,e)=>({tr:t})=>(t.setMeta(n,e),!0),ek=(n,e={})=>({state:t,dispatch:r,chain:i})=>{const o=st(n,t.schema);return o.isTextblock?i().command(({commands:a})=>dm(o,e)(t)?!0:a.clearNodes()).command(({state:a})=>dm(o,e)(a,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},tk=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,i=pe.atStart(r).from,o=pe.atEnd(r).to,a=Dr(n,i,o),u=ie.create(r,a);e.setSelection(u)}return!0},nk=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,{from:i,to:o}=typeof n=="number"?{from:n,to:n}:n,a=be.atStart(r).from,u=be.atEnd(r).to,c=Dr(i,a,u),h=Dr(o,a,u),d=be.create(r,c,h);e.setSelection(d)}return!0},rk=n=>({state:e,dispatch:t})=>{const r=st(n,e.schema);return Z_(r)(e,t)};function Na(n,e,t){return Object.fromEntries(Object.entries(t).filter(([r])=>{const i=n.find(o=>o.type===e&&o.name===r);return i?i.attribute.keepOnSplit:!1}))}function ik(n){for(let e=0;e<n.edgeCount;e+=1){const{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}function ym(n,e){const t=n.storedMarks||n.selection.$to.parentOffset&&n.selection.$from.marks();if(t){const r=t.filter(i=>e==null?void 0:e.includes(i.type.name));n.tr.ensureMarks(r)}}const sk=({keepMarks:n=!0}={})=>({tr:e,state:t,dispatch:r,editor:i})=>{const{selection:o,doc:a}=e,{$from:u,$to:c}=o,h=i.extensionManager.attributes,d=Na(h,u.node().type.name,u.node().attrs);if(o instanceof ie&&o.node.isBlock)return!u.parentOffset||!hs(a,u.pos)?!1:(r&&(n&&ym(t,i.extensionManager.splittableMarks),e.split(u.pos).scrollIntoView()),!0);if(!u.parent.isBlock)return!1;if(r){const m=c.parentOffset===c.parent.content.size;o instanceof be&&e.deleteSelection();const g=u.depth===0?void 0:ik(u.node(-1).contentMatchAt(u.indexAfter(-1)));let y=m&&g?[{type:g,attrs:d}]:void 0,x=hs(e.doc,e.mapping.map(u.pos),1,y);if(!y&&!x&&hs(e.doc,e.mapping.map(u.pos),1,g?[{type:g}]:void 0)&&(x=!0,y=g?[{type:g,attrs:d}]:void 0),x&&(e.split(e.mapping.map(u.pos),1,y),g&&!m&&!u.parentOffset&&u.parent.type!==g)){const w=e.mapping.map(u.before()),_=e.doc.resolve(w);u.node(-1).canReplaceWith(_.index(),_.index()+1,g)&&e.setNodeMarkup(e.mapping.map(u.before()),g)}n&&ym(t,i.extensionManager.splittableMarks),e.scrollIntoView()}return!0},ok=n=>({tr:e,state:t,dispatch:r,editor:i})=>{var o;const a=st(n,t.schema),{$from:u,$to:c}=t.selection,h=t.selection.node;if(h&&h.isBlock||u.depth<2||!u.sameParent(c))return!1;const d=u.node(-1);if(d.type!==a)return!1;const m=i.extensionManager.attributes;if(u.parent.content.size===0&&u.node(-1).childCount===u.indexAfter(-1)){if(u.depth===2||u.node(-3).type!==a||u.index(-2)!==u.node(-2).childCount-1)return!1;if(r){let _=L.empty;const O=u.index(-1)?1:u.index(-2)?2:3;for(let K=u.depth-O;K>=u.depth-3;K-=1)_=L.from(u.node(K).copy(_));const P=u.indexAfter(-1)<u.node(-2).childCount?1:u.indexAfter(-2)<u.node(-3).childCount?2:3,z=Na(m,u.node().type.name,u.node().attrs),E=((o=a.contentMatch.defaultType)===null||o===void 0?void 0:o.createAndFill(z))||void 0;_=_.append(L.from(a.createAndFill(null,E)||void 0));const q=u.before(u.depth-(O-1));e.replace(q,u.after(-P),new G(_,4-O,0));let $=-1;e.doc.nodesBetween(q,e.doc.content.size,(K,H)=>{if($>-1)return!1;K.isTextblock&&K.content.size===0&&($=H+1)}),$>-1&&e.setSelection(be.near(e.doc.resolve($))),e.scrollIntoView()}return!0}const g=c.pos===u.end()?d.contentMatchAt(0).defaultType:null,y=Na(m,d.type.name,d.attrs),x=Na(m,u.node().type.name,u.node().attrs);e.delete(u.pos,c.pos);const w=g?[{type:a,attrs:y},{type:g,attrs:x}]:[{type:a,attrs:y}];return hs(e.doc,u.pos,2)?(r&&e.split(u.pos,2,w).scrollIntoView(),!0):!1};function ak(n,e){for(let t=n.depth;t>0;t-=1){const r=n.node(t);if(e(r))return{pos:t>0?n.before(t):0,start:n.start(t),depth:t,node:r}}}function Cf(n){return e=>ak(e.$from,n)}function bm(n,e){const{nodeExtensions:t}=Ol(e),r=t.find(a=>a.name===n);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},o=ye(Y(r,"group",i));return typeof o!="string"?!1:o.split(" ").includes("list")}const Dm=(n,e)=>{const t=Cf(a=>a.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(Math.max(0,t.pos-1)).before(t.depth);if(r===void 0)return!0;const i=n.doc.nodeAt(r);return t.node.type===(i==null?void 0:i.type)&&wl(n.doc,t.pos)&&n.join(t.pos),!0},xm=(n,e)=>{const t=Cf(a=>a.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(t.start).after(t.depth);if(r===void 0)return!0;const i=n.doc.nodeAt(r);return t.node.type===(i==null?void 0:i.type)&&wl(n.doc,r)&&n.join(r),!0},lk=(n,e)=>({editor:t,tr:r,state:i,dispatch:o,chain:a,commands:u,can:c})=>{const{extensions:h}=t.extensionManager,d=st(n,i.schema),m=st(e,i.schema),{selection:g}=i,{$from:y,$to:x}=g,w=y.blockRange(x);if(!w)return!1;const _=Cf(O=>bm(O.type.name,h))(g);if(w.depth>=1&&_&&w.depth-_.depth<=1){if(_.node.type===d)return u.liftListItem(m);if(bm(_.node.type.name,h)&&d.validContent(_.node.content)&&o)return a().command(()=>(r.setNodeMarkup(_.pos,d),!0)).command(()=>Dm(r,d)).command(()=>xm(r,d)).run()}return a().command(()=>c().wrapInList(d)?!0:u.clearNodes()).wrapInList(d).command(()=>Dm(r,d)).command(()=>xm(r,d)).run()};function qc(n,e,t={}){const{empty:r,ranges:i}=n.selection,o=e?Yr(e,n.schema):null;if(r)return!!(n.storedMarks||n.selection.$from.marks()).filter(m=>o?o.name===m.type.name:!0).find(m=>ja(m.attrs,t,{strict:!1}));let a=0;const u=[];if(i.forEach(({$from:m,$to:g})=>{const y=m.pos,x=g.pos;n.doc.nodesBetween(y,x,(w,_)=>{if(!w.isText&&!w.marks.length)return;const O=Math.max(y,_),P=Math.min(x,_+w.nodeSize);a+=P-O,u.push(...w.marks.map(E=>({mark:E,from:O,to:P})))})}),a===0)return!1;const c=u.filter(m=>o?o.name===m.mark.type.name:!0).filter(m=>ja(m.mark.attrs,t,{strict:!1})).reduce((m,g)=>m+g.to-g.from,0),h=u.filter(m=>o?m.mark.type!==o&&m.mark.type.excludes(o):!0).reduce((m,g)=>m+g.to-g.from,0);return(c>0?c+h:c)>=a}const uk=(n,e={},t={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:o=!1}=t,a=Yr(n,r.schema);return qc(r,a,e)?i.unsetMark(a,{extendEmptyMarkRange:o}):i.setMark(a,e)},ck=(n,e,t={})=>({state:r,commands:i})=>{const o=st(n,r.schema),a=st(e,r.schema);return Oo(r,o,t)?i.setNode(a):i.setNode(o,t)},fk=(n,e={})=>({state:t,commands:r})=>{const i=st(n,t.schema);return Oo(t,i,e)?r.lift(i):r.wrapIn(i,e)},dk=()=>({state:n,dispatch:e})=>{const t=n.plugins;for(let r=0;r<t.length;r+=1){const i=t[r];let o;if(i.spec.isInputRules&&(o=i.getState(n))){if(e){const a=n.tr,u=o.transform;for(let c=u.steps.length-1;c>=0;c-=1)a.step(u.steps[c].invert(u.docs[c]));if(o.text){const c=a.doc.resolve(o.from).marks();a.replaceWith(o.from,o.to,n.schema.text(o.text,c))}else a.delete(o.from,o.to)}return!0}}return!1},hk=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,{empty:r,ranges:i}=t;return r||e&&i.forEach(o=>{n.removeMark(o.$from.pos,o.$to.pos)}),!0},pk=(n,e={})=>({tr:t,state:r,dispatch:i})=>{var o;const{extendEmptyMarkRange:a=!1}=e,{selection:u}=t,c=Yr(n,r.schema),{$from:h,empty:d,ranges:m}=u;if(!i)return!0;if(d&&a){let{from:g,to:y}=u;const x=(o=h.marks().find(_=>_.type===c))===null||o===void 0?void 0:o.attrs,w=xf(h,c,x);w&&(g=w.from,y=w.to),t.removeMark(g,y,c)}else m.forEach(g=>{t.removeMark(g.$from.pos,g.$to.pos,c)});return t.removeStoredMark(c),!0},mk=(n,e={})=>({tr:t,state:r,dispatch:i})=>{let o=null,a=null;const u=Ml(typeof n=="string"?n:n.name,r.schema);return u?(u==="node"&&(o=st(n,r.schema)),u==="mark"&&(a=Yr(n,r.schema)),i&&t.selection.ranges.forEach(c=>{const h=c.$from.pos,d=c.$to.pos;r.doc.nodesBetween(h,d,(m,g)=>{o&&o===m.type&&t.setNodeMarkup(g,void 0,{...m.attrs,...e}),a&&m.marks.length&&m.marks.forEach(y=>{if(a===y.type){const x=Math.max(g,h),w=Math.min(g+m.nodeSize,d);t.addMark(x,w,a.create({...y.attrs,...e}))}})})}),!0):!1},gk=(n,e={})=>({state:t,dispatch:r})=>{const i=st(n,t.schema);return K_(i,e)(t,r)},vk=(n,e={})=>({state:t,dispatch:r})=>{const i=st(n,t.schema);return j_(i,e)(t,r)};var yk=Object.freeze({__proto__:null,blur:mS,clearContent:gS,clearNodes:vS,command:yS,createParagraphNear:bS,deleteNode:DS,deleteRange:xS,deleteSelection:wS,enter:CS,exitCode:ES,extendMarkRange:_S,first:SS,focus:OS,forEach:TS,insertContent:MS,insertContentAt:RS,joinBackward:BS,joinForward:IS,keyboardShortcut:LS,lift:zS,liftEmptyBlock:$S,liftListItem:HS,newlineInCode:VS,resetAttributes:WS,scrollIntoView:US,selectAll:qS,selectNodeBackward:KS,selectNodeForward:jS,selectParentNode:JS,selectTextblockEnd:GS,selectTextblockStart:YS,setContent:XS,setMark:ZS,setMeta:QS,setNode:ek,setNodeSelection:tk,setTextSelection:nk,sinkListItem:rk,splitBlock:sk,splitListItem:ok,toggleList:lk,toggleMark:uk,toggleNode:ck,toggleWrap:fk,undoInputRule:dk,unsetAllMarks:hk,unsetMark:pk,updateAttributes:mk,wrapIn:gk,wrapInList:vk});const bk=In.create({name:"commands",addCommands(){return{...yk}}}),Dk=In.create({name:"editable",addProseMirrorPlugins(){return[new tn({key:new rr("editable"),props:{editable:()=>this.editor.options.editable}})]}}),xk=In.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:n}=this;return[new tn({key:new rr("focusEvents"),props:{handleDOMEvents:{focus:(e,t)=>{n.isFocused=!0;const r=n.state.tr.setMeta("focus",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,t)=>{n.isFocused=!1;const r=n.state.tr.setMeta("blur",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),wk=In.create({name:"keymap",addKeyboardShortcuts(){const n=()=>this.editor.commands.first(({commands:a})=>[()=>a.undoInputRule(),()=>a.command(({tr:u})=>{const{selection:c,doc:h}=u,{empty:d,$anchor:m}=c,{pos:g,parent:y}=m,x=pe.atStart(h).from===g;return!d||!x||!y.type.isTextblock||y.textContent.length?!1:a.clearNodes()}),()=>a.deleteSelection(),()=>a.joinBackward(),()=>a.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:a})=>[()=>a.deleteSelection(),()=>a.joinForward(),()=>a.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:a})=>[()=>a.newlineInCode(),()=>a.createParagraphNear(),()=>a.liftEmptyBlock(),()=>a.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:n,"Mod-Backspace":n,"Shift-Backspace":n,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},o={...r,"Ctrl-h":n,"Alt-Backspace":n,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return wf()||w0()?o:i},addProseMirrorPlugins(){return[new tn({key:new rr("clearDocument"),appendTransaction:(n,e,t)=>{if(!(n.some(x=>x.docChanged)&&!e.doc.eq(t.doc)))return;const{empty:i,from:o,to:a}=e.selection,u=pe.atStart(e.doc).from,c=pe.atEnd(e.doc).to,h=o===u&&a===c,d=t.doc.textBetween(0,t.doc.content.size," "," ").length===0;if(i||!h||!d)return;const m=t.tr,g=Sl({state:t,transaction:m}),{commands:y}=new kl({editor:this.editor,state:g});if(y.clearNodes(),!!m.steps.length)return m}})]}}),Ck=In.create({name:"tabindex",addProseMirrorPlugins(){return[new tn({key:new rr("tabindex"),props:{attributes:this.editor.isEditable?{tabindex:"0"}:{}}})]}});var Ek=Object.freeze({__proto__:null,ClipboardTextSerializer:pS,Commands:bk,Editable:Dk,FocusEvents:xk,Keymap:wk,Tabindex:Ck});function Ak(n,e){const t=st(e,n.schema),{from:r,to:i}=n.selection,o=[];n.doc.nodesBetween(r,i,u=>{o.push(u)});const a=o.reverse().find(u=>u.type.name===t.name);return a?{...a.attrs}:{}}function A0(n,e){const t=Ml(typeof e=="string"?e:e.name,n.schema);return t==="node"?Ak(n,e):t==="mark"?E0(n,e):{}}function _k(n,e){const t=Gn.fromSchema(e).serializeFragment(n),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(t),i.innerHTML}function Sk(n,e){const t={from:0,to:n.content.size};return v0(n,t,e)}function kk(n,e,t={}){if(!e)return Oo(n,null,t)||qc(n,null,t);const r=Ml(e,n.schema);return r==="node"?Oo(n,e,t):r==="mark"?qc(n,e,t):!1}function Ok(n){var e;const t=(e=n.type.createAndFill())===null||e===void 0?void 0:e.toJSON(),r=n.toJSON();return JSON.stringify(t)===JSON.stringify(r)}const Tk=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 1px !important;
  height: 1px !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function Mk(n,e){const t=document.querySelector("style[data-tiptap-style]");if(t!==null)return t;const r=document.createElement("style");return e&&r.setAttribute("nonce",e),r.setAttribute("data-tiptap-style",""),r.innerHTML=n,document.getElementsByTagName("head")[0].appendChild(r),r}class Fk extends Q_{constructor(e={}){super(),this.isFocused=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}))},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=Mk(Tk,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e){this.setOptions({editable:e})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,t){const r=g0(t)?t(e,[...this.state.plugins]):[...this.state.plugins,e],i=this.state.reconfigure({plugins:r});this.view.updateState(i)}unregisterPlugin(e){if(this.isDestroyed)return;const t=typeof e=="string"?`${e}$`:e.key,r=this.state.reconfigure({plugins:this.state.plugins.filter(i=>!i.key.startsWith(t))});this.view.updateState(r)}createExtensionManager(){const t=[...this.options.enableCoreExtensions?Object.values(Ek):[],...this.options.extensions].filter(r=>["extension","node","mark"].includes(r==null?void 0:r.type));this.extensionManager=new is(t,this)}createCommandManager(){this.commandManager=new kl({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){const e=C0(this.options.content,this.schema,this.options.parseOptions),t=x0(e,this.options.autofocus);this.view=new D_(this.options.element,{...this.options.editorProps,dispatchTransaction:this.dispatchTransaction.bind(this),state:ts.create({doc:e,selection:t||void 0})});const r=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(r),this.createNodeViews();const i=this.view.dom;i.editor=this}createNodeViews(){this.view.setProps({nodeViews:this.extensionManager.nodeViews})}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(a=>{var u;return(u=this.capturedTransaction)===null||u===void 0?void 0:u.step(a)});return}const t=this.state.apply(e),r=!this.state.selection.eq(t.selection);this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const i=e.getMeta("focus"),o=e.getMeta("blur");i&&this.emit("focus",{editor:this,event:i.event,transaction:e}),o&&this.emit("blur",{editor:this,event:o.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return A0(this.state,e)}isActive(e,t){const r=typeof e=="string"?e:null,i=typeof e=="string"?t:e;return kk(this.state,r,i)}getJSON(){return this.state.doc.toJSON()}getHTML(){return _k(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:t=`

`,textSerializers:r={}}=e||{};return Sk(this.state.doc,{blockSeparator:t,textSerializers:{...r,...y0(this.schema)}})}get isEmpty(){return Ok(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){this.emit("destroy"),this.view&&this.view.destroy(),this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}}function Nk(n,e){const t=new Og(n);return e.forEach(r=>{r.steps.forEach(i=>{t.step(i)})}),t}function Rk(n,e,t){const r=[];return n.nodesBetween(e.from,e.to,(i,o)=>{t(i)&&r.push({node:i,pos:o})}),r}function Bk(n,e=JSON.stringify){const t={};return n.filter(r=>{const i=e(r);return Object.prototype.hasOwnProperty.call(t,i)?!1:t[i]=!0})}function Ik(n){const e=Bk(n);return e.length===1?e:e.filter((t,r)=>!e.filter((o,a)=>a!==r).some(o=>t.oldRange.from>=o.oldRange.from&&t.oldRange.to<=o.oldRange.to&&t.newRange.from>=o.newRange.from&&t.newRange.to<=o.newRange.to))}function Pk(n){const{mapping:e,steps:t}=n,r=[];return e.maps.forEach((i,o)=>{const a=[];if(i.ranges.length)i.forEach((u,c)=>{a.push({from:u,to:c})});else{const{from:u,to:c}=t[o];if(u===void 0||c===void 0)return;a.push({from:u,to:c})}a.forEach(({from:u,to:c})=>{const h=e.slice(o).map(u,-1),d=e.slice(o).map(c),m=e.invert().map(h,-1),g=e.invert().map(d);r.push({oldRange:{from:m,to:g},newRange:{from:h,to:d}})})}),Ik(r)}function Kc(n,e,t){const r=[];return n===e?t.resolve(n).marks().forEach(i=>{const o=t.resolve(n-1),a=xf(o,i.type);!a||r.push({mark:i,...a})}):t.nodesBetween(n,e,(i,o)=>{r.push(...i.marks.map(a=>({from:o,to:o+i.nodeSize,mark:a})))}),r}function Lk(n){return b0(n)&&n instanceof ie}function _0(n,e,t){const i=n.state.doc.content.size,o=Dr(e,0,i),a=Dr(t,0,i),u=n.coordsAtPos(o),c=n.coordsAtPos(a,-1),h=Math.min(u.top,c.top),d=Math.max(u.bottom,c.bottom),m=Math.min(u.left,c.left),g=Math.max(u.right,c.right),y=g-m,x=d-h,O={top:h,bottom:d,left:m,right:g,width:y,height:x,x:m,y:h};return{...O,toJSON:()=>O}}function fN(n){return new iS({find:n.find,handler:({state:e,range:t,match:r})=>{let i=n.replace,o=t.from;const a=t.to;if(r[1]){const u=r[0].lastIndexOf(r[1]);i+=r[0].slice(u+r[1].length),o+=u;const c=o-a;c>0&&(i=r[0].slice(u-c,u)+i,o=a)}e.tr.insertText(i,o,a)}})}class Ga{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=ye(Y(this,"addOptions",{name:this.name}))),this.storage=ye(Y(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Ga(e)}configure(e={}){const t=this.extend();return t.options=Tl(this.options,e),t.storage=ye(Y(t,"addStorage",{name:t.name,options:t.options})),t}extend(e={}){const t=new Ga(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=ye(Y(t,"addOptions",{name:t.name})),t.storage=ye(Y(t,"addStorage",{name:t.name,options:t.options})),t}}class xs{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=ye(Y(this,"addOptions",{name:this.name}))),this.storage=ye(Y(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new xs(e)}configure(e={}){const t=this.extend();return t.options=Tl(this.options,e),t.storage=ye(Y(t,"addStorage",{name:t.name,options:t.options})),t}extend(e={}){const t=new xs(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=ye(Y(t,"addOptions",{name:t.name})),t.storage=ye(Y(t,"addStorage",{name:t.name,options:t.options})),t}}function zk(n){return new lS({find:n.find,handler:({state:e,range:t,match:r})=>{const i=ye(n.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:o}=e,a=r[r.length-1],u=r[0];let c=t.to;if(a){const h=u.search(/\S/),d=t.from+u.indexOf(a),m=d+a.length;if(Kc(t.from,t.to,e.doc).filter(y=>y.mark.type.excluded.find(w=>w===n.type&&w!==y.mark.type)).filter(y=>y.to>d).length)return null;m<t.to&&o.delete(m,t.to),d>t.from&&o.delete(t.from+h,d),c=t.from+h+a.length,o.addMark(t.from+h,c,n.type.create(i||{})),o.removeStoredMark(n.type)}}})}const $k=xs.create({name:"doc",topNode:!0,content:"block+"}),Hk=xs.create({name:"div",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"div"}]},renderHTML({HTMLAttributes:n}){return["div",bf(this.options.HTMLAttributes,n),0]},addCommands(){return{setParagraph:()=>({commands:n})=>n.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),Vk=xs.create({name:"text",group:"inline"});function Ef(n){this.j={},this.jr=[],this.jd=null,this.t=n}Ef.prototype={accepts:function(){return!!this.t},tt:function(e,t){if(t&&t.j)return this.j[e]=t,t;var r=t,i=this.j[e];if(i)return r&&(i.t=r),i;i=Fe();var o=Ya(this,e);return o?(Object.assign(i.j,o.j),i.jr.append(o.jr),i.jr=o.jd,i.t=r||o.t):i.t=r,this.j[e]=i,i}};var Fe=function(){return new Ef},ee=function(e){return new Ef(e)},W=function(e,t,r){e.j[t]||(e.j[t]=r)},rt=function(e,t,r){e.jr.push([t,r])},Ya=function(e,t){var r=e.j[t];if(r)return r;for(var i=0;i<e.jr.length;i++){var o=e.jr[i][0],a=e.jr[i][1];if(o.test(t))return a}return e.jd},he=function(e,t,r){for(var i=0;i<t.length;i++)W(e,t[i],r)},Wk=function(e,t){for(var r=0;r<t.length;r++){var i=t[r][0],o=t[r][1];W(e,i,o)}},ci=function(e,t,r,i){for(var o=0,a=t.length,u;o<a&&(u=e.j[t[o]]);)e=u,o++;if(o>=a)return[];for(;o<a-1;)u=i(),W(e,t[o],u),e=u,o++;W(e,t[a-1],r)},Tn="DOMAIN",yr="LOCALHOST",qn="TLD",mn="NUM",ws="PROTOCOL",Af="MAILTO",S0="WS",_f="NL",ss="OPENBRACE",yo="OPENBRACKET",bo="OPENANGLEBRACKET",Do="OPENPAREN",pi="CLOSEBRACE",as="CLOSEBRACKET",ls="CLOSEANGLEBRACKET",us="CLOSEPAREN",Xa="AMPERSAND",Za="APOSTROPHE",Qa="ASTERISK",cs="AT",el="BACKSLASH",tl="BACKTICK",nl="CARET",xo="COLON",Sf="COMMA",rl="DOLLAR",Pr="DOT",il="EQUALS",kf="EXCLAMATION",sl="HYPHEN",ol="PERCENT",al="PIPE",ll="PLUS",ul="POUND",cl="QUERY",Of="QUOTE",Tf="SEMI",br="SLASH",fl="TILDE",dl="UNDERSCORE",hl="SYM",Uk=Object.freeze({__proto__:null,DOMAIN:Tn,LOCALHOST:yr,TLD:qn,NUM:mn,PROTOCOL:ws,MAILTO:Af,WS:S0,NL:_f,OPENBRACE:ss,OPENBRACKET:yo,OPENANGLEBRACKET:bo,OPENPAREN:Do,CLOSEBRACE:pi,CLOSEBRACKET:as,CLOSEANGLEBRACKET:ls,CLOSEPAREN:us,AMPERSAND:Xa,APOSTROPHE:Za,ASTERISK:Qa,AT:cs,BACKSLASH:el,BACKTICK:tl,CARET:nl,COLON:xo,COMMA:Sf,DOLLAR:rl,DOT:Pr,EQUALS:il,EXCLAMATION:kf,HYPHEN:sl,PERCENT:ol,PIPE:al,PLUS:ll,POUND:ul,QUERY:cl,QUOTE:Of,SEMI:Tf,SLASH:br,TILDE:fl,UNDERSCORE:dl,SYM:hl}),wm="aaa aarp abarth abb abbott abbvie abc able abogado abudhabi ac academy accenture accountant accountants aco actor ad adac ads adult ae aeg aero aetna af afamilycompany afl africa ag agakhan agency ai aig airbus airforce airtel akdn al alfaromeo alibaba alipay allfinanz allstate ally alsace alstom am amazon americanexpress americanfamily amex amfam amica amsterdam analytics android anquan anz ao aol apartments app apple aq aquarelle ar arab aramco archi army arpa art arte as asda asia associates at athleta attorney au auction audi audible audio auspost author auto autos avianca aw aws ax axa az azure ba baby baidu banamex bananarepublic band bank bar barcelona barclaycard barclays barefoot bargains baseball basketball bauhaus bayern bb bbc bbt bbva bcg bcn bd be beats beauty beer bentley berlin best bestbuy bet bf bg bh bharti bi bible bid bike bing bingo bio biz bj black blackfriday blockbuster blog bloomberg blue bm bms bmw bn bnpparibas bo boats boehringer bofa bom bond boo book booking bosch bostik boston bot boutique box br bradesco bridgestone broadway broker brother brussels bs bt budapest bugatti build builders business buy buzz bv bw by bz bzh ca cab cafe cal call calvinklein cam camera camp cancerresearch canon capetown capital capitalone car caravan cards care career careers cars casa case cash casino cat catering catholic cba cbn cbre cbs cc cd center ceo cern cf cfa cfd cg ch chanel channel charity chase chat cheap chintai christmas chrome church ci cipriani circle cisco citadel citi citic city cityeats ck cl claims cleaning click clinic clinique clothing cloud club clubmed cm cn co coach codes coffee college cologne com comcast commbank community company compare computer comsec condos construction consulting contact contractors cooking cookingchannel cool coop corsica country coupon coupons courses cpa cr credit creditcard creditunion cricket crown crs cruise cruises csc cu cuisinella cv cw cx cy cymru cyou cz dabur dad dance data date dating datsun day dclk dds de deal dealer deals degree delivery dell deloitte delta democrat dental dentist desi design dev dhl diamonds diet digital direct directory discount discover dish diy dj dk dm dnp do docs doctor dog domains dot download drive dtv dubai duck dunlop dupont durban dvag dvr dz earth eat ec eco edeka edu education ee eg email emerck energy engineer engineering enterprises epson equipment er ericsson erni es esq estate et etisalat eu eurovision eus events exchange expert exposed express extraspace fage fail fairwinds faith family fan fans farm farmers fashion fast fedex feedback ferrari ferrero fi fiat fidelity fido film final finance financial fire firestone firmdale fish fishing fit fitness fj fk flickr flights flir florist flowers fly fm fo foo food foodnetwork football ford forex forsale forum foundation fox fr free fresenius frl frogans frontdoor frontier ftr fujitsu fujixerox fun fund furniture futbol fyi ga gal gallery gallo gallup game games gap garden gay gb gbiz gd gdn ge gea gent genting george gf gg ggee gh gi gift gifts gives giving gl glade glass gle global globo gm gmail gmbh gmo gmx gn godaddy gold goldpoint golf goo goodyear goog google gop got gov gp gq gr grainger graphics gratis green gripe grocery group gs gt gu guardian gucci guge guide guitars guru gw gy hair hamburg hangout haus hbo hdfc hdfcbank health healthcare help helsinki here hermes hgtv hiphop hisamitsu hitachi hiv hk hkt hm hn hockey holdings holiday homedepot homegoods homes homesense honda horse hospital host hosting hot hoteles hotels hotmail house how hr hsbc ht hu hughes hyatt hyundai ibm icbc ice icu id ie ieee ifm ikano il im imamat imdb immo immobilien in inc industries infiniti info ing ink institute insurance insure int international intuit investments io ipiranga iq ir irish is ismaili ist istanbul it itau itv iveco jaguar java jcb je jeep jetzt jewelry jio jll jm jmp jnj jo jobs joburg jot joy jp jpmorgan jprs juegos juniper kaufen kddi ke kerryhotels kerrylogistics kerryproperties kfh kg kh ki kia kim kinder kindle kitchen kiwi km kn koeln komatsu kosher kp kpmg kpn kr krd kred kuokgroup kw ky kyoto kz la lacaixa lamborghini lamer lancaster lancia land landrover lanxess lasalle lat latino latrobe law lawyer lb lc lds lease leclerc lefrak legal lego lexus lgbt li lidl life lifeinsurance lifestyle lighting like lilly limited limo lincoln linde link lipsy live living lixil lk llc llp loan loans locker locus loft lol london lotte lotto love lpl lplfinancial lr ls lt ltd ltda lu lundbeck luxe luxury lv ly ma macys madrid maif maison makeup man management mango map market marketing markets marriott marshalls maserati mattel mba mc mckinsey md me med media meet melbourne meme memorial men menu merckmsd mg mh miami microsoft mil mini mint mit mitsubishi mk ml mlb mls mm mma mn mo mobi mobile moda moe moi mom monash money monster mormon mortgage moscow moto motorcycles mov movie mp mq mr ms msd mt mtn mtr mu museum mutual mv mw mx my mz na nab nagoya name nationwide natura navy nba nc ne nec net netbank netflix network neustar new news next nextdirect nexus nf nfl ng ngo nhk ni nico nike nikon ninja nissan nissay nl no nokia northwesternmutual norton now nowruz nowtv np nr nra nrw ntt nu nyc nz obi observer off office okinawa olayan olayangroup oldnavy ollo om omega one ong onl online onyourside ooo open oracle orange org organic origins osaka otsuka ott ovh pa page panasonic paris pars partners parts party passagens pay pccw pe pet pf pfizer pg ph pharmacy phd philips phone photo photography photos physio pics pictet pictures pid pin ping pink pioneer pizza pk pl place play playstation plumbing plus pm pn pnc pohl poker politie porn post pr pramerica praxi press prime pro prod productions prof progressive promo properties property protection pru prudential ps pt pub pw pwc py qa qpon quebec quest qvc racing radio raid re read realestate realtor realty recipes red redstone redumbrella rehab reise reisen reit reliance ren rent rentals repair report republican rest restaurant review reviews rexroth rich richardli ricoh ril rio rip rmit ro rocher rocks rodeo rogers room rs rsvp ru rugby ruhr run rw rwe ryukyu sa saarland safe safety sakura sale salon samsclub samsung sandvik sandvikcoromant sanofi sap sarl sas save saxo sb sbi sbs sc sca scb schaeffler schmidt scholarships school schule schwarz science scjohnson scot sd se search seat secure security seek select sener services ses seven sew sex sexy sfr sg sh shangrila sharp shaw shell shia shiksha shoes shop shopping shouji show showtime si silk sina singles site sj sk ski skin sky skype sl sling sm smart smile sn sncf so soccer social softbank software sohu solar solutions song sony soy spa space sport spot spreadbetting sr srl ss st stada staples star statebank statefarm stc stcgroup stockholm storage store stream studio study style su sucks supplies supply support surf surgery suzuki sv swatch swiftcover swiss sx sy sydney systems sz tab taipei talk taobao target tatamotors tatar tattoo tax taxi tc tci td tdk team tech technology tel temasek tennis teva tf tg th thd theater theatre tiaa tickets tienda tiffany tips tires tirol tj tjmaxx tjx tk tkmaxx tl tm tmall tn to today tokyo tools top toray toshiba total tours town toyota toys tr trade trading training travel travelchannel travelers travelersinsurance trust trv tt tube tui tunes tushu tv tvs tw tz ua ubank ubs ug uk unicom university uno uol ups us uy uz va vacations vana vanguard vc ve vegas ventures verisign versicherung vet vg vi viajes video vig viking villas vin vip virgin visa vision viva vivo vlaanderen vn vodka volkswagen volvo vote voting voto voyage vu vuelos wales walmart walter wang wanggou watch watches weather weatherchannel webcam weber website wed wedding weibo weir wf whoswho wien wiki williamhill win windows wine winners wme wolterskluwer woodside work works world wow ws wtc wtf xbox xerox xfinity xihuan xin xxx xyz yachts yahoo yamaxun yandex ye yodobashi yoga yokohama you youtube yt yun za zappos zara zero zip zm zone zuerich zw verm\xF6gensberater-ctb verm\xF6gensberatung-pwb \u03B5\u03BB \u03B5\u03C5 \u0431\u0433 \u0431\u0435\u043B \u0434\u0435\u0442\u0438 \u0435\u044E \u043A\u0430\u0442\u043E\u043B\u0438\u043A \u043A\u043E\u043C \u049B\u0430\u0437 \u043C\u043A\u0434 \u043C\u043E\u043D \u043C\u043E\u0441\u043A\u0432\u0430 \u043E\u043D\u043B\u0430\u0439\u043D \u043E\u0440\u0433 \u0440\u0443\u0441 \u0440\u0444 \u0441\u0430\u0439\u0442 \u0441\u0440\u0431 \u0443\u043A\u0440 \u10D2\u10D4 \u0570\u0561\u0575 \u05D9\u05E9\u05E8\u05D0\u05DC \u05E7\u05D5\u05DD \u0627\u0628\u0648\u0638\u0628\u064A \u0627\u062A\u0635\u0627\u0644\u0627\u062A \u0627\u0631\u0627\u0645\u0643\u0648 \u0627\u0644\u0627\u0631\u062F\u0646 \u0627\u0644\u0628\u062D\u0631\u064A\u0646 \u0627\u0644\u062C\u0632\u0627\u0626\u0631 \u0627\u0644\u0633\u0639\u0648\u062F\u064A\u0629 \u0627\u0644\u0639\u0644\u064A\u0627\u0646 \u0627\u0644\u0645\u063A\u0631\u0628 \u0627\u0645\u0627\u0631\u0627\u062A \u0627\u06CC\u0631\u0627\u0646 \u0628\u0627\u0631\u062A \u0628\u0627\u0632\u0627\u0631 \u0628\u06BE\u0627\u0631\u062A \u0628\u064A\u062A\u0643 \u067E\u0627\u06A9\u0633\u062A\u0627\u0646 \u0680\u0627\u0631\u062A \u062A\u0648\u0646\u0633 \u0633\u0648\u062F\u0627\u0646 \u0633\u0648\u0631\u064A\u0629 \u0634\u0628\u0643\u0629 \u0639\u0631\u0627\u0642 \u0639\u0631\u0628 \u0639\u0645\u0627\u0646 \u0641\u0644\u0633\u0637\u064A\u0646 \u0642\u0637\u0631 \u0643\u0627\u062B\u0648\u0644\u064A\u0643 \u0643\u0648\u0645 \u0645\u0635\u0631 \u0645\u0644\u064A\u0633\u064A\u0627 \u0645\u0648\u0631\u064A\u062A\u0627\u0646\u064A\u0627 \u0645\u0648\u0642\u0639 \u0647\u0645\u0631\u0627\u0647 \u0915\u0949\u092E \u0928\u0947\u091F \u092D\u093E\u0930\u0924 \u092D\u093E\u0930\u0924\u092E\u094D \u092D\u093E\u0930\u094B\u0924 \u0938\u0902\u0917\u0920\u0928 \u09AC\u09BE\u0982\u09B2\u09BE \u09AD\u09BE\u09B0\u09A4 \u09AD\u09BE\u09F0\u09A4 \u0A2D\u0A3E\u0A30\u0A24 \u0AAD\u0ABE\u0AB0\u0AA4 \u0B2D\u0B3E\u0B30\u0B24 \u0B87\u0BA8\u0BCD\u0BA4\u0BBF\u0BAF\u0BBE \u0B87\u0BB2\u0B99\u0BCD\u0B95\u0BC8 \u0B9A\u0BBF\u0B99\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0BC2\u0BB0\u0BCD \u0C2D\u0C3E\u0C30\u0C24\u0C4D \u0CAD\u0CBE\u0CB0\u0CA4 \u0D2D\u0D3E\u0D30\u0D24\u0D02 \u0DBD\u0D82\u0D9A\u0DCF \u0E04\u0E2D\u0E21 \u0E44\u0E17\u0E22 \u0EA5\u0EB2\u0EA7 \uB2F7\uB137 \uB2F7\uCEF4 \uC0BC\uC131 \uD55C\uAD6D \u30A2\u30DE\u30BE\u30F3 \u30B0\u30FC\u30B0\u30EB \u30AF\u30E9\u30A6\u30C9 \u30B3\u30E0 \u30B9\u30C8\u30A2 \u30BB\u30FC\u30EB \u30D5\u30A1\u30C3\u30B7\u30E7\u30F3 \u30DD\u30A4\u30F3\u30C8 \u307F\u3093\u306A \u4E16\u754C \u4E2D\u4FE1 \u4E2D\u56FD \u4E2D\u570B \u4E2D\u6587\u7F51 \u4E9A\u9A6C\u900A \u4F01\u4E1A \u4F5B\u5C71 \u4FE1\u606F \u5065\u5EB7 \u516B\u5366 \u516C\u53F8 \u516C\u76CA \u53F0\u6E7E \u53F0\u7063 \u5546\u57CE \u5546\u5E97 \u5546\u6807 \u5609\u91CC \u5609\u91CC\u5927\u9152\u5E97 \u5728\u7EBF \u5927\u4F17\u6C7D\u8F66 \u5927\u62FF \u5929\u4E3B\u6559 \u5A31\u4E50 \u5BB6\u96FB \u5E7F\u4E1C \u5FAE\u535A \u6148\u5584 \u6211\u7231\u4F60 \u624B\u673A \u62DB\u8058 \u653F\u52A1 \u653F\u5E9C \u65B0\u52A0\u5761 \u65B0\u95FB \u65F6\u5C1A \u66F8\u7C4D \u673A\u6784 \u6DE1\u9A6C\u9521 \u6E38\u620F \u6FB3\u9580 \u70B9\u770B \u79FB\u52A8 \u7EC4\u7EC7\u673A\u6784 \u7F51\u5740 \u7F51\u5E97 \u7F51\u7AD9 \u7F51\u7EDC \u8054\u901A \u8BFA\u57FA\u4E9A \u8C37\u6B4C \u8D2D\u7269 \u901A\u8CA9 \u96C6\u56E2 \u96FB\u8A0A\u76C8\u79D1 \u98DE\u5229\u6D66 \u98DF\u54C1 \u9910\u5385 \u9999\u683C\u91CC\u62C9 \u9999\u6E2F".split(" "),no=/(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/,ro=/(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26A7\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5-\uDED7\uDEDD-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFC\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDDFF\uDE70-\uDE74\uDE78-\uDE7C\uDE80-\uDE86\uDE90-\uDEAC\uDEB0-\uDEBA\uDEC0-\uDEC5\uDED0-\uDED9\uDEE0-\uDEE7\uDEF0-\uDEF6])/,io=/\uFE0F/,so=/\d/,Cm=/\s/;function qk(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=Fe(),t=ee(mn),r=ee(Tn),i=Fe(),o=ee(S0),a=[[so,r],[no,r],[ro,r],[io,r]],u=function(){var E=ee(Tn);return E.j={"-":i},E.jr=[].concat(a),E},c=function(E){var q=u();return q.t=E,q};Wk(e,[["'",ee(Za)],["{",ee(ss)],["[",ee(yo)],["<",ee(bo)],["(",ee(Do)],["}",ee(pi)],["]",ee(as)],[">",ee(ls)],[")",ee(us)],["&",ee(Xa)],["*",ee(Qa)],["@",ee(cs)],["`",ee(tl)],["^",ee(nl)],[":",ee(xo)],[",",ee(Sf)],["$",ee(rl)],[".",ee(Pr)],["=",ee(il)],["!",ee(kf)],["-",ee(sl)],["%",ee(ol)],["|",ee(al)],["+",ee(ll)],["#",ee(ul)],["?",ee(cl)],['"',ee(Of)],["/",ee(br)],[";",ee(Tf)],["~",ee(fl)],["_",ee(dl)],["\\",ee(el)]]),W(e,`
`,ee(_f)),rt(e,Cm,o),W(o,`
`,Fe()),rt(o,Cm,o);for(var h=0;h<wm.length;h++)ci(e,wm[h],c(qn),u);var d=u(),m=u(),g=u(),y=u();ci(e,"file",d,u),ci(e,"ftp",m,u),ci(e,"http",g,u),ci(e,"mailto",y,u);var x=u(),w=ee(ws),_=ee(Af);W(m,"s",x),W(m,":",w),W(g,"s",x),W(g,":",w),W(d,":",w),W(x,":",w),W(y,":",_);for(var O=u(),P=0;P<n.length;P++)ci(e,n[P],O,u);return W(O,":",w),ci(e,"localhost",c(yr),u),rt(e,so,t),rt(e,no,r),rt(e,ro,r),rt(e,io,r),rt(t,so,t),rt(t,no,r),rt(t,ro,r),rt(t,io,r),W(t,"-",i),W(r,"-",i),W(i,"-",i),rt(r,so,r),rt(r,no,r),rt(r,ro,r),rt(r,io,r),rt(i,so,r),rt(i,no,r),rt(i,ro,r),rt(i,io,r),e.jd=ee(hl),e}function Kk(n,e){for(var t=jk(e.replace(/[A-Z]/g,function(y){return y.toLowerCase()})),r=t.length,i=[],o=0,a=0;a<r;){for(var u=n,c=null,h=0,d=null,m=-1,g=-1;a<r&&(c=Ya(u,t[a]));)u=c,u.accepts()?(m=0,g=0,d=u):m>=0&&(m+=t[a].length,g++),h+=t[a].length,o+=t[a].length,a++;o-=m,a-=g,h-=m,i.push({t:d.t,v:e.substr(o-h,h),s:o-h,e:o})}return i}function jk(n){for(var e=[],t=n.length,r=0;r<t;){var i=n.charCodeAt(r),o=void 0,a=i<55296||i>56319||r+1===t||(o=n.charCodeAt(r+1))<56320||o>57343?n[r]:n.slice(r,r+2);e.push(a),r+=a.length}return e}function Ra(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ra=function(e){return typeof e}:Ra=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ra(n)}var gt={defaultProtocol:"http",events:null,format:Em,formatHref:Em,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:0,className:null,attributes:null,ignoreTags:[]};function Jk(n){n=n||{},this.defaultProtocol="defaultProtocol"in n?n.defaultProtocol:gt.defaultProtocol,this.events="events"in n?n.events:gt.events,this.format="format"in n?n.format:gt.format,this.formatHref="formatHref"in n?n.formatHref:gt.formatHref,this.nl2br="nl2br"in n?n.nl2br:gt.nl2br,this.tagName="tagName"in n?n.tagName:gt.tagName,this.target="target"in n?n.target:gt.target,this.rel="rel"in n?n.rel:gt.rel,this.validate="validate"in n?n.validate:gt.validate,this.truncate="truncate"in n?n.truncate:gt.truncate,this.className="className"in n?n.className:gt.className,this.attributes=n.attributes||gt.attributes,this.ignoreTags=[];for(var e=("ignoreTags"in n)?n.ignoreTags:gt.ignoreTags,t=0;t<e.length;t++)this.ignoreTags.push(e[t].toUpperCase())}Jk.prototype={resolve:function(e){var t=e.toHref(this.defaultProtocol);return{formatted:this.get("format",e.toString(),e),formattedHref:this.get("formatHref",t,e),tagName:this.get("tagName",t,e),className:this.get("className",t,e),target:this.get("target",t,e),rel:this.get("rel",t,e),events:this.getObject("events",t,e),attributes:this.getObject("attributes",t,e),truncate:this.get("truncate",t,e)}},check:function(e){return this.get("validate",e.toString(),e)},get:function(e,t,r){var i=this[e];if(!i)return i;var o;switch(Ra(i)){case"function":return i(t,r.t);case"object":return o=r.t in i?i[r.t]:gt[e],typeof o=="function"?o(t,r.t):o}return i},getObject:function(e,t,r){var i=this[e];return typeof i=="function"?i(t,r.t):i}};function Em(n){return n}function Gk(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=Object.create(n.prototype);for(var i in t)r[i]=t[i];return r.constructor=e,e.prototype=r,e}function pl(){}pl.prototype={t:"token",isLink:!1,toString:function(){return this.v},toHref:function(){return this.toString()},startIndex:function(){return this.tk[0].s},endIndex:function(){return this.tk[this.tk.length-1].e},toObject:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:gt.defaultProtocol;return{type:this.t,value:this.v,isLink:this.isLink,href:this.toHref(e),start:this.startIndex(),end:this.endIndex()}}};function Mi(n,e){function t(r,i){this.t=n,this.v=r,this.tk=i}return Gk(pl,t,e),t}var k0=Mi("email",{isLink:!0}),jc=Mi("email",{isLink:!0,toHref:function(){return"mailto:"+this.toString()}}),Jc=Mi("text"),O0=Mi("nl"),Ir=Mi("url",{isLink:!0,toHref:function(){for(var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:gt.defaultProtocol,t=this.tk,r=!1,i=!1,o=[],a=0;t[a].t===ws;)r=!0,o.push(t[a].v),a++;for(;t[a].t===br;)i=!0,o.push(t[a].v),a++;for(;a<t.length;a++)o.push(t[a].v);return o=o.join(""),r||i||(o="".concat(e,"://").concat(o)),o},hasProtocol:function(){return this.tk[0].t===ws}}),Yk=Object.freeze({__proto__:null,MultiToken:pl,Base:pl,createTokenClass:Mi,MailtoEmail:k0,Email:jc,Text:Jc,Nl:O0,Url:Ir});function Xk(){var n=Fe(),e=Fe(),t=Fe(),r=Fe(),i=Fe(),o=Fe(),a=Fe(),u=ee(Ir),c=Fe(),h=ee(Ir),d=ee(Ir),m=Fe(),g=Fe(),y=Fe(),x=Fe(),w=Fe(),_=ee(Ir),O=ee(Ir),P=ee(Ir),z=ee(Ir),E=Fe(),q=Fe(),$=Fe(),K=Fe(),H=Fe(),fe=Fe(),Ee=ee(jc),$e=Fe(),Pe=ee(jc),we=ee(k0),Ze=Fe(),Ke=Fe(),Le=Fe(),Re=Fe(),Me=ee(O0);W(n,_f,Me),W(n,ws,e),W(n,Af,t),W(e,br,r),W(r,br,i),W(n,qn,o),W(n,Tn,o),W(n,yr,u),W(n,mn,o),W(i,qn,d),W(i,Tn,d),W(i,mn,d),W(i,yr,d),W(o,Pr,a),W(H,Pr,fe),W(a,qn,u),W(a,Tn,o),W(a,mn,o),W(a,yr,o),W(fe,qn,Ee),W(fe,Tn,H),W(fe,mn,H),W(fe,yr,H),W(u,Pr,a),W(Ee,Pr,fe),W(u,xo,c),W(u,br,d),W(c,mn,h),W(h,br,d),W(Ee,xo,$e),W($e,mn,Pe);var Se=[Xa,Qa,cs,el,tl,nl,rl,Tn,il,sl,yr,mn,ol,al,ll,ul,ws,br,hl,fl,qn,dl],Ce=[Za,ls,pi,as,us,xo,Sf,Pr,kf,bo,ss,yo,Do,cl,Of,Tf];W(d,ss,g),W(d,yo,y),W(d,bo,x),W(d,Do,w),W(m,ss,g),W(m,yo,y),W(m,bo,x),W(m,Do,w),W(g,pi,d),W(y,as,d),W(x,ls,d),W(w,us,d),W(_,pi,d),W(O,as,d),W(P,ls,d),W(z,us,d),W(E,pi,d),W(q,as,d),W($,ls,d),W(K,us,d),he(g,Se,_),he(y,Se,O),he(x,Se,P),he(w,Se,z),he(g,Ce,E),he(y,Ce,q),he(x,Ce,$),he(w,Ce,K),he(_,Se,_),he(O,Se,O),he(P,Se,P),he(z,Se,z),he(_,Ce,_),he(O,Ce,O),he(P,Ce,P),he(z,Ce,z),he(E,Se,_),he(q,Se,O),he($,Se,P),he(K,Se,z),he(E,Ce,E),he(q,Ce,q),he($,Ce,$),he(K,Ce,K),he(d,Se,d),he(m,Se,d),he(d,Ce,m),he(m,Ce,m),W(t,qn,we),W(t,Tn,we),W(t,mn,we),W(t,yr,we),he(we,Se,we),he(we,Ce,Ze),he(Ze,Se,we),he(Ze,Ce,Ze);var Ve=[Xa,Za,Qa,el,tl,nl,pi,rl,Tn,il,sl,mn,ss,ol,al,ll,ul,cl,br,hl,fl,qn,dl];return he(o,Ve,Ke),W(o,cs,Le),he(u,Ve,Ke),W(u,cs,Le),he(a,Ve,Ke),he(Ke,Ve,Ke),W(Ke,cs,Le),W(Ke,Pr,Re),he(Re,Ve,Ke),W(Le,qn,H),W(Le,Tn,H),W(Le,mn,H),W(Le,yr,Ee),n}function Zk(n,e,t){for(var r=t.length,i=0,o=[],a=[];i<r;){for(var u=n,c=null,h=null,d=0,m=null,g=-1;i<r&&!(c=Ya(u,t[i].t));)a.push(t[i++]);for(;i<r&&(h=c||Ya(u,t[i].t));)c=null,u=h,u.accepts()?(g=0,m=u):g>=0&&g++,i++,d++;if(g<0)for(var y=i-d;y<i;y++)a.push(t[y]);else{a.length>0&&(o.push(Dc(Jc,e,a)),a=[]),i-=g,d-=g;var x=m.t,w=t.slice(i-d,i);o.push(Dc(x,e,w))}}return a.length>0&&o.push(Dc(Jc,e,a)),o}function Dc(n,e,t){var r=t[0].s,i=t[t.length-1].e,o=e.substr(r,i-r);return new n(o,t)}var Qk=typeof console<"u"&&console&&console.warn||function(){},Gt={scanner:null,parser:null,pluginQueue:[],customProtocols:[],initialized:!1};function e2(n){if(Gt.initialized&&Qk('linkifyjs: already initialized - will not register custom protocol "'.concat(n,'" until you manually call linkify.init(). To avoid this warning, please register all custom protocols before invoking linkify the first time.')),!/^[a-z-]+$/.test(n))throw Error("linkifyjs: protocols containing characters other than a-z or - (hyphen) are not supported");Gt.customProtocols.push(n)}function t2(){Gt.scanner={start:qk(Gt.customProtocols),tokens:Uk},Gt.parser={start:Xk(),tokens:Yk};for(var n={createTokenClass:Mi},e=0;e<Gt.pluginQueue.length;e++)Gt.pluginQueue[e][1]({scanner:Gt.scanner,parser:Gt.parser,utils:n});Gt.initialized=!0}function T0(n){return Gt.initialized||t2(),Zk(Gt.parser.start,n,Kk(Gt.scanner.start,n))}function Mf(n){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,t=T0(n),r=[],i=0;i<t.length;i++){var o=t[i];o.isLink&&(!e||o.t===e)&&r.push(o.toObject())}return r}function Am(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,t=T0(n);return t.length===1&&t[0].isLink&&(!e||t[0].t===e)}function n2(n){return new tn({key:new rr("autolink"),appendTransaction:(e,t,r)=>{const i=e.some(d=>d.docChanged)&&!t.doc.eq(r.doc),o=e.some(d=>d.getMeta("preventAutolink"));if(!i||o)return;const{tr:a}=r,u=Nk(t.doc,[...e]),{mapping:c}=u;if(Pk(u).forEach(({oldRange:d,newRange:m})=>{Kc(d.from,d.to,t.doc).filter(g=>g.mark.type===n.type).forEach(g=>{const y=c.map(g.from),x=c.map(g.to),w=Kc(y,x,r.doc).filter(q=>q.mark.type===n.type);if(!w.length)return;const _=w[0],O=t.doc.textBetween(g.from,g.to,void 0," "),P=r.doc.textBetween(_.from,_.to,void 0," "),z=Am(O),E=Am(P);z&&!E&&a.removeMark(_.from,_.to,n.type)}),Rk(r.doc,m,g=>g.isTextblock).forEach(g=>{const y=r.doc.textBetween(g.pos,g.pos+g.node.nodeSize,void 0," ");Mf(y).filter(x=>x.isLink).filter(x=>n.validate?n.validate(x.value):!0).map(x=>({...x,from:g.pos+x.start+1,to:g.pos+x.end+1})).filter(x=>{const w=m.from>=x.from&&m.from<=x.to,_=m.to>=x.from&&m.to<=x.to;return w||_}).forEach(x=>{a.addMark(x.from,x.to,n.type.create({href:x.href}))})})}),!!a.steps.length)return a}})}function r2(n){return new tn({key:new rr("handleClickLink"),props:{handleClick:(e,t,r)=>{var i;const o=A0(e.state,n.type.name);return((i=r.target)===null||i===void 0?void 0:i.closest("a"))&&o.href?(window.open(o.href,o.target),!0):!1}}})}function i2(n){return new tn({key:new rr("handlePasteLink"),props:{handlePaste:(e,t,r)=>{const{state:i}=e,{selection:o}=i,{empty:a}=o;if(a)return!1;let u="";r.content.forEach(h=>{u+=h.textContent});const c=Mf(u).find(h=>h.isLink&&h.value===u);return!u||!c?!1:(n.editor.commands.setMark(n.type,{href:c.href}),!0)}}})}const s2=Ga.create({name:"link",priority:1e3,keepOnSplit:!1,onCreate(){this.options.protocols.forEach(e2)},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,linkOnPaste:!0,autolink:!0,protocols:[],HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},validate:void 0}},addAttributes(){return{href:{default:null},target:{default:this.options.HTMLAttributes.target},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:'a[href]:not([href *= "javascript:" i])'}]},renderHTML({HTMLAttributes:n}){return["a",bf(this.options.HTMLAttributes,n),0]},addCommands(){return{setLink:n=>({chain:e})=>e().setMark(this.name,n).setMeta("preventAutolink",!0).run(),toggleLink:n=>({chain:e})=>e().toggleMark(this.name,n,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run(),unsetLink:()=>({chain:n})=>n().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[zk({find:n=>Mf(n).filter(e=>this.options.validate?this.options.validate(e.value):!0).filter(e=>e.isLink).map(e=>({text:e.value,index:e.start,data:e})),type:this.type,getAttributes:n=>{var e;return{href:(e=n.data)===null||e===void 0?void 0:e.href}}})]},addProseMirrorPlugins(){const n=[];return this.options.autolink&&n.push(n2({type:this.type,validate:this.options.validate})),this.options.openOnClick&&n.push(r2({type:this.type})),this.options.linkOnPaste&&n.push(i2({editor:this.editor,type:this.type})),n}}),Ff=()=>({defaultExtensions:[$k,Hk,Vk,s2],insertEmoji:({editorId:i,emoji:o})=>{o.hasOwnProperty("native")&&bp.emit("insertEmoji",{editorId:i,emoji:o})},focusEditor:({editorId:i})=>{bp.emit("focusEditor",{editorId:i})},isDocEmpty:i=>i==="<div></div>"?!0:i===""});var zt="top",Dn="bottom",xn="right",$t="left",Nf="auto",Bo=[zt,Dn,xn,$t],Cs="start",To="end",o2="clippingParents",M0="viewport",oo="popper",a2="reference",_m=Bo.reduce(function(n,e){return n.concat([e+"-"+Cs,e+"-"+To])},[]),F0=[].concat(Bo,[Nf]).reduce(function(n,e){return n.concat([e,e+"-"+Cs,e+"-"+To])},[]),l2="beforeRead",u2="read",c2="afterRead",f2="beforeMain",d2="main",h2="afterMain",p2="beforeWrite",m2="write",g2="afterWrite",v2=[l2,u2,c2,f2,d2,h2,p2,m2,g2];function nr(n){return n?(n.nodeName||"").toLowerCase():null}function Pn(n){if(n==null)return window;if(n.toString()!=="[object Window]"){var e=n.ownerDocument;return e&&e.defaultView||window}return n}function Es(n){var e=Pn(n).Element;return n instanceof e||n instanceof Element}function yn(n){var e=Pn(n).HTMLElement;return n instanceof e||n instanceof HTMLElement}function Rf(n){if(typeof ShadowRoot>"u")return!1;var e=Pn(n).ShadowRoot;return n instanceof e||n instanceof ShadowRoot}function y2(n){var e=n.state;Object.keys(e.elements).forEach(function(t){var r=e.styles[t]||{},i=e.attributes[t]||{},o=e.elements[t];!yn(o)||!nr(o)||(Object.assign(o.style,r),Object.keys(i).forEach(function(a){var u=i[a];u===!1?o.removeAttribute(a):o.setAttribute(a,u===!0?"":u)}))})}function b2(n){var e=n.state,t={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,t.popper),e.styles=t,e.elements.arrow&&Object.assign(e.elements.arrow.style,t.arrow),function(){Object.keys(e.elements).forEach(function(r){var i=e.elements[r],o=e.attributes[r]||{},a=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:t[r]),u=a.reduce(function(c,h){return c[h]="",c},{});!yn(i)||!nr(i)||(Object.assign(i.style,u),Object.keys(o).forEach(function(c){i.removeAttribute(c)}))})}}const N0={name:"applyStyles",enabled:!0,phase:"write",fn:y2,effect:b2,requires:["computeStyles"]};function Qn(n){return n.split("-")[0]}var _i=Math.max,ml=Math.min,As=Math.round;function _s(n,e){e===void 0&&(e=!1);var t=n.getBoundingClientRect(),r=1,i=1;if(yn(n)&&e){var o=n.offsetHeight,a=n.offsetWidth;a>0&&(r=As(t.width)/a||1),o>0&&(i=As(t.height)/o||1)}return{width:t.width/r,height:t.height/i,top:t.top/i,right:t.right/r,bottom:t.bottom/i,left:t.left/r,x:t.left/r,y:t.top/i}}function Bf(n){var e=_s(n),t=n.offsetWidth,r=n.offsetHeight;return Math.abs(e.width-t)<=1&&(t=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:n.offsetLeft,y:n.offsetTop,width:t,height:r}}function R0(n,e){var t=e.getRootNode&&e.getRootNode();if(n.contains(e))return!0;if(t&&Rf(t)){var r=e;do{if(r&&n.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function xr(n){return Pn(n).getComputedStyle(n)}function D2(n){return["table","td","th"].indexOf(nr(n))>=0}function Xr(n){return((Es(n)?n.ownerDocument:n.document)||window.document).documentElement}function Fl(n){return nr(n)==="html"?n:n.assignedSlot||n.parentNode||(Rf(n)?n.host:null)||Xr(n)}function Sm(n){return!yn(n)||xr(n).position==="fixed"?null:n.offsetParent}function x2(n){var e=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1,t=navigator.userAgent.indexOf("Trident")!==-1;if(t&&yn(n)){var r=xr(n);if(r.position==="fixed")return null}var i=Fl(n);for(Rf(i)&&(i=i.host);yn(i)&&["html","body"].indexOf(nr(i))<0;){var o=xr(i);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||e&&o.willChange==="filter"||e&&o.filter&&o.filter!=="none")return i;i=i.parentNode}return null}function Io(n){for(var e=Pn(n),t=Sm(n);t&&D2(t)&&xr(t).position==="static";)t=Sm(t);return t&&(nr(t)==="html"||nr(t)==="body"&&xr(t).position==="static")?e:t||x2(n)||e}function If(n){return["top","bottom"].indexOf(n)>=0?"x":"y"}function wo(n,e,t){return _i(n,ml(e,t))}function w2(n,e,t){var r=wo(n,e,t);return r>t?t:r}function B0(){return{top:0,right:0,bottom:0,left:0}}function I0(n){return Object.assign({},B0(),n)}function P0(n,e){return e.reduce(function(t,r){return t[r]=n,t},{})}var C2=function(e,t){return e=typeof e=="function"?e(Object.assign({},t.rects,{placement:t.placement})):e,I0(typeof e!="number"?e:P0(e,Bo))};function E2(n){var e,t=n.state,r=n.name,i=n.options,o=t.elements.arrow,a=t.modifiersData.popperOffsets,u=Qn(t.placement),c=If(u),h=[$t,xn].indexOf(u)>=0,d=h?"height":"width";if(!(!o||!a)){var m=C2(i.padding,t),g=Bf(o),y=c==="y"?zt:$t,x=c==="y"?Dn:xn,w=t.rects.reference[d]+t.rects.reference[c]-a[c]-t.rects.popper[d],_=a[c]-t.rects.reference[c],O=Io(o),P=O?c==="y"?O.clientHeight||0:O.clientWidth||0:0,z=w/2-_/2,E=m[y],q=P-g[d]-m[x],$=P/2-g[d]/2+z,K=wo(E,$,q),H=c;t.modifiersData[r]=(e={},e[H]=K,e.centerOffset=K-$,e)}}function A2(n){var e=n.state,t=n.options,r=t.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||!R0(e.elements.popper,i)||(e.elements.arrow=i))}const _2={name:"arrow",enabled:!0,phase:"main",fn:E2,effect:A2,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Ss(n){return n.split("-")[1]}var S2={top:"auto",right:"auto",bottom:"auto",left:"auto"};function k2(n){var e=n.x,t=n.y,r=window,i=r.devicePixelRatio||1;return{x:As(e*i)/i||0,y:As(t*i)/i||0}}function km(n){var e,t=n.popper,r=n.popperRect,i=n.placement,o=n.variation,a=n.offsets,u=n.position,c=n.gpuAcceleration,h=n.adaptive,d=n.roundOffsets,m=n.isFixed,g=a.x,y=g===void 0?0:g,x=a.y,w=x===void 0?0:x,_=typeof d=="function"?d({x:y,y:w}):{x:y,y:w};y=_.x,w=_.y;var O=a.hasOwnProperty("x"),P=a.hasOwnProperty("y"),z=$t,E=zt,q=window;if(h){var $=Io(t),K="clientHeight",H="clientWidth";if($===Pn(t)&&($=Xr(t),xr($).position!=="static"&&u==="absolute"&&(K="scrollHeight",H="scrollWidth")),$=$,i===zt||(i===$t||i===xn)&&o===To){E=Dn;var fe=m&&$===q&&q.visualViewport?q.visualViewport.height:$[K];w-=fe-r.height,w*=c?1:-1}if(i===$t||(i===zt||i===Dn)&&o===To){z=xn;var Ee=m&&$===q&&q.visualViewport?q.visualViewport.width:$[H];y-=Ee-r.width,y*=c?1:-1}}var $e=Object.assign({position:u},h&&S2),Pe=d===!0?k2({x:y,y:w}):{x:y,y:w};if(y=Pe.x,w=Pe.y,c){var we;return Object.assign({},$e,(we={},we[E]=P?"0":"",we[z]=O?"0":"",we.transform=(q.devicePixelRatio||1)<=1?"translate("+y+"px, "+w+"px)":"translate3d("+y+"px, "+w+"px, 0)",we))}return Object.assign({},$e,(e={},e[E]=P?w+"px":"",e[z]=O?y+"px":"",e.transform="",e))}function O2(n){var e=n.state,t=n.options,r=t.gpuAcceleration,i=r===void 0?!0:r,o=t.adaptive,a=o===void 0?!0:o,u=t.roundOffsets,c=u===void 0?!0:u,h={placement:Qn(e.placement),variation:Ss(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,km(Object.assign({},h,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:a,roundOffsets:c})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,km(Object.assign({},h,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const T2={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:O2,data:{}};var Oa={passive:!0};function M2(n){var e=n.state,t=n.instance,r=n.options,i=r.scroll,o=i===void 0?!0:i,a=r.resize,u=a===void 0?!0:a,c=Pn(e.elements.popper),h=[].concat(e.scrollParents.reference,e.scrollParents.popper);return o&&h.forEach(function(d){d.addEventListener("scroll",t.update,Oa)}),u&&c.addEventListener("resize",t.update,Oa),function(){o&&h.forEach(function(d){d.removeEventListener("scroll",t.update,Oa)}),u&&c.removeEventListener("resize",t.update,Oa)}}const F2={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:M2,data:{}};var N2={left:"right",right:"left",bottom:"top",top:"bottom"};function Ba(n){return n.replace(/left|right|bottom|top/g,function(e){return N2[e]})}var R2={start:"end",end:"start"};function Om(n){return n.replace(/start|end/g,function(e){return R2[e]})}function Pf(n){var e=Pn(n),t=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:t,scrollTop:r}}function Lf(n){return _s(Xr(n)).left+Pf(n).scrollLeft}function B2(n){var e=Pn(n),t=Xr(n),r=e.visualViewport,i=t.clientWidth,o=t.clientHeight,a=0,u=0;return r&&(i=r.width,o=r.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(a=r.offsetLeft,u=r.offsetTop)),{width:i,height:o,x:a+Lf(n),y:u}}function I2(n){var e,t=Xr(n),r=Pf(n),i=(e=n.ownerDocument)==null?void 0:e.body,o=_i(t.scrollWidth,t.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),a=_i(t.scrollHeight,t.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),u=-r.scrollLeft+Lf(n),c=-r.scrollTop;return xr(i||t).direction==="rtl"&&(u+=_i(t.clientWidth,i?i.clientWidth:0)-o),{width:o,height:a,x:u,y:c}}function zf(n){var e=xr(n),t=e.overflow,r=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(t+i+r)}function L0(n){return["html","body","#document"].indexOf(nr(n))>=0?n.ownerDocument.body:yn(n)&&zf(n)?n:L0(Fl(n))}function Co(n,e){var t;e===void 0&&(e=[]);var r=L0(n),i=r===((t=n.ownerDocument)==null?void 0:t.body),o=Pn(r),a=i?[o].concat(o.visualViewport||[],zf(r)?r:[]):r,u=e.concat(a);return i?u:u.concat(Co(Fl(a)))}function Gc(n){return Object.assign({},n,{left:n.x,top:n.y,right:n.x+n.width,bottom:n.y+n.height})}function P2(n){var e=_s(n);return e.top=e.top+n.clientTop,e.left=e.left+n.clientLeft,e.bottom=e.top+n.clientHeight,e.right=e.left+n.clientWidth,e.width=n.clientWidth,e.height=n.clientHeight,e.x=e.left,e.y=e.top,e}function Tm(n,e){return e===M0?Gc(B2(n)):Es(e)?P2(e):Gc(I2(Xr(n)))}function L2(n){var e=Co(Fl(n)),t=["absolute","fixed"].indexOf(xr(n).position)>=0,r=t&&yn(n)?Io(n):n;return Es(r)?e.filter(function(i){return Es(i)&&R0(i,r)&&nr(i)!=="body"}):[]}function z2(n,e,t){var r=e==="clippingParents"?L2(n):[].concat(e),i=[].concat(r,[t]),o=i[0],a=i.reduce(function(u,c){var h=Tm(n,c);return u.top=_i(h.top,u.top),u.right=ml(h.right,u.right),u.bottom=ml(h.bottom,u.bottom),u.left=_i(h.left,u.left),u},Tm(n,o));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function z0(n){var e=n.reference,t=n.element,r=n.placement,i=r?Qn(r):null,o=r?Ss(r):null,a=e.x+e.width/2-t.width/2,u=e.y+e.height/2-t.height/2,c;switch(i){case zt:c={x:a,y:e.y-t.height};break;case Dn:c={x:a,y:e.y+e.height};break;case xn:c={x:e.x+e.width,y:u};break;case $t:c={x:e.x-t.width,y:u};break;default:c={x:e.x,y:e.y}}var h=i?If(i):null;if(h!=null){var d=h==="y"?"height":"width";switch(o){case Cs:c[h]=c[h]-(e[d]/2-t[d]/2);break;case To:c[h]=c[h]+(e[d]/2-t[d]/2);break}}return c}function Mo(n,e){e===void 0&&(e={});var t=e,r=t.placement,i=r===void 0?n.placement:r,o=t.boundary,a=o===void 0?o2:o,u=t.rootBoundary,c=u===void 0?M0:u,h=t.elementContext,d=h===void 0?oo:h,m=t.altBoundary,g=m===void 0?!1:m,y=t.padding,x=y===void 0?0:y,w=I0(typeof x!="number"?x:P0(x,Bo)),_=d===oo?a2:oo,O=n.rects.popper,P=n.elements[g?_:d],z=z2(Es(P)?P:P.contextElement||Xr(n.elements.popper),a,c),E=_s(n.elements.reference),q=z0({reference:E,element:O,strategy:"absolute",placement:i}),$=Gc(Object.assign({},O,q)),K=d===oo?$:E,H={top:z.top-K.top+w.top,bottom:K.bottom-z.bottom+w.bottom,left:z.left-K.left+w.left,right:K.right-z.right+w.right},fe=n.modifiersData.offset;if(d===oo&&fe){var Ee=fe[i];Object.keys(H).forEach(function($e){var Pe=[xn,Dn].indexOf($e)>=0?1:-1,we=[zt,Dn].indexOf($e)>=0?"y":"x";H[$e]+=Ee[we]*Pe})}return H}function $2(n,e){e===void 0&&(e={});var t=e,r=t.placement,i=t.boundary,o=t.rootBoundary,a=t.padding,u=t.flipVariations,c=t.allowedAutoPlacements,h=c===void 0?F0:c,d=Ss(r),m=d?u?_m:_m.filter(function(x){return Ss(x)===d}):Bo,g=m.filter(function(x){return h.indexOf(x)>=0});g.length===0&&(g=m);var y=g.reduce(function(x,w){return x[w]=Mo(n,{placement:w,boundary:i,rootBoundary:o,padding:a})[Qn(w)],x},{});return Object.keys(y).sort(function(x,w){return y[x]-y[w]})}function H2(n){if(Qn(n)===Nf)return[];var e=Ba(n);return[Om(n),e,Om(e)]}function V2(n){var e=n.state,t=n.options,r=n.name;if(!e.modifiersData[r]._skip){for(var i=t.mainAxis,o=i===void 0?!0:i,a=t.altAxis,u=a===void 0?!0:a,c=t.fallbackPlacements,h=t.padding,d=t.boundary,m=t.rootBoundary,g=t.altBoundary,y=t.flipVariations,x=y===void 0?!0:y,w=t.allowedAutoPlacements,_=e.options.placement,O=Qn(_),P=O===_,z=c||(P||!x?[Ba(_)]:H2(_)),E=[_].concat(z).reduce(function(wn,tt){return wn.concat(Qn(tt)===Nf?$2(e,{placement:tt,boundary:d,rootBoundary:m,padding:h,flipVariations:x,allowedAutoPlacements:w}):tt)},[]),q=e.rects.reference,$=e.rects.popper,K=new Map,H=!0,fe=E[0],Ee=0;Ee<E.length;Ee++){var $e=E[Ee],Pe=Qn($e),we=Ss($e)===Cs,Ze=[zt,Dn].indexOf(Pe)>=0,Ke=Ze?"width":"height",Le=Mo(e,{placement:$e,boundary:d,rootBoundary:m,altBoundary:g,padding:h}),Re=Ze?we?xn:$t:we?Dn:zt;q[Ke]>$[Ke]&&(Re=Ba(Re));var Me=Ba(Re),Se=[];if(o&&Se.push(Le[Pe]<=0),u&&Se.push(Le[Re]<=0,Le[Me]<=0),Se.every(function(wn){return wn})){fe=$e,H=!1;break}K.set($e,Se)}if(H)for(var Ce=x?3:1,Ve=function(tt){var Tt=E.find(function(wr){var xt=K.get(wr);if(xt)return xt.slice(0,tt).every(function(rn){return rn})});if(Tt)return fe=Tt,"break"},nn=Ce;nn>0;nn--){var ir=Ve(nn);if(ir==="break")break}e.placement!==fe&&(e.modifiersData[r]._skip=!0,e.placement=fe,e.reset=!0)}}const W2={name:"flip",enabled:!0,phase:"main",fn:V2,requiresIfExists:["offset"],data:{_skip:!1}};function Mm(n,e,t){return t===void 0&&(t={x:0,y:0}),{top:n.top-e.height-t.y,right:n.right-e.width+t.x,bottom:n.bottom-e.height+t.y,left:n.left-e.width-t.x}}function Fm(n){return[zt,xn,Dn,$t].some(function(e){return n[e]>=0})}function U2(n){var e=n.state,t=n.name,r=e.rects.reference,i=e.rects.popper,o=e.modifiersData.preventOverflow,a=Mo(e,{elementContext:"reference"}),u=Mo(e,{altBoundary:!0}),c=Mm(a,r),h=Mm(u,i,o),d=Fm(c),m=Fm(h);e.modifiersData[t]={referenceClippingOffsets:c,popperEscapeOffsets:h,isReferenceHidden:d,hasPopperEscaped:m},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":d,"data-popper-escaped":m})}const q2={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:U2};function K2(n,e,t){var r=Qn(n),i=[$t,zt].indexOf(r)>=0?-1:1,o=typeof t=="function"?t(Object.assign({},e,{placement:n})):t,a=o[0],u=o[1];return a=a||0,u=(u||0)*i,[$t,xn].indexOf(r)>=0?{x:u,y:a}:{x:a,y:u}}function j2(n){var e=n.state,t=n.options,r=n.name,i=t.offset,o=i===void 0?[0,0]:i,a=F0.reduce(function(d,m){return d[m]=K2(m,e.rects,o),d},{}),u=a[e.placement],c=u.x,h=u.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=c,e.modifiersData.popperOffsets.y+=h),e.modifiersData[r]=a}const J2={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:j2};function G2(n){var e=n.state,t=n.name;e.modifiersData[t]=z0({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const Y2={name:"popperOffsets",enabled:!0,phase:"read",fn:G2,data:{}};function X2(n){return n==="x"?"y":"x"}function Z2(n){var e=n.state,t=n.options,r=n.name,i=t.mainAxis,o=i===void 0?!0:i,a=t.altAxis,u=a===void 0?!1:a,c=t.boundary,h=t.rootBoundary,d=t.altBoundary,m=t.padding,g=t.tether,y=g===void 0?!0:g,x=t.tetherOffset,w=x===void 0?0:x,_=Mo(e,{boundary:c,rootBoundary:h,padding:m,altBoundary:d}),O=Qn(e.placement),P=Ss(e.placement),z=!P,E=If(O),q=X2(E),$=e.modifiersData.popperOffsets,K=e.rects.reference,H=e.rects.popper,fe=typeof w=="function"?w(Object.assign({},e.rects,{placement:e.placement})):w,Ee=typeof fe=="number"?{mainAxis:fe,altAxis:fe}:Object.assign({mainAxis:0,altAxis:0},fe),$e=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,Pe={x:0,y:0};if(!!$){if(o){var we,Ze=E==="y"?zt:$t,Ke=E==="y"?Dn:xn,Le=E==="y"?"height":"width",Re=$[E],Me=Re+_[Ze],Se=Re-_[Ke],Ce=y?-H[Le]/2:0,Ve=P===Cs?K[Le]:H[Le],nn=P===Cs?-H[Le]:-K[Le],ir=e.elements.arrow,wn=y&&ir?Bf(ir):{width:0,height:0},tt=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:B0(),Tt=tt[Ze],wr=tt[Ke],xt=wo(0,K[Le],wn[Le]),rn=z?K[Le]/2-Ce-xt-Tt-Ee.mainAxis:Ve-xt-Tt-Ee.mainAxis,Ln=z?-K[Le]/2+Ce+xt+wr+Ee.mainAxis:nn+xt+wr+Ee.mainAxis,Cn=e.elements.arrow&&Io(e.elements.arrow),sr=Cn?E==="y"?Cn.clientTop||0:Cn.clientLeft||0:0,Cr=(we=$e==null?void 0:$e[E])!=null?we:0,ht=Re+rn-Cr-sr,zn=Re+Ln-Cr,Zr=wo(y?ml(Me,ht):Me,Re,y?_i(Se,zn):Se);$[E]=Zr,Pe[E]=Zr-Re}if(u){var wt,Qr=E==="x"?zt:$t,Fi=E==="x"?Dn:xn,Ct=$[q],Xe=q==="y"?"height":"width",En=Ct+_[Qr],sn=Ct-_[Fi],ei=[zt,$t].indexOf(O)!==-1,$n=(wt=$e==null?void 0:$e[q])!=null?wt:0,Ni=ei?En:Ct-K[Xe]-H[Xe]-$n+Ee.altAxis,Hn=ei?Ct+K[Xe]+H[Xe]-$n-Ee.altAxis:sn,An=y&&ei?w2(Ni,Ct,Hn):wo(y?Ni:En,Ct,y?Hn:sn);$[q]=An,Pe[q]=An-Ct}e.modifiersData[r]=Pe}}const Q2={name:"preventOverflow",enabled:!0,phase:"main",fn:Z2,requiresIfExists:["offset"]};function eO(n){return{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}}function tO(n){return n===Pn(n)||!yn(n)?Pf(n):eO(n)}function nO(n){var e=n.getBoundingClientRect(),t=As(e.width)/n.offsetWidth||1,r=As(e.height)/n.offsetHeight||1;return t!==1||r!==1}function rO(n,e,t){t===void 0&&(t=!1);var r=yn(e),i=yn(e)&&nO(e),o=Xr(e),a=_s(n,i),u={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(r||!r&&!t)&&((nr(e)!=="body"||zf(o))&&(u=tO(e)),yn(e)?(c=_s(e,!0),c.x+=e.clientLeft,c.y+=e.clientTop):o&&(c.x=Lf(o))),{x:a.left+u.scrollLeft-c.x,y:a.top+u.scrollTop-c.y,width:a.width,height:a.height}}function iO(n){var e=new Map,t=new Set,r=[];n.forEach(function(o){e.set(o.name,o)});function i(o){t.add(o.name);var a=[].concat(o.requires||[],o.requiresIfExists||[]);a.forEach(function(u){if(!t.has(u)){var c=e.get(u);c&&i(c)}}),r.push(o)}return n.forEach(function(o){t.has(o.name)||i(o)}),r}function sO(n){var e=iO(n);return v2.reduce(function(t,r){return t.concat(e.filter(function(i){return i.phase===r}))},[])}function oO(n){var e;return function(){return e||(e=new Promise(function(t){Promise.resolve().then(function(){e=void 0,t(n())})})),e}}function aO(n){var e=n.reduce(function(t,r){var i=t[r.name];return t[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,t},{});return Object.keys(e).map(function(t){return e[t]})}var Nm={placement:"bottom",modifiers:[],strategy:"absolute"};function Rm(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function lO(n){n===void 0&&(n={});var e=n,t=e.defaultModifiers,r=t===void 0?[]:t,i=e.defaultOptions,o=i===void 0?Nm:i;return function(u,c,h){h===void 0&&(h=o);var d={placement:"bottom",orderedModifiers:[],options:Object.assign({},Nm,o),modifiersData:{},elements:{reference:u,popper:c},attributes:{},styles:{}},m=[],g=!1,y={state:d,setOptions:function(O){var P=typeof O=="function"?O(d.options):O;w(),d.options=Object.assign({},o,d.options,P),d.scrollParents={reference:Es(u)?Co(u):u.contextElement?Co(u.contextElement):[],popper:Co(c)};var z=sO(aO([].concat(r,d.options.modifiers)));return d.orderedModifiers=z.filter(function(E){return E.enabled}),x(),y.update()},forceUpdate:function(){if(!g){var O=d.elements,P=O.reference,z=O.popper;if(!!Rm(P,z)){d.rects={reference:rO(P,Io(z),d.options.strategy==="fixed"),popper:Bf(z)},d.reset=!1,d.placement=d.options.placement,d.orderedModifiers.forEach(function(Ee){return d.modifiersData[Ee.name]=Object.assign({},Ee.data)});for(var E=0;E<d.orderedModifiers.length;E++){if(d.reset===!0){d.reset=!1,E=-1;continue}var q=d.orderedModifiers[E],$=q.fn,K=q.options,H=K===void 0?{}:K,fe=q.name;typeof $=="function"&&(d=$({state:d,options:H,name:fe,instance:y})||d)}}}},update:oO(function(){return new Promise(function(_){y.forceUpdate(),_(d)})}),destroy:function(){w(),g=!0}};if(!Rm(u,c))return y;y.setOptions(h).then(function(_){!g&&h.onFirstUpdate&&h.onFirstUpdate(_)});function x(){d.orderedModifiers.forEach(function(_){var O=_.name,P=_.options,z=P===void 0?{}:P,E=_.effect;if(typeof E=="function"){var q=E({state:d,name:O,instance:y,options:z}),$=function(){};m.push(q||$)}})}function w(){m.forEach(function(_){return _()}),m=[]}return y}}var uO=[F2,Y2,T2,N0,J2,W2,Q2,_2,q2],cO=lO({defaultModifiers:uO}),fO="tippy-box",$0="tippy-content",dO="tippy-backdrop",H0="tippy-arrow",V0="tippy-svg-arrow",di={passive:!0,capture:!0},W0=function(){return document.body};function xc(n,e,t){if(Array.isArray(n)){var r=n[e];return r==null?Array.isArray(t)?t[e]:t:r}return n}function $f(n,e){var t={}.toString.call(n);return t.indexOf("[object")===0&&t.indexOf(e+"]")>-1}function U0(n,e){return typeof n=="function"?n.apply(void 0,e):n}function Bm(n,e){if(e===0)return n;var t;return function(r){clearTimeout(t),t=setTimeout(function(){n(r)},e)}}function hO(n){return n.split(/\s+/).filter(Boolean)}function es(n){return[].concat(n)}function Im(n,e){n.indexOf(e)===-1&&n.push(e)}function pO(n){return n.filter(function(e,t){return n.indexOf(e)===t})}function mO(n){return n.split("-")[0]}function gl(n){return[].slice.call(n)}function Pm(n){return Object.keys(n).reduce(function(e,t){return n[t]!==void 0&&(e[t]=n[t]),e},{})}function Eo(){return document.createElement("div")}function Nl(n){return["Element","Fragment"].some(function(e){return $f(n,e)})}function gO(n){return $f(n,"NodeList")}function vO(n){return $f(n,"MouseEvent")}function yO(n){return!!(n&&n._tippy&&n._tippy.reference===n)}function bO(n){return Nl(n)?[n]:gO(n)?gl(n):Array.isArray(n)?n:gl(document.querySelectorAll(n))}function wc(n,e){n.forEach(function(t){t&&(t.style.transitionDuration=e+"ms")})}function Lm(n,e){n.forEach(function(t){t&&t.setAttribute("data-state",e)})}function DO(n){var e,t=es(n),r=t[0];return r!=null&&(e=r.ownerDocument)!=null&&e.body?r.ownerDocument:document}function xO(n,e){var t=e.clientX,r=e.clientY;return n.every(function(i){var o=i.popperRect,a=i.popperState,u=i.props,c=u.interactiveBorder,h=mO(a.placement),d=a.modifiersData.offset;if(!d)return!0;var m=h==="bottom"?d.top.y:0,g=h==="top"?d.bottom.y:0,y=h==="right"?d.left.x:0,x=h==="left"?d.right.x:0,w=o.top-r+m>c,_=r-o.bottom-g>c,O=o.left-t+y>c,P=t-o.right-x>c;return w||_||O||P})}function Cc(n,e,t){var r=e+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(i){n[r](i,t)})}function zm(n,e){for(var t=e;t;){var r;if(n.contains(t))return!0;t=t.getRootNode==null||(r=t.getRootNode())==null?void 0:r.host}return!1}var Kn={isTouch:!1},$m=0;function wO(){Kn.isTouch||(Kn.isTouch=!0,window.performance&&document.addEventListener("mousemove",q0))}function q0(){var n=performance.now();n-$m<20&&(Kn.isTouch=!1,document.removeEventListener("mousemove",q0)),$m=n}function CO(){var n=document.activeElement;if(yO(n)){var e=n._tippy;n.blur&&!e.state.isVisible&&n.blur()}}function EO(){document.addEventListener("touchstart",wO,di),window.addEventListener("blur",CO)}var AO=typeof window<"u"&&typeof document<"u",_O=AO?!!window.msCrypto:!1,SO={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},kO={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},Nn=Object.assign({appendTo:W0,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},SO,kO),OO=Object.keys(Nn),TO=function(e){var t=Object.keys(e);t.forEach(function(r){Nn[r]=e[r]})};function K0(n){var e=n.plugins||[],t=e.reduce(function(r,i){var o=i.name,a=i.defaultValue;if(o){var u;r[o]=n[o]!==void 0?n[o]:(u=Nn[o])!=null?u:a}return r},{});return Object.assign({},n,t)}function MO(n,e){var t=e?Object.keys(K0(Object.assign({},Nn,{plugins:e}))):OO,r=t.reduce(function(i,o){var a=(n.getAttribute("data-tippy-"+o)||"").trim();if(!a)return i;if(o==="content")i[o]=a;else try{i[o]=JSON.parse(a)}catch{i[o]=a}return i},{});return r}function Hm(n,e){var t=Object.assign({},e,{content:U0(e.content,[n])},e.ignoreAttributes?{}:MO(n,e.plugins));return t.aria=Object.assign({},Nn.aria,t.aria),t.aria={expanded:t.aria.expanded==="auto"?e.interactive:t.aria.expanded,content:t.aria.content==="auto"?e.interactive?null:"describedby":t.aria.content},t}var FO=function(){return"innerHTML"};function Yc(n,e){n[FO()]=e}function Vm(n){var e=Eo();return n===!0?e.className=H0:(e.className=V0,Nl(n)?e.appendChild(n):Yc(e,n)),e}function Wm(n,e){Nl(e.content)?(Yc(n,""),n.appendChild(e.content)):typeof e.content!="function"&&(e.allowHTML?Yc(n,e.content):n.textContent=e.content)}function Xc(n){var e=n.firstElementChild,t=gl(e.children);return{box:e,content:t.find(function(r){return r.classList.contains($0)}),arrow:t.find(function(r){return r.classList.contains(H0)||r.classList.contains(V0)}),backdrop:t.find(function(r){return r.classList.contains(dO)})}}function j0(n){var e=Eo(),t=Eo();t.className=fO,t.setAttribute("data-state","hidden"),t.setAttribute("tabindex","-1");var r=Eo();r.className=$0,r.setAttribute("data-state","hidden"),Wm(r,n.props),e.appendChild(t),t.appendChild(r),i(n.props,n.props);function i(o,a){var u=Xc(e),c=u.box,h=u.content,d=u.arrow;a.theme?c.setAttribute("data-theme",a.theme):c.removeAttribute("data-theme"),typeof a.animation=="string"?c.setAttribute("data-animation",a.animation):c.removeAttribute("data-animation"),a.inertia?c.setAttribute("data-inertia",""):c.removeAttribute("data-inertia"),c.style.maxWidth=typeof a.maxWidth=="number"?a.maxWidth+"px":a.maxWidth,a.role?c.setAttribute("role",a.role):c.removeAttribute("role"),(o.content!==a.content||o.allowHTML!==a.allowHTML)&&Wm(h,n.props),a.arrow?d?o.arrow!==a.arrow&&(c.removeChild(d),c.appendChild(Vm(a.arrow))):c.appendChild(Vm(a.arrow)):d&&c.removeChild(d)}return{popper:e,onUpdate:i}}j0.$$tippy=!0;var NO=1,Ta=[],Ec=[];function RO(n,e){var t=Hm(n,Object.assign({},Nn,K0(Pm(e)))),r,i,o,a=!1,u=!1,c=!1,h=!1,d,m,g,y=[],x=Bm(ht,t.interactiveDebounce),w,_=NO++,O=null,P=pO(t.plugins),z={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},E={id:_,reference:n,popper:Eo(),popperInstance:O,props:t,state:z,plugins:P,clearDelayTimeouts:Ni,setProps:Hn,setContent:An,show:Ms,hide:Fs,hideWithInteractivity:Ns,enable:ei,disable:$n,unmount:Rs,destroy:Bs};if(!t.render)return E;var q=t.render(E),$=q.popper,K=q.onUpdate;$.setAttribute("data-tippy-root",""),$.id="tippy-"+E.id,E.popper=$,n._tippy=E,$._tippy=E;var H=P.map(function(F){return F.fn(E)}),fe=n.hasAttribute("aria-expanded");return Cn(),Ce(),Re(),Me("onCreate",[E]),t.showOnCreate&&En(),$.addEventListener("mouseenter",function(){E.props.interactive&&E.state.isVisible&&E.clearDelayTimeouts()}),$.addEventListener("mouseleave",function(){E.props.interactive&&E.props.trigger.indexOf("mouseenter")>=0&&Ze().addEventListener("mousemove",x)}),E;function Ee(){var F=E.props.touch;return Array.isArray(F)?F:[F,0]}function $e(){return Ee()[0]==="hold"}function Pe(){var F;return!!((F=E.props.render)!=null&&F.$$tippy)}function we(){return w||n}function Ze(){var F=we().parentNode;return F?DO(F):document}function Ke(){return Xc($)}function Le(F){return E.state.isMounted&&!E.state.isVisible||Kn.isTouch||d&&d.type==="focus"?0:xc(E.props.delay,F?0:1,Nn.delay)}function Re(F){F===void 0&&(F=!1),$.style.pointerEvents=E.props.interactive&&!F?"":"none",$.style.zIndex=""+E.props.zIndex}function Me(F,J,te){if(te===void 0&&(te=!0),H.forEach(function(ge){ge[F]&&ge[F].apply(ge,J)}),te){var De;(De=E.props)[F].apply(De,J)}}function Se(){var F=E.props.aria;if(!!F.content){var J="aria-"+F.content,te=$.id,De=es(E.props.triggerTarget||n);De.forEach(function(ge){var ot=ge.getAttribute(J);if(E.state.isVisible)ge.setAttribute(J,ot?ot+" "+te:te);else{var Mt=ot&&ot.replace(te,"").trim();Mt?ge.setAttribute(J,Mt):ge.removeAttribute(J)}})}}function Ce(){if(!(fe||!E.props.aria.expanded)){var F=es(E.props.triggerTarget||n);F.forEach(function(J){E.props.interactive?J.setAttribute("aria-expanded",E.state.isVisible&&J===we()?"true":"false"):J.removeAttribute("aria-expanded")})}}function Ve(){Ze().removeEventListener("mousemove",x),Ta=Ta.filter(function(F){return F!==x})}function nn(F){if(!(Kn.isTouch&&(c||F.type==="mousedown"))){var J=F.composedPath&&F.composedPath()[0]||F.target;if(!(E.props.interactive&&zm($,J))){if(es(E.props.triggerTarget||n).some(function(te){return zm(te,J)})){if(Kn.isTouch||E.state.isVisible&&E.props.trigger.indexOf("click")>=0)return}else Me("onClickOutside",[E,F]);E.props.hideOnClick===!0&&(E.clearDelayTimeouts(),E.hide(),u=!0,setTimeout(function(){u=!1}),E.state.isMounted||Tt())}}}function ir(){c=!0}function wn(){c=!1}function tt(){var F=Ze();F.addEventListener("mousedown",nn,!0),F.addEventListener("touchend",nn,di),F.addEventListener("touchstart",wn,di),F.addEventListener("touchmove",ir,di)}function Tt(){var F=Ze();F.removeEventListener("mousedown",nn,!0),F.removeEventListener("touchend",nn,di),F.removeEventListener("touchstart",wn,di),F.removeEventListener("touchmove",ir,di)}function wr(F,J){rn(F,function(){!E.state.isVisible&&$.parentNode&&$.parentNode.contains($)&&J()})}function xt(F,J){rn(F,J)}function rn(F,J){var te=Ke().box;function De(ge){ge.target===te&&(Cc(te,"remove",De),J())}if(F===0)return J();Cc(te,"remove",m),Cc(te,"add",De),m=De}function Ln(F,J,te){te===void 0&&(te=!1);var De=es(E.props.triggerTarget||n);De.forEach(function(ge){ge.addEventListener(F,J,te),y.push({node:ge,eventType:F,handler:J,options:te})})}function Cn(){$e()&&(Ln("touchstart",Cr,{passive:!0}),Ln("touchend",zn,{passive:!0})),hO(E.props.trigger).forEach(function(F){if(F!=="manual")switch(Ln(F,Cr),F){case"mouseenter":Ln("mouseleave",zn);break;case"focus":Ln(_O?"focusout":"blur",Zr);break;case"focusin":Ln("focusout",Zr);break}})}function sr(){y.forEach(function(F){var J=F.node,te=F.eventType,De=F.handler,ge=F.options;J.removeEventListener(te,De,ge)}),y=[]}function Cr(F){var J,te=!1;if(!(!E.state.isEnabled||wt(F)||u)){var De=((J=d)==null?void 0:J.type)==="focus";d=F,w=F.currentTarget,Ce(),!E.state.isVisible&&vO(F)&&Ta.forEach(function(ge){return ge(F)}),F.type==="click"&&(E.props.trigger.indexOf("mouseenter")<0||a)&&E.props.hideOnClick!==!1&&E.state.isVisible?te=!0:En(F),F.type==="click"&&(a=!te),te&&!De&&sn(F)}}function ht(F){var J=F.target,te=we().contains(J)||$.contains(J);if(!(F.type==="mousemove"&&te)){var De=Xe().concat($).map(function(ge){var ot,Mt=ge._tippy,or=(ot=Mt.popperInstance)==null?void 0:ot.state;return or?{popperRect:ge.getBoundingClientRect(),popperState:or,props:t}:null}).filter(Boolean);xO(De,F)&&(Ve(),sn(F))}}function zn(F){var J=wt(F)||E.props.trigger.indexOf("click")>=0&&a;if(!J){if(E.props.interactive){E.hideWithInteractivity(F);return}sn(F)}}function Zr(F){E.props.trigger.indexOf("focusin")<0&&F.target!==we()||E.props.interactive&&F.relatedTarget&&$.contains(F.relatedTarget)||sn(F)}function wt(F){return Kn.isTouch?$e()!==F.type.indexOf("touch")>=0:!1}function Qr(){Fi();var F=E.props,J=F.popperOptions,te=F.placement,De=F.offset,ge=F.getReferenceClientRect,ot=F.moveTransition,Mt=Pe()?Xc($).arrow:null,or=ge?{getBoundingClientRect:ge,contextElement:ge.contextElement||we()}:n,Is={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(Ri){var Er=Ri.state;if(Pe()){var Po=Ke(),Ls=Po.box;["placement","reference-hidden","escaped"].forEach(function(Bi){Bi==="placement"?Ls.setAttribute("data-placement",Er.placement):Er.attributes.popper["data-popper-"+Bi]?Ls.setAttribute("data-"+Bi,""):Ls.removeAttribute("data-"+Bi)}),Er.attributes.popper={}}}},ar=[{name:"offset",options:{offset:De}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!ot}},Is];Pe()&&Mt&&ar.push({name:"arrow",options:{element:Mt,padding:3}}),ar.push.apply(ar,(J==null?void 0:J.modifiers)||[]),E.popperInstance=cO(or,$,Object.assign({},J,{placement:te,onFirstUpdate:g,modifiers:ar}))}function Fi(){E.popperInstance&&(E.popperInstance.destroy(),E.popperInstance=null)}function Ct(){var F=E.props.appendTo,J,te=we();E.props.interactive&&F===W0||F==="parent"?J=te.parentNode:J=U0(F,[te]),J.contains($)||J.appendChild($),E.state.isMounted=!0,Qr()}function Xe(){return gl($.querySelectorAll("[data-tippy-root]"))}function En(F){E.clearDelayTimeouts(),F&&Me("onTrigger",[E,F]),tt();var J=Le(!0),te=Ee(),De=te[0],ge=te[1];Kn.isTouch&&De==="hold"&&ge&&(J=ge),J?r=setTimeout(function(){E.show()},J):E.show()}function sn(F){if(E.clearDelayTimeouts(),Me("onUntrigger",[E,F]),!E.state.isVisible){Tt();return}if(!(E.props.trigger.indexOf("mouseenter")>=0&&E.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(F.type)>=0&&a)){var J=Le(!1);J?i=setTimeout(function(){E.state.isVisible&&E.hide()},J):o=requestAnimationFrame(function(){E.hide()})}}function ei(){E.state.isEnabled=!0}function $n(){E.hide(),E.state.isEnabled=!1}function Ni(){clearTimeout(r),clearTimeout(i),cancelAnimationFrame(o)}function Hn(F){if(!E.state.isDestroyed){Me("onBeforeUpdate",[E,F]),sr();var J=E.props,te=Hm(n,Object.assign({},J,Pm(F),{ignoreAttributes:!0}));E.props=te,Cn(),J.interactiveDebounce!==te.interactiveDebounce&&(Ve(),x=Bm(ht,te.interactiveDebounce)),J.triggerTarget&&!te.triggerTarget?es(J.triggerTarget).forEach(function(De){De.removeAttribute("aria-expanded")}):te.triggerTarget&&n.removeAttribute("aria-expanded"),Ce(),Re(),K&&K(J,te),E.popperInstance&&(Qr(),Xe().forEach(function(De){requestAnimationFrame(De._tippy.popperInstance.forceUpdate)})),Me("onAfterUpdate",[E,F])}}function An(F){E.setProps({content:F})}function Ms(){var F=E.state.isVisible,J=E.state.isDestroyed,te=!E.state.isEnabled,De=Kn.isTouch&&!E.props.touch,ge=xc(E.props.duration,0,Nn.duration);if(!(F||J||te||De)&&!we().hasAttribute("disabled")&&(Me("onShow",[E],!1),E.props.onShow(E)!==!1)){if(E.state.isVisible=!0,Pe()&&($.style.visibility="visible"),Re(),tt(),E.state.isMounted||($.style.transition="none"),Pe()){var ot=Ke(),Mt=ot.box,or=ot.content;wc([Mt,or],0)}g=function(){var ar;if(!(!E.state.isVisible||h)){if(h=!0,$.offsetHeight,$.style.transition=E.props.moveTransition,Pe()&&E.props.animation){var Ps=Ke(),Ri=Ps.box,Er=Ps.content;wc([Ri,Er],ge),Lm([Ri,Er],"visible")}Se(),Ce(),Im(Ec,E),(ar=E.popperInstance)==null||ar.forceUpdate(),Me("onMount",[E]),E.props.animation&&Pe()&&xt(ge,function(){E.state.isShown=!0,Me("onShown",[E])})}},Ct()}}function Fs(){var F=!E.state.isVisible,J=E.state.isDestroyed,te=!E.state.isEnabled,De=xc(E.props.duration,1,Nn.duration);if(!(F||J||te)&&(Me("onHide",[E],!1),E.props.onHide(E)!==!1)){if(E.state.isVisible=!1,E.state.isShown=!1,h=!1,a=!1,Pe()&&($.style.visibility="hidden"),Ve(),Tt(),Re(!0),Pe()){var ge=Ke(),ot=ge.box,Mt=ge.content;E.props.animation&&(wc([ot,Mt],De),Lm([ot,Mt],"hidden"))}Se(),Ce(),E.props.animation?Pe()&&wr(De,E.unmount):E.unmount()}}function Ns(F){Ze().addEventListener("mousemove",x),Im(Ta,x),x(F)}function Rs(){E.state.isVisible&&E.hide(),E.state.isMounted&&(Fi(),Xe().forEach(function(F){F._tippy.unmount()}),$.parentNode&&$.parentNode.removeChild($),Ec=Ec.filter(function(F){return F!==E}),E.state.isMounted=!1,Me("onHidden",[E]))}function Bs(){E.state.isDestroyed||(E.clearDelayTimeouts(),E.unmount(),sr(),delete n._tippy,E.state.isDestroyed=!0,Me("onDestroy",[E]))}}function Ts(n,e){e===void 0&&(e={});var t=Nn.plugins.concat(e.plugins||[]);EO();var r=Object.assign({},e,{plugins:t}),i=bO(n),o=i.reduce(function(a,u){var c=u&&RO(u,r);return c&&a.push(c),a},[]);return Nl(n)?o[0]:o}Ts.defaultProps=Nn;Ts.setDefaultProps=TO;Ts.currentInput=Kn;Object.assign({},N0,{effect:function(e){var t=e.state,r={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(t.elements.popper.style,r.popper),t.styles=r,t.elements.arrow&&Object.assign(t.elements.arrow.style,r.arrow)}});Ts.setDefaultProps({render:j0});class BO{constructor({editor:e,element:t,view:r,tippyOptions:i={},shouldShow:o}){this.preventHide=!1,this.shouldShow=({view:a,state:u,from:c,to:h})=>{const{doc:d,selection:m}=u,{empty:g}=m,y=!d.textBetween(c,h).length&&D0(u.selection);return!(!a.hasFocus()||g||y)},this.mousedownHandler=()=>{this.preventHide=!0},this.dragstartHandler=()=>{this.hide()},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:a})=>{var u;if(this.preventHide){this.preventHide=!1;return}(a==null?void 0:a.relatedTarget)&&((u=this.element.parentNode)===null||u===void 0?void 0:u.contains(a.relatedTarget))||this.hide()},this.editor=e,this.element=t,this.view=r,o&&(this.shouldShow=o),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.addEventListener("dragstart",this.dragstartHandler),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.tippyOptions=i,this.element.remove(),this.element.style.visibility="visible"}createTooltip(){const{element:e}=this.editor.options,t=!!e.parentElement;this.tippy||!t||(this.tippy=Ts(e,{duration:0,getReferenceClientRect:null,content:this.element,interactive:!0,trigger:"manual",placement:"top",hideOnClick:"toggle",...this.tippyOptions}),this.tippy.popper.firstChild&&this.tippy.popper.firstChild.addEventListener("blur",r=>{this.blurHandler({event:r})}))}update(e,t){var r,i,o;const{state:a,composing:u}=e,{doc:c,selection:h}=a,d=t&&t.doc.eq(c)&&t.selection.eq(h);if(u||d)return;this.createTooltip();const{ranges:m}=h,g=Math.min(...m.map(w=>w.$from.pos)),y=Math.max(...m.map(w=>w.$to.pos));if(!((r=this.shouldShow)===null||r===void 0?void 0:r.call(this,{editor:this.editor,view:e,state:a,oldState:t,from:g,to:y}))){this.hide();return}(i=this.tippy)===null||i===void 0||i.setProps({getReferenceClientRect:((o=this.tippyOptions)===null||o===void 0?void 0:o.getReferenceClientRect)||(()=>{if(Lk(a.selection)){const w=e.nodeDOM(g);if(w)return w.getBoundingClientRect()}return _0(e,g,y)})}),this.show()}show(){var e;(e=this.tippy)===null||e===void 0||e.show()}hide(){var e;(e=this.tippy)===null||e===void 0||e.hide()}destroy(){var e;(e=this.tippy)===null||e===void 0||e.destroy(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.removeEventListener("dragstart",this.dragstartHandler),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler)}}const J0=n=>new tn({key:typeof n.pluginKey=="string"?new rr(n.pluginKey):n.pluginKey,view:e=>new BO({view:e,...n})});In.create({name:"bubbleMenu",addOptions(){return{element:null,tippyOptions:{},pluginKey:"bubbleMenu",shouldShow:null}},addProseMirrorPlugins(){return this.options.element?[J0({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,tippyOptions:this.options.tippyOptions,shouldShow:this.options.shouldShow})]:[]}});class IO{constructor({editor:e,element:t,view:r,tippyOptions:i={},shouldShow:o}){this.preventHide=!1,this.shouldShow=({view:a,state:u})=>{const{selection:c}=u,{$anchor:h,empty:d}=c,m=h.depth===1,g=h.parent.isTextblock&&!h.parent.type.spec.code&&!h.parent.textContent;return!(!a.hasFocus()||!d||!m||!g)},this.mousedownHandler=()=>{this.preventHide=!0},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:a})=>{var u;if(this.preventHide){this.preventHide=!1;return}(a==null?void 0:a.relatedTarget)&&((u=this.element.parentNode)===null||u===void 0?void 0:u.contains(a.relatedTarget))||this.hide()},this.editor=e,this.element=t,this.view=r,o&&(this.shouldShow=o),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.tippyOptions=i,this.element.remove(),this.element.style.visibility="visible"}createTooltip(){const{element:e}=this.editor.options,t=!!e.parentElement;this.tippy||!t||(this.tippy=Ts(e,{duration:0,getReferenceClientRect:null,content:this.element,interactive:!0,trigger:"manual",placement:"right",hideOnClick:"toggle",...this.tippyOptions}),this.tippy.popper.firstChild&&this.tippy.popper.firstChild.addEventListener("blur",r=>{this.blurHandler({event:r})}))}update(e,t){var r,i,o;const{state:a}=e,{doc:u,selection:c}=a,{from:h,to:d}=c;if(t&&t.doc.eq(u)&&t.selection.eq(c))return;if(this.createTooltip(),!((r=this.shouldShow)===null||r===void 0?void 0:r.call(this,{editor:this.editor,view:e,state:a,oldState:t}))){this.hide();return}(i=this.tippy)===null||i===void 0||i.setProps({getReferenceClientRect:((o=this.tippyOptions)===null||o===void 0?void 0:o.getReferenceClientRect)||(()=>_0(e,h,d))}),this.show()}show(){var e;(e=this.tippy)===null||e===void 0||e.show()}hide(){var e;(e=this.tippy)===null||e===void 0||e.hide()}destroy(){var e;(e=this.tippy)===null||e===void 0||e.destroy(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler)}}const G0=n=>new tn({key:typeof n.pluginKey=="string"?new rr(n.pluginKey):n.pluginKey,view:e=>new IO({view:e,...n})});In.create({name:"floatingMenu",addOptions(){return{element:null,tippyOptions:{},pluginKey:"floatingMenu",shouldShow:null}},addProseMirrorPlugins(){return this.options.element?[G0({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,tippyOptions:this.options.tippyOptions,shouldShow:this.options.shouldShow})]:[]}});Fo({name:"BubbleMenu",props:{pluginKey:{type:null,default:"bubbleMenu"},editor:{type:Object,required:!0},tippyOptions:{type:Object,default:()=>({})},shouldShow:{type:Function,default:null}},setup(n,{slots:e}){const t=ct(null);return No(()=>{const{pluginKey:r,editor:i,tippyOptions:o,shouldShow:a}=n;i.registerPlugin(J0({pluginKey:r,editor:i,element:t.value,tippyOptions:o,shouldShow:a}))}),Dl(()=>{const{pluginKey:r,editor:i}=n;i.unregisterPlugin(r)}),()=>{var r;return xi("div",{ref:t},(r=e.default)===null||r===void 0?void 0:r.call(e))}}});function Um(n){return UC((e,t)=>({get(){return e(),n},set(r){n=r,requestAnimationFrame(()=>{requestAnimationFrame(()=>{t()})})}}))}class PO extends Fk{constructor(e={}){return super(e),this.vueRenderers=HC(new Map),this.contentComponent=null,this.reactiveState=Um(this.view.state),this.reactiveExtensionStorage=Um(this.extensionStorage),this.on("transaction",()=>{this.reactiveState.value=this.view.state,this.reactiveExtensionStorage.value=this.extensionStorage}),VC(this)}get state(){return this.reactiveState?this.reactiveState.value:this.view.state}get storage(){return this.reactiveExtensionStorage?this.reactiveExtensionStorage.value:super.storage}registerPlugin(e,t){super.registerPlugin(e,t),this.reactiveState.value=this.view.state}unregisterPlugin(e){super.unregisterPlugin(e),this.reactiveState.value=this.view.state}}const LO=Fo({name:"EditorContent",props:{editor:{default:null,type:Object}},setup(n){const e=ct(),t=WC();return LC(()=>{const r=n.editor;r&&r.options.element&&e.value&&rf(()=>{if(!e.value||!r.options.element.firstChild)return;const i=Ne(e.value);e.value.append(...r.options.element.childNodes),r.contentComponent=t.ctx._,r.setOptions({element:i}),r.createNodeViews()})}),Dl(()=>{const r=n.editor;if(!r||(r.isDestroyed||r.view.setProps({nodeViews:{}}),r.contentComponent=null,!r.options.element.firstChild))return;const i=document.createElement("div");i.append(...r.options.element.childNodes),r.setOptions({element:i})}),{rootEl:e}},render(){const n=[];return this.editor&&this.editor.vueRenderers.forEach(e=>{const t=xi(zC,{to:e.teleportElement,key:e.id},xi(e.component,{ref:e.id,...e.props}));n.push(t)}),xi("div",{ref:e=>{this.rootEl=e}},...n)}});Fo({name:"FloatingMenu",props:{pluginKey:{type:null,default:"floatingMenu"},editor:{type:Object,required:!0},tippyOptions:{type:Object,default:()=>({})},shouldShow:{type:Function,default:null}},setup(n,{slots:e}){const t=ct(null);return No(()=>{const{pluginKey:r,editor:i,tippyOptions:o,shouldShow:a}=n;i.registerPlugin(G0({pluginKey:r,editor:i,element:t.value,tippyOptions:o,shouldShow:a}))}),Dl(()=>{const{pluginKey:r,editor:i}=n;i.unregisterPlugin(r)}),()=>{var r;return xi("div",{ref:t},(r=e.default)===null||r===void 0?void 0:r.call(e))}}});Fo({props:{as:{type:String,default:"div"}},render(){return xi(this.as,{style:{whiteSpace:"pre-wrap"},"data-node-view-content":""})}});Fo({props:{as:{type:String,default:"div"}},inject:["onDragStart","decorationClasses"],render(){var n,e;return xi(this.as,{class:this.decorationClasses.value,style:{whiteSpace:"normal"},"data-node-view-wrapper":"",onDragstart:this.onDragStart},(e=(n=this.$slots).default)===null||e===void 0?void 0:e.call(n))}});const zO=(n={})=>{const e=$C();return No(()=>{e.value=new PO(n)}),Dl(()=>{var t;(t=e.value)===null||t===void 0||t.destroy()}),e},$O={},HO={class:"flex flex-wrap items-end",role:"tablist"};function VO(n,e){return V(),Z("div",HO,[Ur(n.$slots,"default")])}const dN=ks($O,[["render",VO]]),WO=["aria-selected"],hN={__name:"Tab",props:{active:{type:Boolean,default:!1}},setup(n){return(e,t)=>(V(),Z("button",{type:"button",role:"tab","aria-selected":n.active?"true":"false",class:Dt([{"border-indigo-500 text-indigo-500":n.active,"hover:text-indigo-500":!n.active},"flex items-center border-b-2 border-gray-200 pb-2 mr-5 last:mr-0 font-medium transition-colors ease-in-out duration-200"])},[Ur(e.$slots,"default")],10,WO))}},pN={__name:"VerticallyScrollableContent",props:{maxHeight:{type:String,default:"xl"}},setup(n){const e=n,t=bn(()=>({md:"max-h-64",lg:"max-h-72",xl:"max-h-96"})[e.maxHeight]);return(r,i)=>(V(),Z("div",{class:Dt([Ne(t),"overflow-y-auto"])},[Ur(r.$slots,"default")],2))}},UO=["type"],mN={__name:"PureButton",props:{type:{type:String,default:"button"}},setup(n){return(e,t)=>(V(),Z("button",{type:n.type,class:"relative inline-flex items-center text-gray-400 hover:text-indigo-500 transition-colors ease-in-out duration-200"},[Ur(e.$slots,"default")],8,UO))}};function gN(){let n=Math.max(document.body.scrollWidth,document.documentElement.scrollWidth,document.body.offsetWidth,document.documentElement.offsetWidth,document.documentElement.clientWidth),e=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.documentElement.clientHeight);return{width:n,height:e}}function qm(n){let e,t,r,i;return n.match(/^rgb/)?(n=n.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/),e=n[1],t=n[2],r=n[3]):(n=+("0x"+n.slice(1).replace(n.length<5&&/./g,"$&$&")),e=n>>16,t=n>>8&255,r=n&255),i=Math.sqrt(.299*(e*e)+.587*(t*t)+.114*(r*r)),i>127.5?"light":"dark"}function vN(n){return n.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}function qO(n,e){return typeof n=="string"?new Date(new Date(n).toLocaleString("en-US",{timeZone:e})):new Date(n.toLocaleString("en-US",{timeZone:e}))}function yN(n,e=null){const t=e?qO(new Date,e):new Date;return n.getTime()<t.getTime()}function bN(n){const[e,t]=n.split(" ");let[r,i]=e.split(":");return r==="12"&&(r="00"),t==="PM"&&(r=parseInt(r,10)+12),`${r}:${i}`}const KO={},jO={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"w-6 h-6"},JO=M("path",{d:"M4.5 4.5a3 3 0 00-3 3v9a3 3 0 003 3h8.25a3 3 0 003-3v-9a3 3 0 00-3-3H4.5zM19.94 18.75l-2.69-2.69V7.94l2.69-2.69c.944-.945 2.56-.276 2.56 1.06v11.38c0 1.336-1.616 2.005-2.56 1.06z"},null,-1),GO=[JO];function YO(n,e){return V(),Z("svg",jO,GO)}const XO=ks(KO,[["render",YO]]),ZO={class:"relative"},QO={key:0,class:"absolute top-0 right-0 mt-1 mr-1"},eT={key:1,class:"text-center"},tT={class:"mt-xs text-red-500"},nT=["src"],DN={__name:"MediaFile",props:{media:{type:Object,required:!0},imgHeight:{type:String,default:"full"}},setup(n){const e=n,t=bn(()=>({full:"h-full",sm:"h-20"})[e.imgHeight]),r=i=>kc.exports.startsWith(i,"video");return(i,o)=>(V(),Z("figure",ZO,[M("div",{class:Dt(["relative flex rounded",{"border border-red-500 p-5":n.media.hasOwnProperty("error")}])},[r(n.media.mime_type)?(V(),Z("span",QO,[ue(XO,{class:"!w-4 !h-4 text-white"})])):Oe("",!0),n.media.hasOwnProperty("error")?(V(),Z("div",eT,[ue(XC,{class:"w-8 h-8 mx-auto text-red-500"}),M("div",tT,vn(n.media.error?n.media.error:"Error uploading file!"),1)])):Oe("",!0),n.media.thumb_url?(V(),Z("img",{key:2,src:n.media.thumb_url,alt:"Image",class:Dt(["w-full object-cover rounded",Ne(t)])},null,10,nT)):Oe("",!0)],2)]))}},rT=M("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),iT=M("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1),sT=[rT,iT],oT={__name:"Preloader",props:{size:{type:String,default:"md"},opacity:{type:Number,default:100}},setup(n){const e=n,t=bn(()=>({sm:"h-4 w-4",md:"h-6 w-6",lg:"h-8 w-8",xl:"h-10 w-10"})[e.size]),r=bn(()=>({100:"bg-opacity-100",75:"bg-opacity-75",50:"bg-opacity-50"})[e.opacity]);return(i,o)=>(V(),Z("div",{class:Dt([Ne(r),"absolute flex justify-center items-center left-0 top-0 w-full h-full bg-white transition-opacity ease-in-out duration-200 z-10"])},[(V(),Z("svg",{class:Dt([Ne(t),"animate-spin -ml-1 mr-sm text-indigo-500"]),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},sT,2))],2))}},Km={"slate-400":"#94a3b8","stone-400":"#a8a29e","gray-900":"#111827","red-500":"#ef4444","red-600":"#e11923","orange-400":"#fb923c","orange-700":"#c2410c","amber-400":"#fbbf24","yellow-400":"#facc15","lime-400":"#a3e635","green-400":"#4ade80","emerald-400":"#34d399","teal-400":"#2dd4bf","cyan-400":"#22d3ee","cyan-600":"#0891b2","sky-400":"#38bdf8","sky-700":"#0369a1","blue-400":"#60a5fa","indigo-400":"#818cf8","violet-400":"#a78bfa","purple-400":"#c084fc","fuchsia-400":"#e879f9","pink-400":"#f472b6","rose-400":"#fb7185"},aT=()=>{let n=[];for(const e in Km)n.push(Km[e]);return n};/*!
 * iro.js v5.5.2
 * 2016-2021 James Daniel
 * Licensed under MPL 2.0
 * github.com/jaames/iro.js
 */var qe,vl,Y0,Zc,X0,Wr={},Hf=[],lT=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|^--/i;function $r(n,e){for(var t in e)n[t]=e[t];return n}function Z0(n){var e=n.parentNode;e&&e.removeChild(n)}function Ie(n,e,t){var r,i,o,a,u=arguments;if(e=$r({},e),arguments.length>3)for(t=[t],r=3;r<arguments.length;r++)t.push(u[r]);if(t!=null&&(e.children=t),n!=null&&n.defaultProps!=null)for(i in n.defaultProps)e[i]===void 0&&(e[i]=n.defaultProps[i]);return a=e.key,(o=e.ref)!=null&&delete e.ref,a!=null&&delete e.key,Qc(n,e,a,o)}function Qc(n,e,t,r){var i={type:n,props:e,key:t,ref:r,__k:null,__p:null,__b:0,__e:null,l:null,__c:null,constructor:void 0};return qe.vnode&&qe.vnode(i),i}function Rl(n){return n.children}function uT(n){if(n==null||typeof n=="boolean")return null;if(typeof n=="string"||typeof n=="number")return Qc(null,n,null,null);if(n.__e!=null||n.__c!=null){var e=Qc(n.type,n.props,n.key,null);return e.__e=n.__e,e}return n}function ms(n,e){this.props=n,this.context=e}function yl(n,e){if(e==null)return n.__p?yl(n.__p,n.__p.__k.indexOf(n)+1):null;for(var t;e<n.__k.length;e++)if((t=n.__k[e])!=null&&t.__e!=null)return t.__e;return typeof n.type=="function"?yl(n):null}function Q0(n){var e,t;if((n=n.__p)!=null&&n.__c!=null){for(n.__e=n.__c.base=null,e=0;e<n.__k.length;e++)if((t=n.__k[e])!=null&&t.__e!=null){n.__e=n.__c.base=t.__e;break}return Q0(n)}}function Ac(n){(!n.__d&&(n.__d=!0)&&vl.push(n)===1||Zc!==qe.debounceRendering)&&(Zc=qe.debounceRendering,(qe.debounceRendering||Y0)(cT))}function cT(){var n,e,t,r,i,o,a,u;for(vl.sort(function(c,h){return h.__v.__b-c.__v.__b});n=vl.pop();)n.__d&&(t=void 0,r=void 0,o=(i=(e=n).__v).__e,a=e.__P,u=e.u,e.u=!1,a&&(t=[],r=Wf(a,i,$r({},i),e.__n,a.ownerSVGElement!==void 0,null,t,u,o==null?yl(i):o),tv(t,i),r!=o&&Q0(i)))}function ev(n,e,t,r,i,o,a,u,c){var h,d,m,g,y,x,w,_=t&&t.__k||Hf,O=_.length;if(u==Wr&&(u=o!=null?o[0]:O?yl(t,0):null),h=0,e.__k=Vf(e.__k,function(P){if(P!=null){if(P.__p=e,P.__b=e.__b+1,(m=_[h])===null||m&&P.key==m.key&&P.type===m.type)_[h]=void 0;else for(d=0;d<O;d++){if((m=_[d])&&P.key==m.key&&P.type===m.type){_[d]=void 0;break}m=null}if(g=Wf(n,P,m=m||Wr,r,i,o,a,null,u,c),(d=P.ref)&&m.ref!=d&&(w||(w=[])).push(d,P.__c||g,P),g!=null){if(x==null&&(x=g),P.l!=null)g=P.l,P.l=null;else if(o==m||g!=u||g.parentNode==null){e:if(u==null||u.parentNode!==n)n.appendChild(g);else{for(y=u,d=0;(y=y.nextSibling)&&d<O;d+=2)if(y==g)break e;n.insertBefore(g,u)}e.type=="option"&&(n.value="")}u=g.nextSibling,typeof e.type=="function"&&(e.l=g)}}return h++,P}),e.__e=x,o!=null&&typeof e.type!="function")for(h=o.length;h--;)o[h]!=null&&Z0(o[h]);for(h=O;h--;)_[h]!=null&&rv(_[h],_[h]);if(w)for(h=0;h<w.length;h++)nv(w[h],w[++h],w[++h])}function Vf(n,e,t){if(t==null&&(t=[]),n==null||typeof n=="boolean")e&&t.push(e(null));else if(Array.isArray(n))for(var r=0;r<n.length;r++)Vf(n[r],e,t);else t.push(e?e(uT(n)):n);return t}function fT(n,e,t,r,i){var o;for(o in t)o in e||Jm(n,o,null,t[o],r);for(o in e)i&&typeof e[o]!="function"||o==="value"||o==="checked"||t[o]===e[o]||Jm(n,o,e[o],t[o],r)}function jm(n,e,t){e[0]==="-"?n.setProperty(e,t):n[e]=typeof t=="number"&&lT.test(e)===!1?t+"px":t==null?"":t}function Jm(n,e,t,r,i){var o,a,u,c,h;if(!((e=i?e==="className"?"class":e:e==="class"?"className":e)==="key"||e==="children"))if(e==="style")if(o=n.style,typeof t=="string")o.cssText=t;else{if(typeof r=="string"&&(o.cssText="",r=null),r)for(a in r)t&&a in t||jm(o,a,"");if(t)for(u in t)r&&t[u]===r[u]||jm(o,u,t[u])}else e[0]==="o"&&e[1]==="n"?(c=e!==(e=e.replace(/Capture$/,"")),h=e.toLowerCase(),e=(h in n?h:e).slice(2),t?(r||n.addEventListener(e,Gm,c),(n.t||(n.t={}))[e]=t):n.removeEventListener(e,Gm,c)):e!=="list"&&e!=="tagName"&&e!=="form"&&!i&&e in n?n[e]=t==null?"":t:typeof t!="function"&&e!=="dangerouslySetInnerHTML"&&(e!==(e=e.replace(/^xlink:?/,""))?t==null||t===!1?n.removeAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase()):n.setAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase(),t):t==null||t===!1?n.removeAttribute(e):n.setAttribute(e,t))}function Gm(n){return this.t[n.type](qe.event?qe.event(n):n)}function Wf(n,e,t,r,i,o,a,u,c,h){var d,m,g,y,x,w,_,O,P,z,E=e.type;if(e.constructor!==void 0)return null;(d=qe.__b)&&d(e);try{e:if(typeof E=="function"){if(O=e.props,P=(d=E.contextType)&&r[d.__c],z=d?P?P.props.value:d.__p:r,t.__c?_=(m=e.__c=t.__c).__p=m.__E:("prototype"in E&&E.prototype.render?e.__c=m=new E(O,z):(e.__c=m=new ms(O,z),m.constructor=E,m.render=hT),P&&P.sub(m),m.props=O,m.state||(m.state={}),m.context=z,m.__n=r,g=m.__d=!0,m.__h=[]),m.__s==null&&(m.__s=m.state),E.getDerivedStateFromProps!=null&&$r(m.__s==m.state?m.__s=$r({},m.__s):m.__s,E.getDerivedStateFromProps(O,m.__s)),g)E.getDerivedStateFromProps==null&&m.componentWillMount!=null&&m.componentWillMount(),m.componentDidMount!=null&&a.push(m);else{if(E.getDerivedStateFromProps==null&&u==null&&m.componentWillReceiveProps!=null&&m.componentWillReceiveProps(O,z),!u&&m.shouldComponentUpdate!=null&&m.shouldComponentUpdate(O,m.__s,z)===!1){for(m.props=O,m.state=m.__s,m.__d=!1,m.__v=e,e.__e=c!=null?c!==t.__e?c:t.__e:null,e.__k=t.__k,d=0;d<e.__k.length;d++)e.__k[d]&&(e.__k[d].__p=e);break e}m.componentWillUpdate!=null&&m.componentWillUpdate(O,m.__s,z)}for(y=m.props,x=m.state,m.context=z,m.props=O,m.state=m.__s,(d=qe.__r)&&d(e),m.__d=!1,m.__v=e,m.__P=n,d=m.render(m.props,m.state,m.context),e.__k=Vf(d!=null&&d.type==Rl&&d.key==null?d.props.children:d),m.getChildContext!=null&&(r=$r($r({},r),m.getChildContext())),g||m.getSnapshotBeforeUpdate==null||(w=m.getSnapshotBeforeUpdate(y,x)),ev(n,e,t,r,i,o,a,c,h),m.base=e.__e;d=m.__h.pop();)m.__s&&(m.state=m.__s),d.call(m);g||y==null||m.componentDidUpdate==null||m.componentDidUpdate(y,x,w),_&&(m.__E=m.__p=null)}else e.__e=dT(t.__e,e,t,r,i,o,a,h);(d=qe.diffed)&&d(e)}catch(q){qe.__e(q,e,t)}return e.__e}function tv(n,e){for(var t;t=n.pop();)try{t.componentDidMount()}catch(r){qe.__e(r,t.__v)}qe.__c&&qe.__c(e)}function dT(n,e,t,r,i,o,a,u){var c,h,d,m,g=t.props,y=e.props;if(i=e.type==="svg"||i,n==null&&o!=null){for(c=0;c<o.length;c++)if((h=o[c])!=null&&(e.type===null?h.nodeType===3:h.localName===e.type)){n=h,o[c]=null;break}}if(n==null){if(e.type===null)return document.createTextNode(y);n=i?document.createElementNS("http://www.w3.org/2000/svg",e.type):document.createElement(e.type),o=null}return e.type===null?g!==y&&(o!=null&&(o[o.indexOf(n)]=null),n.data=y):e!==t&&(o!=null&&(o=Hf.slice.call(n.childNodes)),d=(g=t.props||Wr).dangerouslySetInnerHTML,m=y.dangerouslySetInnerHTML,u||(m||d)&&(m&&d&&m.__html==d.__html||(n.innerHTML=m&&m.__html||"")),fT(n,y,g,i,u),e.__k=e.props.children,m||ev(n,e,t,r,e.type!=="foreignObject"&&i,o,a,Wr,u),u||("value"in y&&y.value!==void 0&&y.value!==n.value&&(n.value=y.value==null?"":y.value),"checked"in y&&y.checked!==void 0&&y.checked!==n.checked&&(n.checked=y.checked))),n}function nv(n,e,t){try{typeof n=="function"?n(e):n.current=e}catch(r){qe.__e(r,t)}}function rv(n,e,t){var r,i,o;if(qe.unmount&&qe.unmount(n),(r=n.ref)&&nv(r,null,e),t||typeof n.type=="function"||(t=(i=n.__e)!=null),n.__e=n.l=null,(r=n.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(a){qe.__e(a,e)}r.base=r.__P=null}if(r=n.__k)for(o=0;o<r.length;o++)r[o]&&rv(r[o],e,t);i!=null&&Z0(i)}function hT(n,e,t){return this.constructor(n,t)}function pT(n,e,t){var r,i,o;qe.__p&&qe.__p(n,e),i=(r=t===X0)?null:t&&t.__k||e.__k,n=Ie(Rl,null,[n]),o=[],Wf(e,r?e.__k=n:(t||e).__k=n,i||Wr,Wr,e.ownerSVGElement!==void 0,t&&!r?[t]:i?null:Hf.slice.call(e.childNodes),o,!1,t||Wr,r),tv(o,n)}qe={},ms.prototype.setState=function(n,e){var t=this.__s!==this.state&&this.__s||(this.__s=$r({},this.state));(typeof n!="function"||(n=n(t,this.props)))&&$r(t,n),n!=null&&this.__v&&(this.u=!1,e&&this.__h.push(e),Ac(this))},ms.prototype.forceUpdate=function(n){this.__v&&(n&&this.__h.push(n),this.u=!0,Ac(this))},ms.prototype.render=Rl,vl=[],Y0=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Zc=qe.debounceRendering,qe.__e=function(n,e,t){for(var r;e=e.__p;)if((r=e.__c)&&!r.__p)try{if(r.constructor&&r.constructor.getDerivedStateFromError!=null)r.setState(r.constructor.getDerivedStateFromError(n));else{if(r.componentDidCatch==null)continue;r.componentDidCatch(n)}return Ac(r.__E=r)}catch(i){n=i}throw n},X0=Wr;function Ym(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function mT(n,e,t){return e&&Ym(n.prototype,e),t&&Ym(n,t),n}function Lt(){return Lt=Object.assign||function(n){for(var e=arguments,t=1;t<arguments.length;t++){var r=e[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])}return n},Lt.apply(this,arguments)}var gT="[-\\+]?\\d+%?",vT="[-\\+]?\\d*\\.\\d+%?",vi="(?:"+vT+")|(?:"+gT+")",iv="[\\s|\\(]+("+vi+")[,|\\s]+("+vi+")[,|\\s]+("+vi+")\\s*\\)?",sv="[\\s|\\(]+("+vi+")[,|\\s]+("+vi+")[,|\\s]+("+vi+")[,|\\s]+("+vi+")\\s*\\)?",yT=new RegExp("rgb"+iv),bT=new RegExp("rgba"+sv),DT=new RegExp("hsl"+iv),xT=new RegExp("hsla"+sv),Bl="^(?:#?|0x?)",yi="([0-9a-fA-F]{1})",bi="([0-9a-fA-F]{2})",wT=new RegExp(Bl+yi+yi+yi+"$"),CT=new RegExp(Bl+yi+yi+yi+yi+"$"),ET=new RegExp(Bl+bi+bi+bi+"$"),AT=new RegExp(Bl+bi+bi+bi+bi+"$"),_T=2e3,ST=4e4,Ma=Math.log,Xi=Math.round,ao=Math.floor;function pn(n,e,t){return Math.min(Math.max(n,e),t)}function It(n,e){var t=n.indexOf("%")>-1,r=parseFloat(n);return t?e/100*r:r}function Pt(n){return parseInt(n,16)}function fi(n){return n.toString(16).padStart(2,"0")}var fs=function(){function n(t,r){this.$={h:0,s:0,v:0,a:1},t&&this.set(t),this.onChange=r,this.initialValue=Lt({},this.$)}var e=n.prototype;return e.set=function(r){if(typeof r=="string")/^(?:#?|0x?)[0-9a-fA-F]{3,8}$/.test(r)?this.hexString=r:/^rgba?/.test(r)?this.rgbString=r:/^hsla?/.test(r)&&(this.hslString=r);else if(typeof r=="object")r instanceof n?this.hsva=r.hsva:"r"in r&&"g"in r&&"b"in r?this.rgb=r:"h"in r&&"s"in r&&"v"in r?this.hsv=r:"h"in r&&"s"in r&&"l"in r?this.hsl=r:"kelvin"in r&&(this.kelvin=r.kelvin);else throw new Error("Invalid color value")},e.setChannel=function(r,i,o){var a;this[r]=Lt({},this[r],(a={},a[i]=o,a))},e.reset=function(){this.hsva=this.initialValue},e.clone=function(){return new n(this)},e.unbind=function(){this.onChange=void 0},n.hsvToRgb=function(r){var i=r.h/60,o=r.s/100,a=r.v/100,u=ao(i),c=i-u,h=a*(1-o),d=a*(1-c*o),m=a*(1-(1-c)*o),g=u%6,y=[a,d,h,h,m,a][g],x=[m,a,a,d,h,h][g],w=[h,h,m,a,a,d][g];return{r:pn(y*255,0,255),g:pn(x*255,0,255),b:pn(w*255,0,255)}},n.rgbToHsv=function(r){var i=r.r/255,o=r.g/255,a=r.b/255,u=Math.max(i,o,a),c=Math.min(i,o,a),h=u-c,d=0,m=u,g=u===0?0:h/u;switch(u){case c:d=0;break;case i:d=(o-a)/h+(o<a?6:0);break;case o:d=(a-i)/h+2;break;case a:d=(i-o)/h+4;break}return{h:d*60%360,s:pn(g*100,0,100),v:pn(m*100,0,100)}},n.hsvToHsl=function(r){var i=r.s/100,o=r.v/100,a=(2-i)*o,u=a<=1?a:2-a,c=u<1e-9?0:i*o/u;return{h:r.h,s:pn(c*100,0,100),l:pn(a*50,0,100)}},n.hslToHsv=function(r){var i=r.l*2,o=r.s*(i<=100?i:200-i)/100,a=i+o<1e-9?0:2*o/(i+o);return{h:r.h,s:pn(a*100,0,100),v:pn((i+o)/2,0,100)}},n.kelvinToRgb=function(r){var i=r/100,o,a,u;return i<66?(o=255,a=-155.25485562709179-.44596950469579133*(a=i-2)+104.49216199393888*Ma(a),u=i<20?0:-254.76935184120902+.8274096064007395*(u=i-10)+115.67994401066147*Ma(u)):(o=351.97690566805693+.114206453784165*(o=i-55)-40.25366309332127*Ma(o),a=325.4494125711974+.07943456536662342*(a=i-50)-28.0852963507957*Ma(a),u=255),{r:pn(ao(o),0,255),g:pn(ao(a),0,255),b:pn(ao(u),0,255)}},n.rgbToKelvin=function(r){for(var i=r.r,o=r.b,a=.4,u=_T,c=ST,h;c-u>a;){h=(c+u)*.5;var d=n.kelvinToRgb(h);d.b/d.r>=o/i?c=h:u=h}return h},mT(n,[{key:"hsv",get:function(){var r=this.$;return{h:r.h,s:r.s,v:r.v}},set:function(r){var i=this.$;if(r=Lt({},i,r),this.onChange){var o={h:!1,v:!1,s:!1,a:!1};for(var a in i)o[a]=r[a]!=i[a];this.$=r,(o.h||o.s||o.v||o.a)&&this.onChange(this,o)}else this.$=r}},{key:"hsva",get:function(){return Lt({},this.$)},set:function(r){this.hsv=r}},{key:"hue",get:function(){return this.$.h},set:function(r){this.hsv={h:r}}},{key:"saturation",get:function(){return this.$.s},set:function(r){this.hsv={s:r}}},{key:"value",get:function(){return this.$.v},set:function(r){this.hsv={v:r}}},{key:"alpha",get:function(){return this.$.a},set:function(r){this.hsv=Lt({},this.hsv,{a:r})}},{key:"kelvin",get:function(){return n.rgbToKelvin(this.rgb)},set:function(r){this.rgb=n.kelvinToRgb(r)}},{key:"red",get:function(){var r=this.rgb;return r.r},set:function(r){this.rgb=Lt({},this.rgb,{r})}},{key:"green",get:function(){var r=this.rgb;return r.g},set:function(r){this.rgb=Lt({},this.rgb,{g:r})}},{key:"blue",get:function(){var r=this.rgb;return r.b},set:function(r){this.rgb=Lt({},this.rgb,{b:r})}},{key:"rgb",get:function(){var r=n.hsvToRgb(this.$),i=r.r,o=r.g,a=r.b;return{r:Xi(i),g:Xi(o),b:Xi(a)}},set:function(r){this.hsv=Lt({},n.rgbToHsv(r),{a:r.a===void 0?1:r.a})}},{key:"rgba",get:function(){return Lt({},this.rgb,{a:this.alpha})},set:function(r){this.rgb=r}},{key:"hsl",get:function(){var r=n.hsvToHsl(this.$),i=r.h,o=r.s,a=r.l;return{h:Xi(i),s:Xi(o),l:Xi(a)}},set:function(r){this.hsv=Lt({},n.hslToHsv(r),{a:r.a===void 0?1:r.a})}},{key:"hsla",get:function(){return Lt({},this.hsl,{a:this.alpha})},set:function(r){this.hsl=r}},{key:"rgbString",get:function(){var r=this.rgb;return"rgb("+r.r+", "+r.g+", "+r.b+")"},set:function(r){var i,o,a,u,c=1;if((i=yT.exec(r))?(o=It(i[1],255),a=It(i[2],255),u=It(i[3],255)):(i=bT.exec(r))&&(o=It(i[1],255),a=It(i[2],255),u=It(i[3],255),c=It(i[4],1)),i)this.rgb={r:o,g:a,b:u,a:c};else throw new Error("Invalid rgb string")}},{key:"rgbaString",get:function(){var r=this.rgba;return"rgba("+r.r+", "+r.g+", "+r.b+", "+r.a+")"},set:function(r){this.rgbString=r}},{key:"hexString",get:function(){var r=this.rgb;return"#"+fi(r.r)+fi(r.g)+fi(r.b)},set:function(r){var i,o,a,u,c=255;if((i=wT.exec(r))?(o=Pt(i[1])*17,a=Pt(i[2])*17,u=Pt(i[3])*17):(i=CT.exec(r))?(o=Pt(i[1])*17,a=Pt(i[2])*17,u=Pt(i[3])*17,c=Pt(i[4])*17):(i=ET.exec(r))?(o=Pt(i[1]),a=Pt(i[2]),u=Pt(i[3])):(i=AT.exec(r))&&(o=Pt(i[1]),a=Pt(i[2]),u=Pt(i[3]),c=Pt(i[4])),i)this.rgb={r:o,g:a,b:u,a:c/255};else throw new Error("Invalid hex string")}},{key:"hex8String",get:function(){var r=this.rgba;return"#"+fi(r.r)+fi(r.g)+fi(r.b)+fi(ao(r.a*255))},set:function(r){this.hexString=r}},{key:"hslString",get:function(){var r=this.hsl;return"hsl("+r.h+", "+r.s+"%, "+r.l+"%)"},set:function(r){var i,o,a,u,c=1;if((i=DT.exec(r))?(o=It(i[1],360),a=It(i[2],100),u=It(i[3],100)):(i=xT.exec(r))&&(o=It(i[1],360),a=It(i[2],100),u=It(i[3],100),c=It(i[4],1)),i)this.hsl={h:o,s:a,l:u,a:c};else throw new Error("Invalid hsl string")}},{key:"hslaString",get:function(){var r=this.hsla;return"hsla("+r.h+", "+r.s+"%, "+r.l+"%, "+r.a+")"},set:function(r){this.hslString=r}}]),n}(),kT={sliderShape:"bar",sliderType:"value",minTemperature:2200,maxTemperature:11e3};function Uf(n){var e,t=n.width,r=n.sliderSize,i=n.borderWidth,o=n.handleRadius,a=n.padding,u=n.sliderShape,c=n.layoutDirection==="horizontal";return r=(e=r)!=null?e:a*2+o*2,u==="circle"?{handleStart:n.padding+n.handleRadius,handleRange:t-a*2-o*2,width:t,height:t,cx:t/2,cy:t/2,radius:t/2-i/2}:{handleStart:r/2,handleRange:t-r,radius:r/2,x:0,y:0,width:c?r:t,height:c?t:r}}function OT(n,e){var t=e.hsva,r=e.rgb;switch(n.sliderType){case"red":return r.r/2.55;case"green":return r.g/2.55;case"blue":return r.b/2.55;case"alpha":return t.a*100;case"kelvin":var i=n.minTemperature,o=n.maxTemperature,a=o-i,u=(e.kelvin-i)/a*100;return Math.max(0,Math.min(u,100));case"hue":return t.h/=3.6;case"saturation":return t.s;case"value":default:return t.v}}function TT(n,e,t){var r=Uf(n),i=r.handleRange,o=r.handleStart,a;n.layoutDirection==="horizontal"?a=-1*t+i+o:a=e-o,a=Math.max(Math.min(a,i),0);var u=Math.round(100/i*a);switch(n.sliderType){case"kelvin":var c=n.minTemperature,h=n.maxTemperature,d=h-c;return c+d*(u/100);case"alpha":return u/100;case"hue":return u*3.6;case"red":case"blue":case"green":return u*2.55;default:return u}}function MT(n,e){var t=Uf(n),r=t.width,i=t.height,o=t.handleRange,a=t.handleStart,u=n.layoutDirection==="horizontal",c=OT(n,e),h=u?r/2:i/2,d=a+c/100*o;return u&&(d=-1*d+o+a*2),{x:u?h:d,y:u?d:h}}function FT(n,e){var t=e.hsv,r=e.rgb;switch(n.sliderType){case"red":return[[0,"rgb("+0+","+r.g+","+r.b+")"],[100,"rgb("+255+","+r.g+","+r.b+")"]];case"green":return[[0,"rgb("+r.r+","+0+","+r.b+")"],[100,"rgb("+r.r+","+255+","+r.b+")"]];case"blue":return[[0,"rgb("+r.r+","+r.g+","+0+")"],[100,"rgb("+r.r+","+r.g+","+255+")"]];case"alpha":return[[0,"rgba("+r.r+","+r.g+","+r.b+",0)"],[100,"rgb("+r.r+","+r.g+","+r.b+")"]];case"kelvin":for(var i=[],o=n.minTemperature,a=n.maxTemperature,u=8,c=a-o,h=o,d=0;h<a;h+=c/u,d+=1){var m=fs.kelvinToRgb(h),g=m.r,y=m.g,x=m.b;i.push([100/u*d,"rgb("+g+","+y+","+x+")"])}return i;case"hue":return[[0,"#f00"],[16.666,"#ff0"],[33.333,"#0f0"],[50,"#0ff"],[66.666,"#00f"],[83.333,"#f0f"],[100,"#f00"]];case"saturation":var w=fs.hsvToHsl({h:t.h,s:0,v:t.v}),_=fs.hsvToHsl({h:t.h,s:100,v:t.v});return[[0,"hsl("+w.h+","+w.s+"%,"+w.l+"%)"],[100,"hsl("+_.h+","+_.s+"%,"+_.l+"%)"]];case"value":default:var O=fs.hsvToHsl({h:t.h,s:t.s,v:100});return[[0,"#000"],[100,"hsl("+O.h+","+O.s+"%,"+O.l+"%)"]]}}var ov=Math.PI*2,NT=function(e,t){return(e%t+t)%t},av=function(e,t){return Math.sqrt(e*e+t*t)};function lv(n){return n.width/2-n.padding-n.handleRadius-n.borderWidth}function RT(n,e,t){var r=Il(n),i=r.cx,o=r.cy,a=n.width/2;return av(i-e,o-t)<a}function Il(n){var e=n.width/2;return{width:n.width,radius:e-n.borderWidth,cx:e,cy:e}}function uv(n,e,t){var r=n.wheelAngle,i=n.wheelDirection;return t&&i==="clockwise"?e=r+e:i==="clockwise"?e=360-r+e:t&&i==="anticlockwise"?e=r+180-e:i==="anticlockwise"&&(e=r-e),NT(e,360)}function BT(n,e){var t=e.hsv,r=Il(n),i=r.cx,o=r.cy,a=lv(n),u=(180+uv(n,t.h,!0))*(ov/360),c=t.s/100*a,h=n.wheelDirection==="clockwise"?-1:1;return{x:i+c*Math.cos(u)*h,y:o+c*Math.sin(u)*h}}function Xm(n,e,t){var r=Il(n),i=r.cx,o=r.cy,a=lv(n);e=i-e,t=o-t;var u=uv(n,Math.atan2(-t,-e)*(360/ov)),c=Math.min(av(e,t),a);return{h:Math.round(u),s:Math.round(100/a*c)}}function qf(n){var e=n.width,t=n.boxHeight,r=n.padding,i=n.handleRadius;return{width:e,height:t!=null?t:e,radius:r+i}}function Zm(n,e,t){var r=qf(n),i=r.width,o=r.height,a=r.radius,u=a,c=i-a*2,h=o-a*2,d=(e-u)/c*100,m=(t-u)/h*100;return{s:Math.max(0,Math.min(d,100)),v:Math.max(0,Math.min(100-m,100))}}function IT(n,e){var t=qf(n),r=t.width,i=t.height,o=t.radius,a=e.hsv,u=o,c=r-o*2,h=i-o*2;return{x:u+a.s/100*c,y:u+(h-a.v/100*h)}}function PT(n,e){var t=e.hue;return[[[0,"#fff"],[100,"hsl("+t+",100%,50%)"]],[[0,"rgba(0,0,0,0)"],[100,"#000"]]]}var _c;function LT(n){_c||(_c=document.getElementsByTagName("base"));var e=window.navigator.userAgent,t=/^((?!chrome|android).)*safari/i.test(e),r=/iPhone|iPod|iPad/i.test(e),i=window.location;return(t||r)&&_c.length>0?i.protocol+"//"+i.host+i.pathname+i.search+n:n}function cv(n,e,t,r){for(var i=0;i<r.length;i++){var o=r[i].x-e,a=r[i].y-t,u=Math.sqrt(o*o+a*a);if(u<n.handleRadius)return i}return null}function Kf(n){return{boxSizing:"border-box",border:n.borderWidth+"px solid "+n.borderColor}}function ef(n,e,t){return n+"-gradient("+e+", "+t.map(function(r){var i=r[0],o=r[1];return o+" "+i+"%"}).join(",")+")"}function St(n){return typeof n=="string"?n:n+"px"}var zT={width:300,height:300,color:"#fff",colors:[],padding:6,layoutDirection:"vertical",borderColor:"#fff",borderWidth:0,handleRadius:8,activeHandleRadius:null,handleSvg:null,handleProps:{x:0,y:0},wheelLightness:!0,wheelAngle:0,wheelDirection:"anticlockwise",sliderSize:null,sliderMargin:12,boxHeight:null},Qm=["mousemove","touchmove","mouseup","touchend"],Pl=function(n){function e(t){n.call(this,t),this.uid=(Math.random()+1).toString(36).substring(5)}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.render=function(r){var i=this.handleEvent.bind(this),o={onMouseDown:i,ontouchstart:i},a=r.layoutDirection==="horizontal",u=r.margin===null?r.sliderMargin:r.margin,c={overflow:"visible",display:a?"inline-block":"block"};return r.index>0&&(c[a?"marginLeft":"marginTop"]=u),Ie(Rl,null,r.children(this.uid,o,c))},e.prototype.handleEvent=function(r){var i=this,o=this.props.onInput,a=this.base.getBoundingClientRect();r.preventDefault();var u=r.touches?r.changedTouches[0]:r,c=u.clientX-a.left,h=u.clientY-a.top;switch(r.type){case"mousedown":case"touchstart":var d=o(c,h,0);d!==!1&&Qm.forEach(function(m){document.addEventListener(m,i,{passive:!1})});break;case"mousemove":case"touchmove":o(c,h,1);break;case"mouseup":case"touchend":o(c,h,2),Qm.forEach(function(m){document.removeEventListener(m,i,{passive:!1})});break}},e}(ms);function Ti(n){var e=n.r,t=n.url,r=e,i=e;return Ie("svg",{className:"IroHandle IroHandle--"+n.index+" "+(n.isActive?"IroHandle--isActive":""),style:{"-webkit-tap-highlight-color":"rgba(0, 0, 0, 0);",transform:"translate("+St(n.x)+", "+St(n.y)+")",willChange:"transform",top:St(-e),left:St(-e),width:St(e*2),height:St(e*2),position:"absolute",overflow:"visible"}},t&&Ie("use",Object.assign({xlinkHref:LT(t)},n.props)),!t&&Ie("circle",{cx:r,cy:i,r:e,fill:"none","stroke-width":2,stroke:"#000"}),!t&&Ie("circle",{cx:r,cy:i,r:e-2,fill:n.fill,"stroke-width":2,stroke:"#fff"}))}Ti.defaultProps={fill:"none",x:0,y:0,r:8,url:null,props:{x:0,y:0}};function bl(n){var e=n.activeIndex,t=e!==void 0&&e<n.colors.length?n.colors[e]:n.color,r=Uf(n),i=r.width,o=r.height,a=r.radius,u=MT(n,t),c=FT(n,t);function h(d,m,g){var y=TT(n,d,m);n.parent.inputActive=!0,t[n.sliderType]=y,n.onInput(g,n.id)}return Ie(Pl,Object.assign({},n,{onInput:h}),function(d,m,g){return Ie("div",Object.assign({},m,{className:"IroSlider",style:Object.assign({},{position:"relative",width:St(i),height:St(o),borderRadius:St(a),background:"conic-gradient(#ccc 25%, #fff 0 50%, #ccc 0 75%, #fff 0)",backgroundSize:"8px 8px"},g)}),Ie("div",{className:"IroSliderGradient",style:Object.assign({},{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:St(a),background:ef("linear",n.layoutDirection==="horizontal"?"to top":"to right",c)},Kf(n))}),Ie(Ti,{isActive:!0,index:t.index,r:n.handleRadius,url:n.handleSvg,props:n.handleProps,x:u.x,y:u.y}))})}bl.defaultProps=Object.assign({},kT);function $T(n){var e=qf(n),t=e.width,r=e.height,i=e.radius,o=n.colors,a=n.parent,u=n.activeIndex,c=u!==void 0&&u<n.colors.length?n.colors[u]:n.color,h=PT(n,c),d=o.map(function(g){return IT(n,g)});function m(g,y,x){if(x===0){var w=cv(n,g,y,d);w!==null?a.setActiveColor(w):(a.inputActive=!0,c.hsv=Zm(n,g,y),n.onInput(x,n.id))}else x===1&&(a.inputActive=!0,c.hsv=Zm(n,g,y));n.onInput(x,n.id)}return Ie(Pl,Object.assign({},n,{onInput:m}),function(g,y,x){return Ie("div",Object.assign({},y,{className:"IroBox",style:Object.assign({},{width:St(t),height:St(r),position:"relative"},x)}),Ie("div",{className:"IroBox",style:Object.assign({},{width:"100%",height:"100%",borderRadius:St(i)},Kf(n),{background:ef("linear","to bottom",h[1])+","+ef("linear","to right",h[0])})}),o.filter(function(w){return w!==c}).map(function(w){return Ie(Ti,{isActive:!1,index:w.index,fill:w.hslString,r:n.handleRadius,url:n.handleSvg,props:n.handleProps,x:d[w.index].x,y:d[w.index].y})}),Ie(Ti,{isActive:!0,index:c.index,fill:c.hslString,r:n.activeHandleRadius||n.handleRadius,url:n.handleSvg,props:n.handleProps,x:d[c.index].x,y:d[c.index].y}))})}var HT="conic-gradient(red, yellow, lime, aqua, blue, magenta, red)",VT="conic-gradient(red, magenta, blue, aqua, lime, yellow, red)";function fv(n){var e=Il(n),t=e.width,r=n.colors;n.borderWidth;var i=n.parent,o=n.color,a=o.hsv,u=r.map(function(d){return BT(n,d)}),c={position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",boxSizing:"border-box"};function h(d,m,g){if(g===0){if(!RT(n,d,m))return!1;var y=cv(n,d,m,u);y!==null?i.setActiveColor(y):(i.inputActive=!0,o.hsv=Xm(n,d,m),n.onInput(g,n.id))}else g===1&&(i.inputActive=!0,o.hsv=Xm(n,d,m));n.onInput(g,n.id)}return Ie(Pl,Object.assign({},n,{onInput:h}),function(d,m,g){return Ie("div",Object.assign({},m,{className:"IroWheel",style:Object.assign({},{width:St(t),height:St(t),position:"relative"},g)}),Ie("div",{className:"IroWheelHue",style:Object.assign({},c,{transform:"rotateZ("+(n.wheelAngle+90)+"deg)",background:n.wheelDirection==="clockwise"?HT:VT})}),Ie("div",{className:"IroWheelSaturation",style:Object.assign({},c,{background:"radial-gradient(circle closest-side, #fff, transparent)"})}),n.wheelLightness&&Ie("div",{className:"IroWheelLightness",style:Object.assign({},c,{background:"#000",opacity:1-a.v/100})}),Ie("div",{className:"IroWheelBorder",style:Object.assign({},c,Kf(n))}),r.filter(function(y){return y!==o}).map(function(y){return Ie(Ti,{isActive:!1,index:y.index,fill:y.hslString,r:n.handleRadius,url:n.handleSvg,props:n.handleProps,x:u[y.index].x,y:u[y.index].y})}),Ie(Ti,{isActive:!0,index:o.index,fill:o.hslString,r:n.activeHandleRadius||n.handleRadius,url:n.handleSvg,props:n.handleProps,x:u[o.index].x,y:u[o.index].y}))})}function WT(n){var e=function(t,r){var i,o=document.createElement("div");pT(Ie(n,Object.assign({},{ref:function(u){return i=u}},r)),o);function a(){var u=t instanceof Element?t:document.querySelector(t);u.appendChild(i.base),i.onMount(u)}return document.readyState!=="loading"?a():document.addEventListener("DOMContentLoaded",a),i};return e.prototype=n.prototype,Object.assign(e,n),e.__component=n,e}var dv=function(n){function e(t){var r=this;n.call(this,t),this.colors=[],this.inputActive=!1,this.events={},this.activeEvents={},this.deferredEvents={},this.id=t.id;var i=t.colors.length>0?t.colors:[t.color];i.forEach(function(o){return r.addColor(o)}),this.setActiveColor(0),this.state=Object.assign({},t,{color:this.color,colors:this.colors,layout:t.layout})}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.addColor=function(r,i){i===void 0&&(i=this.colors.length);var o=new fs(r,this.onColorChange.bind(this));this.colors.splice(i,0,o),this.colors.forEach(function(a,u){return a.index=u}),this.state&&this.setState({colors:this.colors}),this.deferredEmit("color:init",o)},e.prototype.removeColor=function(r){var i=this.colors.splice(r,1)[0];i.unbind(),this.colors.forEach(function(o,a){return o.index=a}),this.state&&this.setState({colors:this.colors}),i.index===this.color.index&&this.setActiveColor(0),this.emit("color:remove",i)},e.prototype.setActiveColor=function(r){this.color=this.colors[r],this.state&&this.setState({color:this.color}),this.emit("color:setActive",this.color)},e.prototype.setColors=function(r,i){var o=this;i===void 0&&(i=0),this.colors.forEach(function(a){return a.unbind()}),this.colors=[],r.forEach(function(a){return o.addColor(a)}),this.setActiveColor(i),this.emit("color:setAll",this.colors)},e.prototype.on=function(r,i){var o=this,a=this.events;(Array.isArray(r)?r:[r]).forEach(function(u){(a[u]||(a[u]=[])).push(i),o.deferredEvents[u]&&(o.deferredEvents[u].forEach(function(c){i.apply(null,c)}),o.deferredEvents[u]=[])})},e.prototype.off=function(r,i){var o=this;(Array.isArray(r)?r:[r]).forEach(function(a){var u=o.events[a];u&&u.splice(u.indexOf(i),1)})},e.prototype.emit=function(r){for(var i=this,o=[],a=arguments.length-1;a-- >0;)o[a]=arguments[a+1];var u=this.activeEvents,c=u.hasOwnProperty(r)?u[r]:!1;if(!c){u[r]=!0;var h=this.events[r]||[];h.forEach(function(d){return d.apply(i,o)}),u[r]=!1}},e.prototype.deferredEmit=function(r){for(var i,o=[],a=arguments.length-1;a-- >0;)o[a]=arguments[a+1];var u=this.deferredEvents;(i=this).emit.apply(i,[r].concat(o)),(u[r]||(u[r]=[])).push(o)},e.prototype.setOptions=function(r){this.setState(r)},e.prototype.resize=function(r){this.setOptions({width:r})},e.prototype.reset=function(){this.colors.forEach(function(r){return r.reset()}),this.setState({colors:this.colors})},e.prototype.onMount=function(r){this.el=r,this.deferredEmit("mount",this)},e.prototype.onColorChange=function(r,i){this.setState({color:this.color}),this.inputActive&&(this.inputActive=!1,this.emit("input:change",r,i)),this.emit("color:change",r,i)},e.prototype.emitInputEvent=function(r,i){r===0?this.emit("input:start",this.color,i):r===1?this.emit("input:move",this.color,i):r===2&&this.emit("input:end",this.color,i)},e.prototype.render=function(r,i){var o=this,a=i.layout;if(!Array.isArray(a)){switch(a){default:a=[{component:fv},{component:bl}]}i.transparency&&a.push({component:bl,options:{sliderType:"alpha"}})}return Ie("div",{class:"IroColorPicker",id:i.id,style:{display:i.display}},a.map(function(u,c){var h=u.component,d=u.options;return Ie(h,Object.assign({},i,d,{ref:void 0,onInput:o.emitInputEvent.bind(o),parent:o,index:c}))}))},e}(ms);dv.defaultProps=Object.assign({},zT,{colors:[],display:"block",id:null,layout:"default",margin:null});var UT=WT(dv),tf;(function(n){n.version="5.5.2",n.Color=fs,n.ColorPicker=UT,function(e){e.h=Ie,e.ComponentBase=Pl,e.Handle=Ti,e.Slider=bl,e.Wheel=fv,e.Box=$T}(n.ui||(n.ui={}))})(tf||(tf={}));var qT=tf;const KT=["value"],jT={__name:"Input",props:["modelValue"],emits:["update:modelValue"],setup(n){const e=ct(null);return No(()=>{e.value.hasAttribute("autofocus")&&rf(()=>{e.value.focus()})}),(t,r)=>(V(),Z("input",{value:n.modelValue,onInput:r[0]||(r[0]=i=>t.$emit("update:modelValue",i.target.value)),ref_key:"input",ref:e,class:"w-full border-stone-600 rounded-md focus:border-indigo-200 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 transition-colors ease-in-out duration-200"},null,40,KT))}},JT={class:"flex items-center justify-between"},GT={class:"grid grid-cols-4 gap-sm"},YT=["onClick"],XT={__name:"ColorPicker",props:{modelValue:{type:String,required:!0},colors:{type:Array,default:()=>aT()}},emits:["update:modelValue"],setup(n,{emit:e}){const t=n,r=ct(null);let i=null;const o=u=>{e("update:modelValue",u.hexString)},a=u=>{e("update:modelValue",u),i.color.set(u)};return No(()=>{i=new qT.ColorPicker(r.value,{color:t.modelValue,width:200}),i.on("color:change",o)}),qC(()=>{i.off("color:change",o)}),(u,c)=>(V(),Z("div",JT,[M("div",null,[M("div",GT,[(V(!0),Z(dt,null,Xn(n.colors,(h,d)=>(V(),Z("button",{key:d,onClick:m=>a(h),role:"button",type:"button",style:Zt({backgroundColor:h}),class:"flex items-center justify-center w-6 h-6 rounded-md"},[h===n.modelValue?(V(),Je(eg,{key:0,class:"text-white"})):Oe("",!0)],12,YT))),128))]),ue(jT,{type:"text",value:n.modelValue,"onUpdate:modelValue":a,class:"mt-4 w-32"},null,8,["value"])]),M("div",{ref_key:"el",ref:r},null,512)]))}},ZT={},QT={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},eM=M("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.75 12a.75.75 0 11-1.5 0 .75.75 0 011.5 0zM12.75 12a.75.75 0 11-1.5 0 .75.75 0 011.5 0zM18.75 12a.75.75 0 11-1.5 0 .75.75 0 011.5 0z"},null,-1),tM=[eM];function nM(n,e){return V(),Z("svg",QT,tM)}const rM=ks(ZT,[["render",nM]]),iM={},sM={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},oM=M("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"},null,-1),aM=[oM];function lM(n,e){return V(),Z("svg",sM,aM)}const uM=ks(iM,[["render",lM]]),cM={},fM={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},dM=M("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.098 19.902a3.75 3.75 0 005.304 0l6.401-6.402M6.75 21A3.75 3.75 0 013 17.25V4.125C3 3.504 3.504 3 4.125 3h5.25c.621 0 1.125.504 1.125 1.125v4.072M6.75 21a3.75 3.75 0 003.75-3.75V8.197M6.75 21h13.125c.621 0 1.125-.504 1.125-1.125v-5.25c0-.621-.504-1.125-1.125-1.125h-4.072M10.5 8.197l2.88-2.88c.438-.439 1.15-.439 1.59 0l3.712 3.713c.44.44.44 1.152 0 1.59l-2.879 2.88M6.75 17.25h.008v.008H6.75v-.008z"},null,-1),hM=[dM];function pM(n,e){return V(),Z("svg",fM,hM)}const mM=ks(cM,[["render",pM]]),gM={tabindex:"0",role:"button",class:"group-btn"},vM=en(" Rename "),yM=en(" Change color "),bM=en(" Delete "),DM={key:2},xM={key:3,class:"relative"},wM=["onKeyup"],CM=en(" Change label color "),EM={class:"mt-4"},AM=en("Cancel "),_M=en("Save changes "),SM=en(" Delete label "),kM=en("Cancel "),OM=en("Delete "),xN={__name:"Tag",props:{item:{type:Object,required:!0},removable:{type:Boolean,default:!0},editable:{type:Boolean,default:!0}},emits:["remove"],setup(n){const e=n,{notify:t}=rE(),r="min-w-[48px] px-2 rounded-md",i="#0f172a",o="#f8fafc",a=ct(!1),u=ct(null),c=ct(""),h=ct(!1),d=()=>{a.value=!0,c.value=e.item.name,rf(()=>{u.value.focus()})},m=()=>{a.value=!1,c.value=""},g=()=>{if(e.item.name===c.value){m();return}Yu.Inertia.put(route("mixpost.tags.update",{tag:e.item.id}),{action:"name",name:c.value},{onStart(){h.value=!0},onFinish(){h.value=!1,m()}})},y=ct(!1),x=ct(""),w=ct(!1),_=()=>{y.value=!0,x.value=e.item.hex_color},O=()=>{y.value=!1,x.value=""},P=()=>{Yu.Inertia.put(route("mixpost.tags.update",{tag:e.item.id}),{action:"color",hex_color:x.value},{onStart(){w.value=!0},onFinish(){w.value=!1,O()}})},z=ct(!1),E=ct(!1),q=()=>{Yu.Inertia.delete(route("mixpost.tags.delete",{tag:e.item.id}),{onStart(){E.value=!0},onSuccess(){z.value=!1,t("success","Label deleted")},onFinish(){E.value=!1}})};return($,K)=>(V(),Z("div",null,[M("div",{style:Zt({backgroundColor:n.item.hex_color,color:Ne(qm)(n.item.hex_color)==="light"?i:o}),class:Dt([r,"relative group"])},[h.value?(V(),Je(oT,{key:0,size:"sm",opacity:50})):Oe("",!0),n.removable||n.editable?(V(),Z("div",{key:1,style:Zt({backgroundColor:n.item.hex_color}),class:"tag-actions absolute right-0 top-0 h-full pl-0.5 hidden items-center rounded-r-md group-hover:flex"},[n.editable?(V(),Je(QC,{key:0,"width-classes":"w-48"},{trigger:xe(()=>[M("div",gM,[ue(rM,{class:"!w-5 !h-5 opacity-75 [.group-btn:hover_&]:opacity-100"})])]),content:xe(()=>[ue(Zu,{onClick:d,as:"button"},{default:xe(()=>[ue(uM,{class:"!w-5 !h-5 mr-1"}),vM]),_:1}),ue(Zu,{onClick:_,as:"button"},{default:xe(()=>[ue(mM,{class:"!w-5 !h-5 mr-1"}),yM]),_:1}),ue(Zu,{onClick:K[0]||(K[0]=H=>z.value=!0),as:"button"},{default:xe(()=>[ue(ZC,{class:"!w-5 !h-5 mr-1 text-red-500"}),bM]),_:1})]),_:1})):Oe("",!0),n.removable?(V(),Z("div",{key:1,onClick:K[1]||(K[1]=H=>$.$emit("remove")),tabindex:"0",role:"button",class:"ml-1 group-btn"},[ue(tg,{class:"!w-5 !h-5 opacity-75 [.group-btn:hover_&]:opacity-100"})])):Oe("",!0)],4)):Oe("",!0),a.value?Oe("",!0):(V(),Z("div",DM,vn(n.item.name),1)),a.value?(V(),Z("div",xM,[KC(M("input",{ref_key:"renameRef",ref:u,"onUpdate:modelValue":K[2]||(K[2]=H=>c.value=H),onKeyup:JC(g,["enter"]),onBlur:m,class:"p-0 w-auto outline-none focus:outline-0 focus:outline-none border-none bg-transparent rounded-md"},null,40,wM),[[jC,c.value]])])):Oe("",!0)],4),n.editable?(V(),Z(dt,{key:0},[ue(eE,{show:y.value,"max-width":"md",onClose:O},{header:xe(()=>[CM]),body:xe(()=>[y.value?(V(),Z(dt,{key:0},[M("div",{style:Zt({backgroundColor:x.value,color:Ne(qm)(x.value)==="light"?i:o}),class:Dt([r,"w-fit"])},vn(n.item.name),5),M("div",EM,[ue(XT,{modelValue:x.value,"onUpdate:modelValue":K[3]||(K[3]=H=>x.value=H)},null,8,["modelValue"])])],64)):Oe("",!0)]),footer:xe(()=>[ue(Dp,{onClick:O,disabled:w.value,class:"mr-xs"},{default:xe(()=>[AM]),_:1},8,["disabled"]),ue(iE,{onClick:P,"is-loading":w.value,disabled:w.value},{default:xe(()=>[_M]),_:1},8,["is-loading","disabled"])]),_:1},8,["show"]),ue(nE,{show:z.value,variant:"danger",onClose:K[5]||(K[5]=H=>z.value=!1)},{header:xe(()=>[SM]),body:xe(()=>[en(" Are you sure you want to delete the "+vn(n.item.name)+" label from everywhere? ",1)]),footer:xe(()=>[ue(Dp,{onClick:K[4]||(K[4]=H=>z.value=!1),disabled:E.value,class:"mr-xs"},{default:xe(()=>[kM]),_:1},8,["disabled"]),ue(tE,{onClick:q,"is-loading":E.value,disabled:E.value},{default:xe(()=>[OM]),_:1},8,["is-loading","disabled"])]),_:1},8,["show"])],64)):Oe("",!0)]))}},TM={key:0,class:"flex px-5 py-4 rounded-md bg-indigo-800"},MM={class:"flex items-center justify-between"},FM={class:"flex items-center"},NM={class:"text-gray-200"},nf={__name:"Alert",props:{variant:{type:String,default:"info"},closeable:{type:Boolean,default:!0}},setup(n){const e=n,t=ct(!0),r=()=>{t.value=!1},i=bn(()=>({success:eg,warning:Xu,error:Xu,info:Xu})[e.variant]),o=bn(()=>({info:"bg-cyan-100 text-cyan-600",success:"bg-lime-100 text-lime-600",warning:"bg-orange-100 text-orange-600",error:"bg-red-100 text-red-600"})[e.variant]);return(a,u)=>t.value?(V(),Z("div",TM,[M("div",MM,[M("div",FM,[M("div",null,[M("div",{class:Dt([Ne(o),"w-8 h-8 rounded-full flex items-center justify-center mr-sm"])},[(V(),Je(ng(Ne(i))))],2)]),M("div",NM,[Ur(a.$slots,"default")])]),n.closeable?(V(),Z("button",{key:0,onClick:r,class:"ml-2xl"},[ue(tg,{class:"text-gray-200"})])):Oe("",!0)])])):Oe("",!0)}},RM=["src"],BM={__name:"OneImage",props:{media:{type:Object,required:!0}},setup(n){return(e,t)=>(V(),Z("img",{src:n.media.thumb_url,draggable:"false",class:"rounded-xl h-full w-full",alt:"thumbnail"},null,8,RM))}},IM={},PM={class:"block p-0 m-0 relative box-border align-middle select-none w-full"};function LM(n,e){return V(),Z("div",PM,[Ur(n.$slots,"default")])}const Di=ks(IM,[["render",LM]]),zM=M("div",{class:"block w-full",style:{"padding-bottom":"56.25%"}},null,-1),$M={class:"flex flex-row gap-1 absolute top-0 left-0 w-full h-full"},HM={class:"absolute flex flex-col top-0 bottom-0 left-0 right-0 overflow-hidden"},VM={__name:"TwoImage",props:{media:{type:Array,required:!0}},setup(n){return(e,t)=>(V(),Je(Di,null,{default:xe(()=>[zM,M("div",$M,[(V(!0),Z(dt,null,Xn(n.media,r=>(V(),Z("div",{key:n.media.id,class:"flex-grow basis-0 relative w-full h-full basis-auto"},[M("div",HM,[M("div",{class:"bg-cover bg-center h-full w-full",style:Zt({backgroundImage:"url("+r.thumb_url+")"})},null,4)])]))),128))])]),_:1}))}},WM={class:"block relative"},UM=M("div",{class:"block w-full",style:{"padding-bottom":"56.25%"}},null,-1),qM={class:"flex flex-row gap-1 absolute top-0 left-0 w-full h-full"},KM={class:"flex flex-col flex-grow basis-0"},jM={class:"flex-grow basis-0 relative w-full h-full basis-auto"},JM={class:"absolute flex flex-col top-0 bottom-0 left-0 right-0 overflow-hidden"},GM={class:"flex flex-col flex-grow gap-1 basis-0"},YM={class:"absolute flex flex-col top-0 bottom-0 left-0 right-0 overflow-hidden"},XM={__name:"ThreeImage",props:{media:{type:Array,required:!0}},setup(n){return(e,t)=>(V(),Z("div",WM,[UM,M("div",qM,[M("div",KM,[M("div",jM,[M("div",JM,[M("div",{class:"bg-cover bg-center h-full w-full rounded-tl-xl rounded-bl-xl",style:Zt({backgroundImage:"url("+n.media[0].thumb_url+")"})},null,4)])])]),M("div",GM,[(V(!0),Z(dt,null,Xn(n.media.slice(1),r=>(V(),Z("div",{key:r.id,class:"flex-grow basis-0 relative w-full h-full basis-auto"},[M("div",YM,[M("div",{class:"bg-cover bg-center h-full w-full",style:Zt({backgroundImage:"url("+r.thumb_url+")"})},null,4)])]))),128))])])]))}},ZM={class:"block relative overflow-hidden"},QM=M("div",{class:"block w-full",style:{"padding-bottom":"56.25%"}},null,-1),eF={class:"flex flex-col gap-1 absolute top-0 left-0 w-full h-full"},tF={class:"flex flex-row flex-grow gap-1 basis-0"},nF={class:"absolute flex flex-col top-0 bottom-0 left-0 right-0 overflow-hidden"},rF={class:"flex flex-row flex-grow gap-1 basis-0"},iF={class:"absolute flex flex-col top-0 bottom-0 left-0 right-0 overflow-hidden"},sF={__name:"FourImage",props:{media:{type:Array,required:!0}},setup(n){return(e,t)=>(V(),Z("div",ZM,[QM,M("div",eF,[M("div",tF,[(V(!0),Z(dt,null,Xn(n.media.slice(0,2),r=>(V(),Z("div",{key:r.id,class:"flex-grow basis-0 relative w-full h-full basis-auto"},[M("div",nF,[M("div",{class:"bg-cover bg-center h-full w-full",style:Zt({backgroundImage:"url("+r.thumb_url+")"})},null,4)])]))),128))]),M("div",rF,[(V(!0),Z(dt,null,Xn(n.media.slice(2,4),r=>(V(),Z("div",{key:r.id,class:"flex-grow basis-0 relative w-full h-full basis-auto"},[M("div",iF,[M("div",{class:"bg-cover bg-center h-full w-full",style:Zt({backgroundImage:"url("+r.thumb_url+")"})},null,4)])]))),128))])])]))}},oF={key:0,class:"overflow-hidden rounded-xl"},aF={__name:"TwitterGallery",props:{media:{type:Array,required:!0}},setup(n){return(e,t)=>n.media.length?(V(),Z("div",oF,[n.media.length===1?(V(),Je(BM,{key:0,media:n.media[0]},null,8,["media"])):Oe("",!0),n.media.length===2?(V(),Je(VM,{key:1,media:n.media},null,8,["media"])):Oe("",!0),n.media.length===3?(V(),Je(XM,{key:2,media:n.media},null,8,["media"])):Oe("",!0),n.media.length>3?(V(),Je(sF,{key:3,media:n.media},null,8,["media"])):Oe("",!0)])):Oe("",!0)}},hv={__name:"EditorReadOnly",props:{value:{required:!0}},setup(n){const e=n,{defaultExtensions:t}=Ff(),r=zO({editable:!1,content:e.value,extensions:t});return GC(()=>e.value,()=>{r.value.commands.setContent(e.value)}),(i,o)=>(V(),Je(Ne(LO),{editor:Ne(r)},null,8,["editor"]))}},lF={class:"absolute right-0 top-0 -mt-sm -mr-xs"},uF={class:"flex items-center justify-center p-2 w-7 h-7 rounded-full bg-white border border-gray-200"},cF={class:"flex items-start"},fF={class:"mr-sm"},dF={class:"inline-flex justify-center items-center flex-shrink-0 w-10 h-10 rounded-full"},hF=["src"],pF={class:"w-full"},mF={class:"flex items-center"},gF={class:"font-medium mr-xs"},vF={class:"text-gray-400"},yF=M("div",{class:"mt-5 flex items-center justify-between"},[M("div",{class:"flex items-center"},[M("svg",{class:"w-5 h-5",viewBox:"0 0 24 24","aria-hidden":"true"},[M("g",null,[M("path",{d:"M14.046 2.242l-4.148-.01h-.002c-4.374 0-7.8 3.427-7.8 7.802 0 4.098 3.186 7.206 7.465 7.37v3.828c0 .108.044.286.12.403.142.225.384.347.632.347.138 0 .277-.038.402-.118.264-.168 6.473-4.14 8.088-5.506 1.902-1.61 3.04-3.97 3.043-6.312v-.017c-.006-4.367-3.43-7.787-7.8-7.788zm3.787 12.972c-1.134.96-4.862 3.405-6.772 4.643V16.67c0-.414-.335-.75-.75-.75h-.396c-3.66 0-6.318-2.476-6.318-5.886 0-3.534 2.768-6.302 6.3-6.302l4.147.01h.002c3.532 0 6.3 2.766 6.302 6.296-.003 1.91-.942 3.844-2.514 5.176z"})])]),M("div",{class:"ml-xs"},"0")]),M("div",{class:"flex items-center"},[M("svg",{class:"w-5 h-5",viewBox:"0 0 24 24","aria-hidden":"true"},[M("g",null,[M("path",{d:"M23.77 15.67c-.292-.293-.767-.293-1.06 0l-2.22 2.22V7.65c0-2.068-1.683-3.75-3.75-3.75h-5.85c-.414 0-.75.336-.75.75s.336.75.75.75h5.85c1.24 0 2.25 1.01 2.25 2.25v10.24l-2.22-2.22c-.293-.293-.768-.293-1.06 0s-.294.768 0 1.06l3.5 3.5c.145.147.337.22.53.22s.383-.072.53-.22l3.5-3.5c.294-.292.294-.767 0-1.06zm-10.66 3.28H7.26c-1.24 0-2.25-1.01-2.25-2.25V6.46l2.22 2.22c.148.147.34.22.532.22s.384-.073.53-.22c.293-.293.293-.768 0-1.06l-3.5-3.5c-.293-.294-.768-.294-1.06 0l-3.5 3.5c-.294.292-.294.767 0 1.06s.767.293 1.06 0l2.22-2.22V16.7c0 2.068 1.683 3.75 3.75 3.75h5.85c.414 0 .75-.336.75-.75s-.337-.75-.75-.75z"})])]),M("div",{class:"ml-xs"},"27")]),M("div",{class:"flex items-center"},[M("svg",{class:"w-5 h-5",viewBox:"0 0 24 24","aria-hidden":"true"},[M("g",null,[M("path",{d:"M12 21.638h-.014C9.403 21.59 1.95 14.856 1.95 8.478c0-3.064 2.525-5.754 5.403-5.754 2.29 0 3.83 1.58 4.646 2.73.814-1.148 2.354-2.73 4.645-2.73 2.88 0 5.404 2.69 5.404 5.755 0 6.376-7.454 13.11-10.037 13.157H12zM7.354 4.225c-2.08 0-3.903 1.988-3.903 4.255 0 5.74 7.034 11.596 8.55 11.658 1.518-.062 8.55-5.917 8.55-11.658 0-2.267-1.823-4.255-3.903-4.255-2.528 0-3.94 2.936-3.952 2.965-.23.562-1.156.562-1.387 0-.014-.03-1.425-2.965-3.954-2.965z"})])]),M("div",{class:"ml-xs"},"312")]),M("div",null,[M("svg",{class:"w-5 h-5",viewBox:"0 0 24 24","data-testid":"iconOutgoing","aria-hidden":"true"},[M("g",null,[M("path",{d:"M17.53 7.47l-5-5c-.293-.293-.768-.293-1.06 0l-5 5c-.294.293-.294.768 0 1.06s.767.294 1.06 0l3.72-3.72V15c0 .414.336.75.75.75s.75-.336.75-.75V4.81l3.72 3.72c.146.147.338.22.53.22s.384-.072.53-.22c.293-.293.293-.767 0-1.06z"}),M("path",{d:"M19.708 21.944H4.292C3.028 21.944 2 20.916 2 19.652V14c0-.414.336-.75.75-.75s.75.336.75.75v5.652c0 .437.355.792.792.792h15.416c.437 0 .792-.355.792-.792V14c0-.414.336-.75.75-.75s.75.336.75.75v5.652c0 1.264-1.028 2.292-2.292 2.292z"})])])])],-1),bF={__name:"PostPreviewTwitter",props:{name:{required:!0,type:String},username:{required:!0,type:String},image:{required:!0,type:String},content:{required:!0,type:Array},reachedMaxCharacterLimit:{type:Boolean,default:!1}},setup(n){const e=n,{isDocEmpty:t}=Ff(),r=bn(()=>e.content[0]);return(i,o)=>(V(),Z(dt,null,[n.reachedMaxCharacterLimit?(V(),Je(nf,{key:0,variant:"error",closeable:!1,class:"mb-xs"},{default:xe(()=>[en(" ["+vn(n.name)+"] : You have reached the maximum character limit ",1)]),_:1})):Oe("",!0),Ne(r).media.length>4?(V(),Je(nf,{key:1,variant:"warning",class:"mb-xs"},{default:xe(()=>[en("["+vn(n.name)+"]: Twitter accepts a maximum of 4 pictures. Don't worry, if you have selected several pictures, Mixpost will only post the first 4.",1)]),_:1})):Oe("",!0),ue(sf,{class:Dt([{"border-red-500":n.reachedMaxCharacterLimit},"relative"])},{default:xe(()=>[M("div",lF,[M("div",uF,[M("div",null,[ue(rg,{provider:"twitter",class:"!w-5 !h-5"})])])]),M("div",cF,[M("div",fF,[M("span",dF,[M("img",{src:n.image,class:"object-cover w-full h-full rounded-full",alt:""},null,8,hF)])]),M("div",pF,[M("div",mF,[M("div",gF,vn(n.name),1),M("div",vF,"@"+vn(n.username),1)]),ue(hv,{value:Ne(r).body,class:Dt({"mt-xs":!Ne(t)(Ne(r).body),"mb-xs":Ne(r).media.length})},null,8,["value","class"]),ue(aF,{media:Ne(r).media},null,8,["media"]),yF])])]),_:1},8,["class"])],64))}},DF="/vendor/mixpost/assets/fb-like.59c2ede2.svg",xF="/vendor/mixpost/assets/fb-wow.ca50712c.svg",wF=["src","alt","title"],ds={__name:"CoverStyle",props:{src:{type:String,required:!0},alt:{type:String,default:""},title:{type:String,default:""}},emits:["load"],setup(n){return(e,t)=>(V(),Z("img",{src:n.src,class:"h-full w-full object-cover",alt:n.alt,title:n.title,onLoad:t[0]||(t[0]=r=>e.$emit("load",r))},null,40,wF))}},CF={__name:"OneImage",props:{media:{type:Object,required:!0}},setup(n){return(e,t)=>(V(),Je(Di,null,{default:xe(()=>[ue(ds,{src:n.media.thumb_url,alt:"Image"},null,8,["src"])]),_:1}))}},EF={key:1,class:"block relative"},AF={class:"absolute block top-0 left-0 bottom-0 right-0"},fo={__name:"AspectRatioBox",props:{ratio:{type:Number,default:1}},setup(n){return(e,t)=>(V(),Z(dt,null,[n.ratio?Oe("",!0):Ur(e.$slots,"default",{key:0}),n.ratio?(V(),Z("div",EF,[M("div",AF,[Ur(e.$slots,"default")]),M("div",{class:"block",style:Zt({paddingBottom:1/n.ratio*100+"%"})},null,4)])):Oe("",!0)],64))}},_F={class:"flex flex-row gap-1"},SF={__name:"TwoImage",props:{media:{type:Array,required:!0}},setup(n){return(e,t)=>(V(),Z("div",_F,[(V(!0),Z(dt,null,Xn(n.media,r=>(V(),Z("div",{key:n.media.id,class:"w-1/2 grow-0"},[ue(Di,null,{default:xe(()=>[ue(fo,null,{default:xe(()=>[ue(ds,{src:r.thumb_url},null,8,["src"])]),_:2},1024)]),_:2},1024)]))),128))]))}},kF=["src"],OF={key:0,class:"flex flex-wrap gap-1"},TF={class:"w-full h-full flex grow-0 gap-1"},MF={class:"w-full flex grow-0 gap-1"},FF={key:0,class:"absolute top-0 right-0 bottom-0 left-0 flex items-center justify-center bg-black bg-opacity-60"},NF={class:"font-semibold text-3xl text-white"},RF={class:"flex flex-row gap-1"},BF={class:"flex flex-wrap gap-1"},IF={__name:"ThreeAndMoreImage",props:{media:{type:Array,required:!0}},setup(n){const e=ct(null),t=ct(null),r=()=>{if(!e.value)return;const i=e.value.naturalHeight>e.value.naturalWidth?"VERTICAL":"HORIZONTAL";t.value!==i&&(t.value=i)};return(i,o)=>(V(),Z(dt,null,[M("img",{ref_key:"firstImageRef",ref:e,src:n.media[0].thumb_url,onLoad:r,alt:"Image",class:"hidden"},null,40,kF),t.value==="HORIZONTAL"||n.media.length>4?(V(),Z("div",OF,[M("div",TF,[(V(!0),Z(dt,null,Xn(n.media.slice(0,n.media.length<5?1:2),a=>(V(),Je(Di,{key:a.id},{default:xe(()=>[ue(fo,{ratio:n.media.length<5?null:1},{default:xe(()=>[ue(ds,{src:a.thumb_url},null,8,["src"])]),_:2},1032,["ratio"])]),_:2},1024))),128))]),M("div",MF,[(V(!0),Z(dt,null,Xn(n.media.slice(n.media.length<5?1:2,5),(a,u)=>(V(),Je(Di,null,{default:xe(()=>[ue(fo,null,{default:xe(()=>[ue(ds,{src:a.thumb_url},null,8,["src"])]),_:2},1024),u===2&&n.media.length>5?(V(),Z("div",FF,[M("span",NF,"+"+vn(n.media.length-5),1)])):Oe("",!0)]),_:2},1024))),256))])])):(V(),Je(fo,{key:1},{default:xe(()=>[M("div",RF,[M("div",{class:Dt(["flex grow-0",{"w-1/2":n.media.length===3,"w-2/3":n.media.length>3}])},[ue(Di,null,{default:xe(()=>[ue(ds,{src:n.media[0].thumb_url},null,8,["src"])]),_:1})],2),M("div",{class:Dt(["block",{"w-1/2":n.media.length===3,"w-1/3":n.media.length>3}])},[M("div",BF,[(V(!0),Z(dt,null,Xn(n.media.slice(1),a=>(V(),Je(Di,null,{default:xe(()=>[ue(fo,null,{default:xe(()=>[ue(ds,{src:a.thumb_url},null,8,["src"])]),_:2},1024)]),_:2},1024))),256))])],2)])]),_:1}))],64))}},PF={key:0,class:"rounded-md overflow-hidden"},LF={__name:"FacebookGallery",props:{media:{type:Array,required:!0}},setup(n){return(e,t)=>n.media.length?(V(),Z("div",PF,[n.media.length===1?(V(),Je(CF,{key:0,media:n.media[0]},null,8,["media"])):Oe("",!0),n.media.length===2?(V(),Je(SF,{key:1,media:n.media},null,8,["media"])):Oe("",!0),n.media.length>2?(V(),Je(IF,{key:2,media:n.media},null,8,["media"])):Oe("",!0)])):Oe("",!0)}},Sc="/vendor/mixpost/assets/fb-icons.855a0fcf.png";const zF={class:"absolute right-0 top-0 -mt-sm -mr-xs"},$F={class:"flex items-center justify-center p-2 w-7 h-7 rounded-full bg-white border border-gray-200"},HF={class:"flex items-center"},VF={class:"inline-flex justify-center items-center flex-shrink-0 w-10 h-10 rounded-full mr-sm"},WF=["src"],UF={class:"flex flex-col"},qF={class:"font-medium mr-xs"},KF=M("div",{class:"text-gray-400 text-sm"},"19h",-1),jF={class:"w-full"},JF=M("div",{class:"mt-5 flex items-center justify-between"},[M("div",{class:"flex items-center"},[M("div",{class:"flex mr-xs"},[M("img",{src:DF,class:"w-5 h-5 z-10",alt:""}),M("img",{src:xF,class:"w-5 h-5 -ml-1",alt:""})]),M("div",{class:"text-gray-500"},"116")]),M("div",{class:"text-gray-500"},"0 comments")],-1),GF={class:"mt-5 flex items-center justify-around border-t border-b border-gray-200 text-gray-500 py-2"},YF={class:"flex items-center"},XF=M("span",{class:"ml-1 font-semibold"},"Like",-1),ZF={class:"flex items-center"},QF=M("span",{class:"ml-1 font-semibold"},"Comment",-1),eN={class:"flex items-center"},tN=M("span",{class:"ml-1 font-semibold"},"Share",-1),nN={__name:"PostPreviewFacebook",props:{name:{required:!0,type:String},username:{required:!0,type:String},image:{required:!0,type:String},content:{required:!0,type:Array},reachedMaxCharacterLimit:{type:Boolean,default:!1}},setup(n){const e=n,{isDocEmpty:t}=Ff(),r=bn(()=>e.content[0]);return(i,o)=>(V(),Z(dt,null,[n.reachedMaxCharacterLimit?(V(),Je(nf,{key:0,variant:"error",closeable:!1,class:"mb-xs"},{default:xe(()=>[en("["+vn(n.name)+"] : You have reached the maximum character limit ",1)]),_:1})):Oe("",!0),ue(sf,{class:Dt([{"border-red-500":n.reachedMaxCharacterLimit},"relative"])},{default:xe(()=>[M("div",zF,[M("div",$F,[M("div",null,[ue(rg,{provider:"facebook",class:"!w-5 !h-5"})])])]),M("div",HF,[M("span",VF,[M("img",{src:n.image,class:"object-cover w-full h-full rounded-full",alt:""},null,8,WF)]),M("div",UF,[M("div",qF,vn(n.name),1),KF])]),M("div",jF,[ue(hv,{value:Ne(r).body,class:Dt({"mt-xs":!Ne(t)(Ne(r).body),"mb-xs":Ne(r).media.length})},null,8,["value","class"]),ue(LF,{media:Ne(r).media},null,8,["media"])]),JF,M("div",GF,[M("div",YF,[M("i",{style:Zt({backgroundImage:`url(${Ne(Sc)})`,backgroundPosition:"0px -342px",backgroundSize:"25px 867px"}),class:"facebook-toolbar-icon"},null,4),XF]),M("div",ZF,[M("i",{style:Zt({backgroundImage:`url(${Ne(Sc)})`,backgroundPosition:"0px -304px",backgroundSize:"25px 867px"}),class:"facebook-toolbar-icon"},null,4),QF]),M("div",eN,[M("i",{style:Zt({backgroundImage:`url(${Ne(Sc)})`,backgroundPosition:"0px -361px",backgroundSize:"25px 867px"}),class:"facebook-toolbar-icon"},null,4),tN])])]),_:1},8,["class"])],64))}},rN=M("div",null,[M("div",null,"Hi \u{1F44B}"),M("div",null,"Select an account and start writing your post in the left panel to start.")],-1),iN=M("div",{class:"flex items-start"},[M("div",{class:"mr-sm"},[M("span",{class:"inline-flex justify-center items-center flex-shrink-0 w-10 h-10 rounded-full bg-gray-100"})]),M("div",{class:"w-full"},[M("div",{class:"flex items-center"},[M("div",{class:"mr-xs bg-gray-100 w-2/12 h-4"}),M("div",{class:"bg-gray-100 w-3/12 h-4"})]),M("div",{class:"mt-5"},[M("div",{class:"bg-gray-100 w-3/4 h-4"}),M("div",{class:"bg-gray-100 w-full h-4 mt-xs"}),M("div",{class:"bg-gray-100 w-2/5 h-4 mt-xs"})])])],-1),wN={__name:"PostPreviewProviders",props:{accounts:{required:!0,type:Array},selectedAccounts:{required:!0,type:Array},versions:{required:!0,type:Array}},setup(n){const e=n;YC("postContext");const{getOriginalVersion:t,getAccountVersion:r}=sE(),i=bn(()=>t(e.versions)),o=bn(()=>e.accounts.filter(a=>e.selectedAccounts.includes(a.id)).map(a=>{const u=r(e.versions,a.id);return{account:a,content:u?u.content:i.value.content,providerComponent:{twitter:bF,facebook:nN}[a.provider]}}));return(a,u)=>n.selectedAccounts.length?(V(!0),Z(dt,{key:0},Xn(Ne(o),c=>(V(),Z("div",{key:c.id,class:"mb-lg last:mb-0"},[(V(),Je(ng(c.providerComponent),{name:c.account.name,username:c.account.username,image:c.account.image,content:c.content},null,8,["name","username","image","content"]))]))),128)):(V(),Z(dt,{key:1},[rN,ue(sf,{class:"mt-lg"},{default:xe(()=>[iN]),_:1})],64))}},sN={class:"flex items-center"},CN={__name:"PostStatus",props:{value:{type:String,required:!0}},setup(n){const e=n,t=bn(()=>({DRAFT:"bg-gray-500",PUBLISHED:"bg-lime-500",SCHEDULED:"bg-cyan-500"})[e.value]),r=bn(()=>({DRAFT:"Draft",PUBLISHED:"Published",SCHEDULED:"Scheduled"})[e.value]);return(i,o)=>(V(),Z("div",sN,[M("div",{class:Dt([[Ne(t)],"w-4 h-4 mr-xs rounded-full"])},null,2),M("div",null,vn(Ne(r)),1)]))}};export{aT as C,Fn as D,In as E,mo as M,rr as P,dN as T,hN as _,tn as a,yt as b,LO as c,Ff as d,mN as e,pN as f,sE as g,gN as h,oT as i,DN as j,qO as k,kc as l,yN as m,bN as n,xN as o,jT as p,vN as q,CN as r,wN as s,fN as t,zO as u,uM as v};
